/*! For license information please see main.8cdc301d.js.LICENSE.txt */
(()=>{var e={238:(e,t)=>{"use strict";t.Y=function(e,t){return o(e).some((function(e){var n=e.inverse,i="all"===e.type||t.type===e.type;if(i&&n||!i&&!n)return!1;var s=e.expressions.every((function(e){var n=e.feature,i=e.modifier,s=e.value,r=t[n];if(!r)return!1;switch(n){case"orientation":case"scan":return r.toLowerCase()===s.toLowerCase();case"width":case"height":case"device-width":case"device-height":s=h(s),r=h(r);break;case"resolution":s=c(s),r=c(r);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":s=l(s),r=l(r);break;case"grid":case"color":case"color-index":case"monochrome":s=parseInt(s,10)||1,r=parseInt(r,10)||0}switch(i){case"min":return r>=s;case"max":return r<=s;default:return r===s}}));return s&&!n||!s&&n}))};var n=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,i=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,s=/^(?:(min|max)-)?(.+)/,r=/(em|rem|px|cm|mm|in|pt|pc)?$/,a=/(dpi|dpcm|dppx)?$/;function o(e){return e.split(",").map((function(e){var t=(e=e.trim()).match(n),r=t[1],a=t[2],o=t[3]||"",l={};return l.inverse=!!r&&"not"===r.toLowerCase(),l.type=a?a.toLowerCase():"all",o=o.match(/\([^\)]+\)/g)||[],l.expressions=o.map((function(e){var t=e.match(i),n=t[1].toLowerCase().match(s);return{modifier:n[1],feature:n[2],value:t[2]}})),l}))}function l(e){var t,n=Number(e);return n||(n=(t=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/t[2]),n}function c(e){var t=parseFloat(e);switch(String(e).match(a)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function h(e){var t=parseFloat(e);switch(String(e).match(r)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}},725:(e,t,n)=>{"use strict";var i=n(238).Y,s="undefined"!==typeof window?window.matchMedia:null;function r(e,t,n){var r,a=this;function o(e){a.matches=e.matches,a.media=e.media}s&&!n&&(r=s.call(window,e)),r?(this.matches=r.matches,this.media=r.media,r.addListener(o)):(this.matches=i(e,t),this.media=e),this.addListener=function(e){r&&r.addListener(e)},this.removeListener=function(e){r&&r.removeListener(e)},this.dispose=function(){r&&r.removeListener(o)}}e.exports=function(e,t,n){return new r(e,t,n)}},497:(e,t,n)=>{"use strict";var i=n(218);function s(){}function r(){}r.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,r,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:s};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var i=n(43),s=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,i,s,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function y(e,t,n,i){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!u.call(f,e)||!u.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,_);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,O=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var W=!1;function z(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),r=i.stack.split("\n"),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==r[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case k:return"Portal";case S:return"Profiler";case x:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=V(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){$(e,t);var n=q(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function re(e,t){var n=q(t.value),i=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,ue=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Ce=null,xe=null;function Se(e){if(e=ys(e)){if("function"!==typeof ke)throw Error(r(280));var t=e.stateNode;t&&(t=ws(t),ke(e.stateNode,e.type,t))}}function Ae(e){Ce?xe?xe.push(e):xe=[e]:Ce=e}function Ee(){if(Ce){var e=Ce,t=xe;if(xe=Ce=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Me(){}var Ie=!1;function Re(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==Ce||null!==xe)&&(Me(),Ee())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var i=ws(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Ne=!1;if(h)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(he){Ne=!1}function De(e,t,n,i,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(h){this.onError(h)}}var Fe=!1,Oe=null,je=!1,We=null,ze={onError:function(e){Fe=!0,Oe=e}};function Be(e,t,n,i,s,r,a,o,l){Fe=!1,Oe=null,De.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ue(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===i)return qe(s),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=a;break}if(l===i){o=!0,i=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=s;break}if(l===i){o=!0,i=a,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ye=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,Qe=s.unstable_requestPaint,$e=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?i=ut(o):0!==(r&=a)&&(i=ut(r))}else 0!==(a=n&~s)?i=ut(a):0!==r&&(i=ut(r));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-at(t)),i|=e[n],t&=~s;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,Ct,xt,St,At=!1,Et=[],Tt=null,Mt=null,It=null,Rt=new Map,Pt=new Map,Nt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ft(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&kt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ot(e){var t=_s(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&kt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Wt(e,t,n){jt(e)&&n.delete(t)}function zt(){At=!1,null!==Tt&&jt(Tt)&&(Tt=null),null!==Mt&&jt(Mt)&&(Mt=null),null!==It&&jt(It)&&(It=null),Rt.forEach(Wt),Pt.forEach(Wt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Mt&&Bt(Mt,e),null!==It&&Bt(It,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Nt.length;n++)(i=Nt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Nt.shift()}var Ht=b.ReactCurrentBatchConfig,qt=!0;function Vt(e,t,n,i){var s=yt,r=Ht.transition;Ht.transition=null;try{yt=1,Kt(e,t,n,i)}finally{yt=s,Ht.transition=r}}function Gt(e,t,n,i){var s=yt,r=Ht.transition;Ht.transition=null;try{yt=4,Kt(e,t,n,i)}finally{yt=s,Ht.transition=r}}function Kt(e,t,n,i){if(qt){var s=Xt(e,t,n,i);if(null===s)qi(e,t,i,Yt,n),Dt(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,i,s),!0;case"dragenter":return Mt=Ft(Mt,e,t,n,i,s),!0;case"mouseover":return It=Ft(It,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Rt.set(r,Ft(Rt.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Pt.set(r,Ft(Pt.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Lt.indexOf(e)){for(;null!==s;){var r=ys(s);if(null!==r&&wt(r),null===(r=Xt(e,t,n,i))&&qi(e,t,i,Yt,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else qi(e,t,i,null,n)}}var Yt=null;function Xt(e,t,n,i){if(Yt=null,null!==(e=_s(e=we(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,s="value"in $t?$t.value:$t.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[r-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,i,s,r){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=rn(cn),un=O({},cn,{view:0,detail:0}),dn=rn(un),pn=O({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(pn),gn=rn(O({},pn,{dataTransfer:0})),mn=rn(O({},un,{relatedTarget:0})),vn=rn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=rn(_n),bn=rn(O({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Sn(){return xn}var An=O({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=rn(An),Tn=rn(O({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=rn(O({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=rn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=O({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=rn(Rn),Nn=[9,13,27,32],Ln=h&&"CompositionEvent"in window,Dn=null;h&&"documentMode"in document&&(Dn=document.documentMode);var Fn=h&&"TextEvent"in window&&!Dn,On=h&&(!Ln||Dn&&8<Dn&&11>=Dn),jn=String.fromCharCode(32),Wn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Vn(e,t,n,i){Ae(i),0<(t=Gi(t,"onChange")).length&&(n=new hn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){ji(e,0)}function Xn(e){if(K(bs(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(h){var Jn;if(h){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Vn(t,Kn,e,we(e)),Re(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ri(e,t){if("click"===e)return Xn(t)}function ai(e,t){if("input"===e||"change"===e)return Xn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!u.call(t,s)||!oi(e[s],t[s]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hi(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=hi(n,r);var a=hi(n,i);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=h&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,_i=null,yi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&li(_i,i)||(_i=i,0<(i=Gi(vi,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ki={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},Ci={},xi={};function Si(e){if(Ci[e])return Ci[e];if(!ki[e])return e;var t,n=ki[e];for(t in n)if(n.hasOwnProperty(t)&&t in xi)return Ci[e]=n[t];return e}h&&(xi=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);var Ai=Si("animationend"),Ei=Si("animationiteration"),Ti=Si("animationstart"),Mi=Si("transitionend"),Ii=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){Ii.set(e,t),l(t,[e])}for(var Ni=0;Ni<Ri.length;Ni++){var Li=Ri[Ni];Pi(Li.toLowerCase(),"on"+(Li[0].toUpperCase()+Li.slice(1)))}Pi(Ai,"onAnimationEnd"),Pi(Ei,"onAnimationIteration"),Pi(Ti,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Mi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Oi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,a,o,l,c){if(Be.apply(this,arguments),Fe){if(!Fe)throw Error(r(198));var h=Oe;Fe=!1,Oe=null,je||(je=!0,We=h)}}(i,t,void 0,e),e.currentTarget=null}function ji(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Oi(s,o,c),r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Oi(s,o,c),r=l}}}if(je)throw e=We,je=!1,We=null,e}function Wi(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Bi]){e[Bi]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,zi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Qt(t)){case 1:var s=Vt;break;case 4:s=Gt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qi(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=_s(o)))return;if(5===(l=a.tag)||6===l){i=r=a;continue e}o=o.parentNode}}i=i.return}Re((function(){var i=r,s=we(n),a=[];e:{var o=Ii.get(e);if(void 0!==o){var l=hn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Ai:case Ei:case Ti:l=vn;break;case Mi:l=In;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var h=0!==(4&t),u=!h&&"scroll"===e,d=h?null!==o?o+"Capture":null:o;h=[];for(var p,f=i;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&(null!=(g=Pe(f,d))&&h.push(Vi(f,g,p)))),u)break;f=f.return}0<h.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!_s(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?_s(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(h=fn,g="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(h=Tn,g="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==l?o:bs(l),p=null==c?o:bs(c),(o=new h(g,f+"leave",l,n,s)).target=u,o.relatedTarget=p,g=null,_s(s)===i&&((h=new h(d,f+"enter",c,n,s)).target=p,h.relatedTarget=u,g=h),u=g,l&&c)e:{for(d=c,f=0,p=h=l;p;p=Ki(p))f++;for(p=0,g=d;g;g=Ki(g))p++;for(;0<f-p;)h=Ki(h),f--;for(;0<p-f;)d=Ki(d),p--;for(;f--;){if(h===d||null!==d&&h===d.alternate)break e;h=Ki(h),d=Ki(d)}h=null}else h=null;null!==l&&Yi(a,o,l,h,!1),null!==c&&null!==u&&Yi(a,u,c,h,!0)}if("select"===(l=(o=i?bs(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Qn;else if(qn(o))if($n)m=ai;else{m=si;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ri);switch(m&&(m=m(e,i))?Vn(a,m,n,s):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?bs(i):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,_i=null);break;case"focusout":_i=vi=mi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(a,n,s);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(a,n,s)}var _;if(Ln)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(On&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(_=en()):(Jt="value"in($t=s)?$t.value:$t.textContent,Un=!0)),0<(v=Gi(i,y)).length&&(y=new bn(y,e,null,n,s),a.push({event:y,listeners:v}),_?y.data=_:null!==(_=Bn(n))&&(y.data=_))),(_=Fn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Wn=!0,jn);case"textInput":return(e=t.data)===jn&&Wn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Ln&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:i}),s.data=_))}ji(a,t)}))}function Vi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Pe(e,n))&&i.unshift(Vi(e,r,s)),null!=(r=Pe(e,t))&&i.push(Vi(e,r,s))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,s){for(var r=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Pe(n,r))&&a.unshift(Vi(n,l,o)):s||null!=(l=Pe(n,r))&&a.push(Vi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Qi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(r(425))}function Zi(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(os)}:is;function os(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ut(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ds="__reactFiber$"+us,ps="__reactProps$"+us,fs="__reactContainer$"+us,gs="__reactEvents$"+us,ms="__reactListeners$"+us,vs="__reactHandles$"+us;function _s(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hs(e);null!==e;){if(n=e[ds])return n;e=hs(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[ds]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function ws(e){return e[ps]||null}var ks=[],Cs=-1;function xs(e){return{current:e}}function Ss(e){0>Cs||(e.current=ks[Cs],ks[Cs]=null,Cs--)}function As(e,t){Cs++,ks[Cs]=e.current,e.current=t}var Es={},Ts=xs(Es),Ms=xs(!1),Is=Es;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Es;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ps(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ns(){Ss(Ms),Ss(Ts)}function Ls(e,t,n){if(Ts.current!==Es)throw Error(r(168));As(Ts,t),As(Ms,n)}function Ds(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,H(e)||"Unknown",s));return O({},n,i)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Is=Ts.current,As(Ts,e),As(Ms,Ms.current),!0}function Os(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=Ds(e,t,Is),i.__reactInternalMemoizedMergedChildContext=e,Ss(Ms),Ss(Ts),As(Ts,e)):Ss(Ms),As(Ms,n)}var js=null,Ws=!1,zs=!1;function Bs(e){null===js?js=[e]:js.push(e)}function Us(){if(!zs&&null!==js){zs=!0;var e=0,t=yt;try{var n=js;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}js=null,Ws=!1}catch(s){throw null!==js&&(js=js.slice(e+1)),Ke(Ze,Us),s}finally{yt=t,zs=!1}}return null}var Hs=[],qs=0,Vs=null,Gs=0,Ks=[],Ys=0,Xs=null,Qs=1,$s="";function Js(e,t){Hs[qs++]=Gs,Hs[qs++]=Vs,Vs=e,Gs=t}function Zs(e,t,n){Ks[Ys++]=Qs,Ks[Ys++]=$s,Ks[Ys++]=Xs,Xs=e;var i=Qs;e=$s;var s=32-at(i)-1;i&=~(1<<s),n+=1;var r=32-at(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Qs=1<<32-at(t)+s|n<<s|i,$s=r+e}else Qs=1<<r|n<<s|i,$s=e}function er(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function tr(e){for(;e===Vs;)Vs=Hs[--qs],Hs[qs]=null,Gs=Hs[--qs],Hs[qs]=null;for(;e===Xs;)Xs=Ks[--Ys],Ks[Ys]=null,$s=Ks[--Ys],Ks[Ys]=null,Qs=Ks[--Ys],Ks[Ys]=null}var nr=null,ir=null,sr=!1,rr=null;function ar(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ir=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ir=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Qs,overflow:$s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ir=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(sr){var t=ir;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=cs(n.nextSibling);var i=nr;t&&or(e,t)?ar(i,n):(e.flags=-4097&e.flags|2,sr=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,nr=e}}}function hr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!sr)return hr(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ir)){if(lr(e))throw dr(),Error(r(418));for(;t;)ar(e,t),t=cs(t.nextSibling)}if(hr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ir=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ir=null}}else ir=nr?cs(e.stateNode.nextSibling):null;return!0}function dr(){for(var e=ir;e;)e=cs(e.nextSibling)}function pr(){ir=nr=null,sr=!1}function fr(e){null===rr?rr=[e]:rr.push(e)}var gr=b.ReactCurrentBatchConfig;function mr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _r(e){return(0,e._init)(e._payload)}function yr(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Oc(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===C?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===P&&_r(r)===t.type)?((i=s(t,n.props)).ref=mr(e,t,n),i.return=e,i):((i=Lc(n.type,n.key,n.props,null,e.mode,i)).ref=mr(e,t,n),i.return=e,i)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,i,r){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=mr(e,null,t),n.return=e,n;case k:return(t=jc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function p(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,i):null;case k:return n.key===s?h(e,t,n,i):null;case P:return p(e,t,(s=n._init)(n._payload),i)}if(te(n)||D(n))return null!==s?null:u(e,t,n,i,null);vr(e,n)}return null}function f(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case k:return h(t,e=e.get(null===i.key?n:i.key)||null,i,s);case P:return f(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||D(i))return u(t,e=e.get(n)||null,i,s,null);vr(t,i)}return null}function g(s,r,o,l){for(var c=null,h=null,u=r,g=r=0,m=null;null!==u&&g<o.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var v=p(s,u,o[g],l);if(null===v){null===u&&(u=m);break}e&&u&&null===v.alternate&&t(s,u),r=a(v,r,g),null===h?c=v:h.sibling=v,h=v,u=m}if(g===o.length)return n(s,u),sr&&Js(s,g),c;if(null===u){for(;g<o.length;g++)null!==(u=d(s,o[g],l))&&(r=a(u,r,g),null===h?c=u:h.sibling=u,h=u);return sr&&Js(s,g),c}for(u=i(s,u);g<o.length;g++)null!==(m=f(u,s,g,o[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),r=a(m,r,g),null===h?c=m:h.sibling=m,h=m);return e&&u.forEach((function(e){return t(s,e)})),sr&&Js(s,g),c}function m(s,o,l,c){var h=D(l);if("function"!==typeof h)throw Error(r(150));if(null==(l=h.call(l)))throw Error(r(151));for(var u=h=null,g=o,m=o=0,v=null,_=l.next();null!==g&&!_.done;m++,_=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var y=p(s,g,_.value,c);if(null===y){null===g&&(g=v);break}e&&g&&null===y.alternate&&t(s,g),o=a(y,o,m),null===u?h=y:u.sibling=y,u=y,g=v}if(_.done)return n(s,g),sr&&Js(s,m),h;if(null===g){for(;!_.done;m++,_=l.next())null!==(_=d(s,_.value,c))&&(o=a(_,o,m),null===u?h=_:u.sibling=_,u=_);return sr&&Js(s,m),h}for(g=i(s,g);!_.done;m++,_=l.next())null!==(_=f(g,s,m,_.value,c))&&(e&&null!==_.alternate&&g.delete(null===_.key?m:_.key),o=a(_,o,m),null===u?h=_:u.sibling=_,u=_);return e&&g.forEach((function(e){return t(s,e)})),sr&&Js(s,m),h}return function e(i,r,a,l){if("object"===typeof a&&null!==a&&a.type===C&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,h=r;null!==h;){if(h.key===c){if((c=a.type)===C){if(7===h.tag){n(i,h.sibling),(r=s(h,a.props.children)).return=i,i=r;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&_r(c)===h.type){n(i,h.sibling),(r=s(h,a.props)).ref=mr(i,h,a),r.return=i,i=r;break e}n(i,h);break}t(i,h),h=h.sibling}a.type===C?((r=Dc(a.props.children,i.mode,l,a.key)).return=i,i=r):((l=Lc(a.type,a.key,a.props,null,i.mode,l)).ref=mr(i,r,a),l.return=i,i=l)}return o(i);case k:e:{for(h=a.key;null!==r;){if(r.key===h){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(i,r.sibling),(r=s(r,a.children||[])).return=i,i=r;break e}n(i,r);break}t(i,r),r=r.sibling}(r=jc(a,i.mode,l)).return=i,i=r}return o(i);case P:return e(i,r,(h=a._init)(a._payload),l)}if(te(a))return g(i,r,a,l);if(D(a))return m(i,r,a,l);vr(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,a)).return=i,i=r):(n(i,r),(r=Oc(a,i.mode,l)).return=i,i=r),o(i)):n(i,r)}}var br=yr(!0),wr=yr(!1),kr=xs(null),Cr=null,xr=null,Sr=null;function Ar(){Sr=xr=Cr=null}function Er(e){var t=kr.current;Ss(kr),e._currentValue=t}function Tr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Mr(e,t){Cr=e,Sr=xr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Ir(e){var t=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:t,next:null},null===xr){if(null===Cr)throw Error(r(308));xr=e,Cr.dependencies={lanes:0,firstContext:e}}else xr=xr.next=e;return t}var Rr=null;function Pr(e){null===Rr?Rr=[e]:Rr.push(e)}function Nr(e,t,n,i){var s=t.interleaved;return null===s?(n.next=n,Pr(t)):(n.next=s.next,s.next=n),t.interleaved=n,Lr(e,i)}function Lr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Dr=!1;function Fr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Or(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wr(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Tl)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Lr(e,n)}return null===(s=i.interleaved)?(t.next=t,Pr(i)):(t.next=s.next,s.next=t),i.interleaved=t,Lr(e,n)}function zr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Br(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ur(e,t,n,i){var s=e.updateQueue;Dr=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(a=0,h=c=l=null,o=r;;){var d=o.lane,p=o.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(d=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=g.payload)?f.call(p,u,d):f)||void 0===d)break e;u=O({},u,d);break e;case 2:Dr=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,l=u):h=h.next=p,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=u}}function Hr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(r(191,s));s.call(i)}}}var qr={},Vr=xs(qr),Gr=xs(qr),Kr=xs(qr);function Yr(e){if(e===qr)throw Error(r(174));return e}function Xr(e,t){switch(As(Kr,t),As(Gr,e),As(Vr,qr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Vr),As(Vr,t)}function Qr(){Ss(Vr),Ss(Gr),Ss(Kr)}function $r(e){Yr(Kr.current);var t=Yr(Vr.current),n=le(t,e.type);t!==n&&(As(Gr,e),As(Vr,n))}function Jr(e){Gr.current===e&&(Ss(Vr),Ss(Gr))}var Zr=xs(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=b.ReactCurrentDispatcher,sa=b.ReactCurrentBatchConfig,ra=0,aa=null,oa=null,la=null,ca=!1,ha=!1,ua=0,da=0;function pa(){throw Error(r(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ga(e,t,n,i,s,a){if(ra=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:Za,e=n(i,s),ha){a=0;do{if(ha=!1,ua=0,25<=a)throw Error(r(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,s)}while(ha)}if(ia.current=$a,t=null!==oa&&null!==oa.next,ra=0,la=oa=aa=null,ca=!1,t)throw Error(r(300));return e}function ma(){var e=0!==ua;return ua=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function _a(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ya(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=_a(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=oa,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,h=a;do{var u=h.lane;if((ra&u)===u)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,aa.lanes|=u,Fl|=u}h=h.next}while(null!==h&&h!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(yo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Fl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=_a(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);oi(a,t.memoizedState)||(yo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ka(){}function Ca(e,t){var n=aa,i=_a(),s=t(),a=!oi(i.memoizedState,s);if(a&&(i.memoizedState=s,yo=!0),i=i.queue,Da(Aa.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,i,s,t),void 0,null),null===Ml)throw Error(r(349));0!==(30&ra)||xa(n,t,s)}return s}function xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,i){t.value=n,t.getSnapshot=i,Ea(t)&&Ta(e)}function Aa(e,t,n){return n((function(){Ea(t)&&Ta(e)}))}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Ta(e){var t=Lr(e,1);null!==t&&nc(t,e,1,-1)}function Ma(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ra(){return _a().memoizedState}function Pa(e,t,n,i){var s=va();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===i?null:i)}function Na(e,t,n,i){var s=_a();i=void 0===i?null:i;var r=void 0;if(null!==oa){var a=oa.memoizedState;if(r=a.destroy,null!==i&&fa(i,a.deps))return void(s.memoizedState=Ia(t,n,r,i))}aa.flags|=e,s.memoizedState=Ia(1|t,n,r,i)}function La(e,t){return Pa(8390656,8,e,t)}function Da(e,t){return Na(2048,8,e,t)}function Fa(e,t){return Na(4,2,e,t)}function Oa(e,t){return Na(4,4,e,t)}function ja(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4,4,ja.bind(null,t,e),n)}function za(){}function Ba(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=_a();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&ra)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(oi(n,t)||(n=gt(),aa.lanes|=n,Fl|=n,e.baseState=!0),t)}function qa(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=sa.transition;sa.transition={};try{e(!1),t()}finally{yt=n,sa.transition=i}}function Va(){return _a().memoizedState}function Ga(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Nr(e,t,n,i))){nc(n,e,i,ec()),Qa(n,t,i)}}function Ka(e,t,n){var i=tc(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(s.next=s,Pr(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Nr(e,t,s,i))&&(nc(n,e,i,s=ec()),Qa(n,t,i))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){ha=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}var $a={readContext:Ir,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Ir,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ir,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ma,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ma(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,s=va();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Ml)throw Error(r(349));0!==(30&ra)||xa(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,La(Aa.bind(null,i,a,e),[e]),i.flags|=2048,Ia(9,Sa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Ml.identifierPrefix;if(sr){var n=$s;t=":"+t+"R"+(n=(Qs&~(1<<32-at(Qs)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ir,useCallback:Ba,useContext:Ir,useEffect:Da,useImperativeHandle:Wa,useInsertionEffect:Fa,useLayoutEffect:Oa,useMemo:Ua,useReducer:ba,useRef:Ra,useState:function(){return ba(ya)},useDebugValue:za,useDeferredValue:function(e){return Ha(_a(),oa.memoizedState,e)},useTransition:function(){return[ba(ya)[0],_a().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ca,useId:Va,unstable_isNewReconciler:!1},eo={readContext:Ir,useCallback:Ba,useContext:Ir,useEffect:Da,useImperativeHandle:Wa,useInsertionEffect:Fa,useLayoutEffect:Oa,useMemo:Ua,useReducer:wa,useRef:Ra,useState:function(){return wa(ya)},useDebugValue:za,useDeferredValue:function(e){var t=_a();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[wa(ya)[0],_a().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ca,useId:Va,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),s=tc(e),r=jr(i,s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Wr(e,r,s))&&(nc(t,e,s,i),zr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),s=tc(e),r=jr(i,s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Wr(e,r,s))&&(nc(t,e,s,i),zr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),s=jr(n,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Wr(e,s,i))&&(nc(t,e,i,n),zr(t,e,i))}};function so(e,t,n,i,s,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(s,r))}function ro(e,t,n){var i=!1,s=Es,r=t.contextType;return"object"===typeof r&&null!==r?r=Ir(r):(s=Ps(t)?Is:Ts.current,r=(i=null!==(i=t.contextTypes)&&void 0!==i)?Rs(e,s):Es),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Fr(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=Ir(r):(r=Ps(t)?Is:Ts.current,s.context=Rs(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),Ur(e,n,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=B(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var uo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=jr(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Vl=i),ho(0,t)},n}function fo(e,t,n){(n=jr(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){ho(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new uo;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jr(-1,1)).tag=2,Wr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var _o=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,i){t.child=null===e?wr(t,null,n,i):br(t,e.child,n,i)}function wo(e,t,n,i,s){n=n.render;var r=t.ref;return Mr(t,s),i=ga(e,t,n,i,r,s),n=ma(),null===e||yo?(sr&&n&&er(t),t.flags|=1,bo(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function ko(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||Pc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Co(e,t,r,i,s))}if(r=e.child,0===(e.lanes&s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return qo(e,t,s)}return t.flags|=1,(e=Nc(r,i)).ref=t.ref,e.return=t,t.child=e}function Co(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(li(r,i)&&e.ref===t.ref){if(yo=!1,t.pendingProps=i=r,0===(e.lanes&s))return t.lanes=e.lanes,qo(e,t,s);0!==(131072&e.flags)&&(yo=!0)}}return Ao(e,t,n,i,s)}function xo(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},As(Nl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,As(Nl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,As(Nl,Pl),Pl|=i}else null!==r?(i=r.baseLanes|n,t.memoizedState=null):i=n,As(Nl,Pl),Pl|=i;return bo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,i,s){var r=Ps(n)?Is:Ts.current;return r=Rs(t,r),Mr(t,s),n=ga(e,t,n,i,r,s),i=ma(),null===e||yo?(sr&&i&&er(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qo(e,t,s))}function Eo(e,t,n,i,s){if(Ps(n)){var r=!0;Fs(t)}else r=!1;if(Mr(t,s),null===t.stateNode)Ho(e,t),ro(t,n,i),oo(t,n,i,s),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ir(c):c=Rs(t,c=Ps(n)?Is:Ts.current);var h=n.getDerivedStateFromProps,u="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),Dr=!1;var d=t.memoizedState;a.state=d,Ur(t,i,a,s),l=t.memoizedState,o!==i||d!==l||Ms.current||Dr?("function"===typeof h&&(no(t,n,h,i),l=t.memoizedState),(o=Dr||so(t,n,o,i,d,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Or(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ir(l):l=Rs(t,l=Ps(n)?Is:Ts.current);var p=n.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||d!==l)&&ao(t,a,i,l),Dr=!1,d=t.memoizedState,a.state=d,Ur(t,i,a,s);var f=t.memoizedState;o!==u||d!==f||Ms.current||Dr?("function"===typeof p&&(no(t,n,p,i),f=t.memoizedState),(c=Dr||so(t,n,c,i,d,f,l)||!1)?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return To(e,t,n,i,r,s)}function To(e,t,n,i,s,r){So(e,t);var a=0!==(128&t.flags);if(!i&&!a)return s&&Os(t,n,!1),qo(e,t,r);i=t.stateNode,_o.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=br(t,e.child,null,r),t.child=br(t,null,o,r)):bo(e,t,o,r),t.memoizedState=i.state,s&&Os(t,n,!0),t.child}function Mo(e){var t=e.stateNode;t.pendingContext?Ls(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ls(0,t.context,!1),Xr(e,t.containerInfo)}function Io(e,t,n,i,s){return pr(),fr(s),t.flags|=256,bo(e,t,n,i),t.child}var Ro,Po,No,Lo,Do={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var i,s=t.pendingProps,a=Zr.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),As(Zr,1&a),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,s,0,null),e=Dc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Do,e):jo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Wo(e,t,o,i=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Fc({mode:"visible",children:i.children},s,0,null),(a=Dc(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&br(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Do,a);if(0===(1&t.mode))return Wo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Wo(e,t,o,i=co(a=Error(r(419)),i,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(i=Ml)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Lr(e,s),nc(i,e,s,-1))}return gc(),Wo(e,t,o,i=co(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ir=cs(s.nextSibling),nr=t,sr=!0,rr=null,null!==e&&(Ks[Ys++]=Qs,Ks[Ys++]=$s,Ks[Ys++]=Xs,Qs=e.id,$s=e.overflow,Xs=t),t=jo(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,n);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Nc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Nc(i,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,s}return e=(o=e.child).sibling,s=Nc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function jo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wo(e,t,n,i){return null!==i&&fr(i),br(t,e.child,null,n),(e=jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Tr(e.return,t,n)}function Bo(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Uo(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=Zr.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(As(Zr,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,r);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ko(e,t,n){var i=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ps(t.type)&&Ns(),Go(t),null;case 3:return i=t.stateNode,Qr(),Ss(Ms),Ss(Ts),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ac(rr),rr=null))),Po(e,t),Go(t),null;case 5:Jr(t);var s=Yr(Kr.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Go(t),null}if(e=Yr(Vr.current),ur(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[ds]=t,i[ps]=a,e=0!==(1&t.mode),n){case"dialog":Wi("cancel",i),Wi("close",i);break;case"iframe":case"object":case"embed":Wi("load",i);break;case"video":case"audio":for(s=0;s<Di.length;s++)Wi(Di[s],i);break;case"source":Wi("error",i);break;case"img":case"image":case"link":Wi("error",i),Wi("load",i);break;case"details":Wi("toggle",i);break;case"input":Q(i,a),Wi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Wi("invalid",i);break;case"textarea":se(i,a),Wi("invalid",i)}for(var l in _e(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),s=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Wi("scroll",i)}switch(n){case"input":G(i),Z(i,a,!0);break;case"textarea":G(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Zi)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[ds]=t,e[ps]=i,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Wi("cancel",e),Wi("close",e),s=i;break;case"iframe":case"object":case"embed":Wi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Di.length;s++)Wi(Di[s],e);s=i;break;case"source":Wi("error",e),s=i;break;case"img":case"image":case"link":Wi("error",e),Wi("load",e),s=i;break;case"details":Wi("toggle",e),s=i;break;case"input":Q(e,i),s=X(e,i),Wi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=O({},i,{value:void 0}),Wi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Wi("invalid",e)}for(a in _e(n,s),c=s)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?me(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ue(e,h):"children"===a?"string"===typeof h?("textarea"!==n||""!==h)&&de(e,h):"number"===typeof h&&de(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Wi("scroll",e):null!=h&&y(e,a,h,l))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+q(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(n=Yr(Kr.current),Yr(Vr.current),ur(t)){if(i=t.stateNode,n=t.memoizedProps,i[ds]=t,(a=i.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ds]=t,t.stateNode=i}return Go(t),null;case 13:if(Ss(Zr),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==ir&&0!==(1&t.mode)&&0===(128&t.flags))dr(),pr(),t.flags|=98560,a=!1;else if(a=ur(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[ds]=t}else pr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==rr&&(ac(rr),rr=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Qr(),Po(e,t),null===e&&Ui(t.stateNode.containerInfo),Go(t),null;case 10:return Er(t.type._context),Go(t),null;case 19:if(Ss(Zr),null===(a=t.memoizedState))return Go(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Vo(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Vo(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return As(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Ul&&(t.flags|=128,i=!0,Vo(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!sr)return Go(t),null}else 2*$e()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,i=!0,Vo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zr.current,As(Zr,i?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return uc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Yo(e,t){switch(tr(t),t.tag){case 1:return Ps(t.type)&&Ns(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qr(),Ss(Ms),Ss(Ts),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jr(t),null;case 13:if(Ss(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));pr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zr),null;case 4:return Qr(),null;case 10:return Er(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},No=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Yr(Vr.current);var r,a=null;switch(n){case"input":s=X(e,s),i=X(e,i),a=[];break;case"select":s=O({},s,{value:void 0}),i=O({},i,{value:void 0}),a=[];break;case"textarea":s=ie(e,s),i=ie(e,i),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(h in _e(n,i),n=null,s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var l=s[h];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(o.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=s?s[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(o.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Wi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Lo=function(e,t,n,i){n!==i&&(t.flags|=4)};var Xo=!1,Qo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){xc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){xc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&el(t,n,r)}s=s.next}while(s!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[ps],delete t[gs],delete t[ms],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var i=hl,s=ul;hl=null,dl(e,t,n),ul=s,null!==(hl=i)&&(ul?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(ul?(e=hl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ut(e)):ls(hl,n.stateNode));break;case 4:i=hl,s=ul,hl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),hl=i,ul=s;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&el(n,t,a),s=s.next}while(s!==i)}dl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){xc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,dl(e,t,n),Qo=i):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach((function(t){var i=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,ul=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===hl)throw Error(r(160));pl(a,o,s),hl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(h){xc(s,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){xc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),vl(e),512&i&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(m){xc(e,e.return,m)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(s,a),ye(l,o);var h=ye(l,a);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];"style"===u?me(s,d):"dangerouslySetInnerHTML"===u?ue(s,d):"children"===u?de(s,d):y(s,u,d,h)}switch(l){case"input":J(s,a);break;case"textarea":re(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(m){xc(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){xc(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=$e())),4&i&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(h=Qo)||u,gl(t,e),Qo=h):gl(t,e),vl(e),8192&i){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!u&&0!==(1&e.mode))for(Jo=e,u=e.child;null!==u;){for(d=Jo=u;null!==Jo;){switch(f=(p=Jo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){i=p,n=p.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){xc(i,n,m)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Jo=f):wl(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{s=d.stateNode,h?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){xc(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(de(s,""),i.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(r(161))}}catch(o){xc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Jo=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var s=Jo,r=s.child;if(22===s.tag&&i){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Xo;var c=Qo;if(Xo=a,(Qo=l)&&!c)for(Jo=s;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?kl(s):null!==l?(l.return=a,Jo=l):kl(s);for(;null!==r;)Jo=r,yl(r,t,n),r=r.sibling;Jo=s,Xo=o,Qo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Jo=r):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qo)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hr(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hr(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(r(163))}Qo||512&t.flags&&sl(t)}catch(p){xc(t,t.return,p)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function kl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){xc(t,s,l)}}var r=t.return;try{sl(t)}catch(l){xc(t,r,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Cl,xl=Math.ceil,Sl=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Tl=0,Ml=null,Il=null,Rl=0,Pl=0,Nl=xs(0),Ll=0,Dl=null,Fl=0,Ol=0,jl=0,Wl=null,zl=null,Bl=0,Ul=1/0,Hl=null,ql=!1,Vl=null,Gl=null,Kl=!1,Yl=null,Xl=0,Ql=0,$l=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Tl)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==gr.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,i){if(50<Ql)throw Ql=0,$l=null,Error(r(185));vt(e,n,i),0!==(2&Tl)&&e===Ml||(e===Ml&&(0===(2&Tl)&&(Ol|=n),4===Ll&&oc(e,Rl)),ic(e,i),1===n&&0===Tl&&0===(1&t.mode)&&(Ul=$e()+500,Ws&&Us()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var a=31-at(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var i=dt(e,e===Ml?Rl:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ws=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),as((function(){0===(6&Tl)&&Us()})),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Mc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&Tl))throw Error(r(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=dt(e,e===Ml?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var s=Tl;Tl|=2;var a=fc();for(Ml===e&&Rl===t||(Hl=null,Ul=$e()+500,dc(e,t));;)try{_c();break}catch(l){pc(e,l)}Ar(),Sl.current=a,Tl=s,null!==Il?t=0:(Ml=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(i=s,t=rc(e,s))),1===t)throw n=Dl,dc(e,0),oc(e,i),ic(e,$e()),n;if(6===t)oc(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!oi(r(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,i))&&(0!==(a=ft(e))&&(i=a,t=rc(e,a))),1===t))throw n=Dl,dc(e,0),oc(e,i),ic(e,$e()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,zl,Hl);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(wc.bind(null,e,zl,Hl),t);break}wc(e,zl,Hl);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xl(i/1960))-i)){e.timeoutHandle=is(wc.bind(null,e,zl,Hl),i);break}wc(e,zl,Hl);break;default:throw Error(r(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function rc(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~jl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Tl))throw Error(r(327));kc();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=rc(e,i))}if(1===n)throw n=Dl,dc(e,0),oc(e,t),ic(e,$e()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Hl),ic(e,$e()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Ul=$e()+500,Ws&&Us())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&kc();var t=Tl;Tl|=1;var n=El.transition,i=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=i,El.transition=n,0===(6&(Tl=t))&&Us()}}function uc(){Pl=Nl.current,Ss(Nl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var i=n;switch(tr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ns();break;case 3:Qr(),Ss(Ms),Ss(Ts),na();break;case 5:Jr(i);break;case 4:Qr();break;case 13:case 19:Ss(Zr);break;case 10:Er(i.type._context);break;case 22:case 23:uc()}n=n.return}if(Ml=e,Il=e=Nc(e.current,null),Rl=Pl=t,Ll=0,Dl=null,jl=Ol=Fl=0,zl=Wl=null,null!==Rr){for(t=0;t<Rr.length;t++)if(null!==(i=(n=Rr[t]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var a=r.next;r.next=s,i.next=a}n.pending=i}Rr=null}return e}function pc(e,t){for(;;){var n=Il;try{if(Ar(),ia.current=$a,ca){for(var i=aa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(ra=0,la=oa=aa=null,ha=!1,ua=0,Al.current=null,null===n||null===n.return){Ll=1,Dl=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,u=l,d=u.tag;if(0===(1&u.mode)&&(0===d||11===d||15===d)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,vo(f,o,l,0,t),1&f.mode&&go(a,h,t),c=h;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,h,t),gc();break e}c=Error(r(426))}else if(sr&&1&l.mode){var v=mo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),fr(lo(c,l));break e}}a=c=lo(c,l),4!==Ll&&(Ll=2),null===Wl?Wl=[a]:Wl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Br(a,po(0,c,t));break e;case 1:l=c;var _=a.type,y=a.stateNode;if(0===(128&a.flags)&&("function"===typeof _.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t,Br(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=$a,null===e?$a:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Ml||0===(268435455&Fl)&&0===(268435455&Ol)||oc(Ml,Rl)}function mc(e,t){var n=Tl;Tl|=2;var i=fc();for(Ml===e&&Rl===t||(Hl=null,dc(e,t));;)try{vc();break}catch(s){pc(e,s)}if(Ar(),Tl=n,Sl.current=i,null!==Il)throw Error(r(261));return Ml=null,Rl=0,Ll}function vc(){for(;null!==Il;)yc(Il)}function _c(){for(;null!==Il&&!Xe();)yc(Il)}function yc(e){var t=Cl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Pl)))return void(Il=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ll=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var i=yt,s=El.transition;try{El.transition=null,yt=1,function(e,t,n,i){do{kc()}while(null!==Yl);if(0!==(6&Tl))throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}(e,a),e===Ml&&(Il=Ml=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Mc(tt,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=El.transition,El.transition=null;var o=yt;yt=1;var l=Tl;Tl|=4,Al.current=null,function(e,t){if(es=qt,pi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,h=0,u=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++h===s&&(l=o),p===a&&++u===i&&(c=o),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,_=t.stateNode,y=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(r(163))}}catch(w){xc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}g=tl,tl=!1}(e,n),ml(n,e),fi(ts),qt=!!es,ts=es=null,e.current=n,_l(n,e,s),Qe(),Tl=l,yt=o,El.transition=a}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Xl=s),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===$l?Ql++:(Ql=0,$l=e):Ql=0,Us()}(e,t,n,i)}finally{El.transition=s,yt=i}return null}function kc(){if(null!==Yl){var e=bt(Xl),t=El.transition,n=yt;try{if(El.transition=null,yt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Tl))throw Error(r(331));var s=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(Jo=h;null!==Jo;){var u=Jo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var d=u.child;if(null!==d)d.return=u,Jo=d;else for(;null!==Jo;){var p=(u=Jo).sibling,f=u.return;if(rl(u),u===h){Jo=null;break}if(null!==p){p.return=f,Jo=p;break}Jo=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,Jo=_;break e}Jo=a.return}}var y=e.current;for(Jo=y;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=y;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){xc(l,l.return,k)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Tl=s,Us(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(k){}i=!0}return i}finally{yt=n,El.transition=t}}return!1}function Cc(e,t,n){e=Wr(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function xc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){t=Wr(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>$e()-Bl?dc(e,0):jl|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var n=ec();null!==(e=Lr(e,t))&&(vt(e,t,n),ic(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Ac(e,n)}function Mc(e,t){return Ke(e,t)}function Ic(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,i){return new Ic(e,t,n,i)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,i,s,a){var o=2;if(i=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case C:return Dc(n.children,s,a,t);case x:o=8,s|=8;break;case S:return(e=Rc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case M:return(e=Rc(13,n,t,s)).elementType=M,e.lanes=a,e;case I:return(e=Rc(19,n,t,s)).elementType=I,e.lanes=a,e;case N:return Fc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case E:o=9;break e;case T:o=11;break e;case R:o=14;break e;case P:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Dc(e,t,n,i){return(e=Rc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Rc(22,e,i,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,i,s,r,a,o,l){return e=new Wc(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Rc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fr(r),e}function Bc(e){if(!e)return Es;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Ds(e,n,t)}return t}function Uc(e,t,n,i,s,r,a,o,l){return(e=zc(n,i,!0,e,0,r,0,o,l)).context=Bc(null),n=e.current,(r=jr(i=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Wr(n,r,s),e.current.lanes=s,vt(e,s,i),ic(e,i),e}function Hc(e,t,n,i){var s=t.current,r=ec(),a=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=jr(r,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Wr(s,t,a))&&(nc(e,s,a,r),zr(e,s,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ms.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Mo(t),pr();break;case 5:$r(t);break;case 1:Ps(t.type)&&Fs(t);break;case 4:Xr(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;As(kr,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(As(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(As(Zr,1&Zr.current),null!==(e=qo(e,t,n))?e.sibling:null);As(Zr,1&Zr.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Uo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),As(Zr,Zr.current),i)break;return null;case 22:case 23:return t.lanes=0,xo(e,t,n)}return qo(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,sr&&0!==(1048576&t.flags)&&Zs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ho(e,t),e=t.pendingProps;var s=Rs(t,Ts.current);Mr(t,n),s=ga(null,t,i,e,s,n);var a=ma();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(i)?(a=!0,Fs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Fr(t),s.updater=io,t.stateNode=s,s._reactInternals=t,oo(t,i,e,n),t=To(null,t,i,!0,a,n)):(t.tag=0,sr&&a&&er(t),bo(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(i),e=to(i,e),s){case 0:t=Ao(null,t,i,e,n);break e;case 1:t=Eo(null,t,i,e,n);break e;case 11:t=wo(null,t,i,e,n);break e;case 14:t=ko(null,t,i,to(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,Ao(e,t,i,s=t.elementType===i?s:to(i,s),n);case 1:return i=t.type,s=t.pendingProps,Eo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 3:e:{if(Mo(t),null===e)throw Error(r(387));i=t.pendingProps,s=(a=t.memoizedState).element,Or(e,t),Ur(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,i,n,s=lo(Error(r(423)),t));break e}if(i!==s){t=Io(e,t,i,n,s=lo(Error(r(424)),t));break e}for(ir=cs(t.stateNode.containerInfo.firstChild),nr=t,sr=!0,rr=null,n=wr(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pr(),i===s){t=qo(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return $r(t),null===e&&cr(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(i,s)?o=null:null!==a&&ns(i,a)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Oo(e,t,n);case 4:return Xr(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=br(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,wo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,As(kr,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===s.children&&!Ms.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=jr(-1,n&-n)).tag=2;var h=a.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Tr(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Tr(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Mr(t,n),i=i(s=Ir(s)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return s=to(i=t.type,t.pendingProps),ko(e,t,i,s=to(i.type,s),n);case 15:return Co(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:to(i,s),Ho(e,t),t.tag=1,Ps(i)?(e=!0,Fs(t)):e=!1,Mr(t,n),ro(t,i,s),oo(t,i,s,n),To(null,t,i,!0,e,n);case 19:return Uo(e,t,n);case 22:return xo(e,t,n)}throw Error(r(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,i,s){var r=n._reactRootContainer;if(r){var a=r;if("function"===typeof s){var o=s;s=function(){var e=qc(a);o.call(e)}}Hc(t,a,e,s)}else a=function(e,t,n,i,s){if(s){if("function"===typeof i){var r=i;i=function(){var e=qc(a);r.call(e)}}var a=Uc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[fs]=a.current,Ui(8===e.nodeType?e.parentNode:e),hc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var o=i;i=function(){var e=qc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fs]=l.current,Ui(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,i)})),l}(n,t,e,s,i);return qc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[fs]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(_t(t,1|n),ic(t,$e()),0===(6&Tl)&&(Ul=$e()+500,Us()))}break;case 13:hc((function(){var t=Lr(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},kt=function(e){if(13===e.tag){var t=Lr(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=Lr(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},xt=function(){return yt},St=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=ws(i);if(!s)throw Error(r(90));K(i),J(i,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Me=hc;var eh={usingClientEntryPoint:!1,Events:[ys,bs,ws,Ae,Ee,cc]},th={findFiberByHostInstance:_s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nh={bundleType:th.bundleType,version:th.version,rendererPackageName:th.rendererPackageName,rendererConfig:th.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:th.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{st=ih.inject(nh),rt=ih}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eh,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(r(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(r(299));var n=!1,i="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,i,s),e[fs]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(r(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,Ui(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(r(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(r(40));return!!e._reactRootContainer&&(hc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fs]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!$c(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var i=n(43),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,r={},c=null,h=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:s,type:e,key:c,ref:h,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function _(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=v.prototype;var b=y.prototype=new _;b.constructor=y,g(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,C={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,i){var s,r={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!x.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:r,_owner:C.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,s,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===r?"."+T(l,0):r,w(a)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),M(a,t,s,"",(function(e){return e}))):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=""===r?".":r+":",w(e))for(var c=0;c<e.length;c++){var h=r+T(o=e[c],c);l+=M(o,t,s,h,a)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(o=e.next()).done;)l+=M(o=o.value,t,s,h=r+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var i=[],s=0;return M(e,i,"","",(function(e){return t.call(n,e,s++)})),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},N={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:N,ReactCurrentOwner:C};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=y,t.StrictMode=r,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),r=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=C.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!x.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,h=e[c];if(0>r(l,n))c<s&&0>r(h,l)?(e[i]=h,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>r(h,n)))break e;e[i]=h,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(h);null!==t;){if(null===t.callback)s(h);else{if(!(t.startTime<=e))break;s(h),t.sortIndex=t.expirationTime,n(c,t)}t=i(h)}}function w(e){if(m=!1,b(e),!g)if(null!==i(c))g=!0,N(k);else{var t=i(h);null!==t&&L(w,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,_(A),A=-1),f=!0;var r=p;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!M());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&s(c),b(n)}else s(c);d=i(c)}if(null!==d)var l=!0;else{var u=i(h);null!==u&&L(w,u.startTime-n),l=!1}return l}finally{d=null,p=r,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,x=!1,S=null,A=-1,E=5,T=-1;function M(){return!(t.unstable_now()-T<E)}function I(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?C():(x=!1,S=null)}}else x=!1}if("function"===typeof y)C=function(){y(I)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=I,C=function(){P.postMessage(null)}}else C=function(){v(I,0)};function N(e){S=e,x||(x=!0,C())}function L(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,N(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(h,e),null===i(c)&&e===i(h)&&(m?(_(A),A=-1):m=!0,L(w,r-a))):(e.sortIndex=o,n(c,e),g||f||(g=!0,N(k))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},749:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/pdf.worker.min.f454122d08e678f30b39.mjs"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,n.d(r,a),r}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".5ae7df43.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="ys_portfolio:";n.l=(i,s,r,a)=>{if(e[i])e[i].push(s);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[s];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/portfolio/build/",(()=>{n.b=document.baseURI||self.location.href;var e={792:0};n.f.j=(t,i)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((n,i)=>s=e[t]=[n,i]));i.push(s[2]=r);var a=n.p+n.u(t),o=new Error;n.l(a,(i=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,s[1](o)}}),"chunk-"+t,t)}};var t=(t,i)=>{var s,r,a=i[0],o=i[1],l=i[2],c=0;if(a.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(i);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunkys_portfolio=self.webpackChunkys_portfolio||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e,t=n(43),i=n.t(t,2),s=n(391);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,n,i){return void 0===n&&(n=null),r({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?u(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function u(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function d(t,n,i,s){void 0===s&&(s={});let{window:u=document.defaultView,v5Compat:d=!1}=s,p=u.history,f=e.Pop,g=null,m=v();function v(){return(p.state||{idx:null}).idx}function _(){f=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:f,location:b.location,delta:n})}function y(e){let t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,p.replaceState(r({},p.state,{idx:m}),""));let b={get action(){return f},get location(){return t(u,p)},listen(e){if(g)throw new Error("A history only accepts one active listener");return u.addEventListener(a,_),g=e,()=>{u.removeEventListener(a,_),g=null}},createHref:e=>n(u,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let s=c(b.location,t,n);i&&i(s,t),m=v()+1;let r=l(s,m),a=b.createHref(s);try{p.pushState(r,"",a)}catch(xi){if(xi instanceof DOMException&&"DataCloneError"===xi.name)throw xi;u.location.assign(a)}d&&g&&g({action:f,location:b.location,delta:1})},replace:function(t,n){f=e.Replace;let s=c(b.location,t,n);i&&i(s,t),m=v();let r=l(s,m),a=b.createHref(s);p.replaceState(r,"",a),d&&g&&g({action:f,location:b.location,delta:0})},go:e=>p.go(e)};return b}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function g(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function m(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function v(e,t){let n=m(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function _(e,t,n,i){let s;void 0===i&&(i=!1),"string"===typeof e?s=u(e):(s=r({},e),o(!s.pathname||!s.pathname.includes("?"),g("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),g("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),g("#","search","hash",s)));let a,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)a=n;else{let e=t.length-1;if(!i&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let h=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:s=""}="string"===typeof e?u(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:b(i),hash:w(s)}}(s,a),d=c&&"/"!==c&&c.endsWith("/"),p=(l||"."===c)&&n.endsWith("/");return h.pathname.endsWith("/")||!d&&!p||(h.pathname+="/"),h}const y=e=>e.join("/").replace(/\/\/+/g,"/"),b=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",w=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const k=["post","put","patch","delete"],C=(new Set(k),["get",...k]);new Set(C),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x.apply(this,arguments)}const S=t.createContext(null);const A=t.createContext(null);const E=t.createContext(null);const T=t.createContext({outlet:null,matches:[],isDataRoute:!1});function M(){return null!=t.useContext(E)}function I(){return M()||o(!1),t.useContext(E).location}function R(e){t.useContext(A).static||t.useLayoutEffect(e)}function P(){let{isDataRoute:e}=t.useContext(T);return e?function(){let{router:e}=F(L.UseNavigateStable),n=O(D.UseNavigateStable),i=t.useRef(!1);return R((()=>{i.current=!0})),t.useCallback((function(t,s){void 0===s&&(s={}),i.current&&("number"===typeof t?e.navigate(t):e.navigate(t,x({fromRouteId:n},s)))}),[e,n])}():function(){M()||o(!1);let e=t.useContext(S),{basename:n,future:i,navigator:s}=t.useContext(A),{matches:r}=t.useContext(T),{pathname:a}=I(),l=JSON.stringify(v(r,i.v7_relativeSplatPath)),c=t.useRef(!1);return R((()=>{c.current=!0})),t.useCallback((function(t,i){if(void 0===i&&(i={}),!c.current)return;if("number"===typeof t)return void s.go(t);let r=_(t,JSON.parse(l),a,"path"===i.relative);null==e&&"/"!==n&&(r.pathname="/"===r.pathname?n:y([n,r.pathname])),(i.replace?s.replace:s.push)(r,i.state,i)}),[n,s,l,a,e])}()}function N(e,n){let{relative:i}=void 0===n?{}:n,{future:s}=t.useContext(A),{matches:r}=t.useContext(T),{pathname:a}=I(),o=JSON.stringify(v(r,s.v7_relativeSplatPath));return t.useMemo((()=>_(e,JSON.parse(o),a,"path"===i)),[e,o,a,i])}t.Component;var L=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(L||{}),D=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(D||{});function F(e){let n=t.useContext(S);return n||o(!1),n}function O(e){let n=function(e){let n=t.useContext(T);return n||o(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||o(!1),i.route.id}i.startTransition;function j(n){let{basename:i="/",children:s=null,location:r,navigationType:a=e.Pop,navigator:l,static:c=!1,future:h}=n;M()&&o(!1);let d=i.replace(/^\/*/,"/"),p=t.useMemo((()=>({basename:d,navigator:l,static:c,future:x({v7_relativeSplatPath:!1},h)})),[d,h,l,c]);"string"===typeof r&&(r=u(r));let{pathname:g="/",search:m="",hash:v="",state:_=null,key:y="default"}=r,b=t.useMemo((()=>{let e=f(g,d);return null==e?null:{location:{pathname:e,search:m,hash:v,state:_,key:y},navigationType:a}}),[d,g,m,v,_,y,a]);return null==b?null:t.createElement(A.Provider,{value:p},t.createElement(E.Provider,{children:s,value:b}))}new Promise((()=>{}));t.Component;var W=n(950),z=n.t(W,2);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},B.apply(this,arguments)}function U(e,t){if(null==e)return{};var n,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const H=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch($C){}new Map;const q=i.startTransition;z.flushSync,i.useId;function V(e){let{basename:n,children:i,future:s,window:r}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),d((function(e,t){let{pathname:n,search:i,hash:s}=e.location;return c("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,o)));let l=a.current,[u,p]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=s||{},g=t.useCallback((e=>{f&&q?q((()=>p(e))):p(e)}),[p,f]);return t.useLayoutEffect((()=>l.listen(g)),[l,g]),t.createElement(j,{basename:n,children:i,location:u.location,navigationType:u.action,navigator:l,future:s})}const G="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,K=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=t.forwardRef((function(e,n){let i,{onClick:s,relative:r,reloadDocument:a,replace:l,state:c,target:u,to:d,preventScrollReset:p,unstable_viewTransition:g}=e,m=U(e,H),{basename:v}=t.useContext(A),_=!1;if("string"===typeof d&&K.test(d)&&(i=d,G))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=f(t.pathname,v);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:_=!0}catch($C){}let b=function(e,n){let{relative:i}=void 0===n?{}:n;M()||o(!1);let{basename:s,navigator:r}=t.useContext(A),{hash:a,pathname:l,search:c}=N(e,{relative:i}),h=l;return"/"!==s&&(h="/"===l?s:y([s,l])),r.createHref({pathname:h,search:c,hash:a})}(d,{relative:r}),w=function(e,n){let{target:i,replace:s,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,c=P(),u=I(),d=N(e,{relative:o});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let n=void 0!==s?s:h(u)===h(d);c(e,{replace:n,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[u,c,d,s,r,i,e,a,o,l])}(d,{replace:l,state:c,target:u,preventScrollReset:p,relative:r,unstable_viewTransition:g});return t.createElement("a",B({},m,{href:i||b,onClick:_||a?s:function(e){s&&s(e),e.defaultPrevented||w(e)},ref:n,target:u}))}));var X,Q;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(X||(X={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Q||(Q={}));var $=n(725),J=n.n($),Z=/[A-Z]/g,ee=/^ms-/,te={};function ne(e){return"-"+e.toLowerCase()}const ie=function(e){if(te.hasOwnProperty(e))return te[e];var t=e.replace(Z,ne);return te[e]=ee.test(t)?"-"+t:t};function se(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),i=Object.keys(t),s=n.length;if(i.length!==s)return!1;for(let r=0;r<s;r++){const i=n[r];if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1}return!0}var re=n(173),ae=n.n(re);const oe=ae().oneOfType([ae().string,ae().number]),le={all:ae().bool,grid:ae().bool,aural:ae().bool,braille:ae().bool,handheld:ae().bool,print:ae().bool,projection:ae().bool,screen:ae().bool,tty:ae().bool,tv:ae().bool,embossed:ae().bool},ce={orientation:ae().oneOf(["portrait","landscape"]),scan:ae().oneOf(["progressive","interlace"]),aspectRatio:ae().string,deviceAspectRatio:ae().string,height:oe,deviceHeight:oe,width:oe,deviceWidth:oe,color:ae().bool,colorIndex:ae().bool,monochrome:ae().bool,resolution:oe,type:Object.keys(le)},{type:he,...ue}=ce,de={minAspectRatio:ae().string,maxAspectRatio:ae().string,minDeviceAspectRatio:ae().string,maxDeviceAspectRatio:ae().string,minHeight:oe,maxHeight:oe,minDeviceHeight:oe,maxDeviceHeight:oe,minWidth:oe,maxWidth:oe,minDeviceWidth:oe,maxDeviceWidth:oe,minColor:ae().number,maxColor:ae().number,minColorIndex:ae().number,maxColorIndex:ae().number,minMonochrome:ae().number,maxMonochrome:ae().number,minResolution:oe,maxResolution:oe,...ue};var pe={all:{...le,...de},types:le,matchers:ce,features:de};const fe=e=>{const t=[];return Object.keys(pe.all).forEach((n=>{const i=e[n];null!=i&&t.push(((e,t)=>{const n=ie(e);return"number"===typeof t&&(t="".concat(t,"px")),!0===t?n:!1===t?"not ".concat(n):"(".concat(n,": ").concat(t,")")})(n,i))})),t.join(" and ")},ge=(0,t.createContext)(void 0),me=e=>{if(!e)return;return Object.keys(e).reduce(((t,n)=>(t[ie(n)]=e[n],t)),{})},ve=()=>{const e=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{e.current=!0}),[]),e.current},_e=e=>{const n=()=>(e=>e.query||fe(e))(e),[i,s]=(0,t.useState)(n);return(0,t.useEffect)((()=>{const e=n();i!==e&&s(e)}),[e]),i},ye=(e,n,i)=>{const s=(e=>{const n=(0,t.useContext)(ge),i=()=>me(e)||me(n),[s,r]=(0,t.useState)(i);return(0,t.useEffect)((()=>{const e=i();se(s,e)||r(e)}),[e,n]),s})(n),r=_e(e);if(!r)throw new Error("Invalid or missing MediaQuery!");const a=((e,n)=>{const i=()=>J()(e,n||{},!!n),[s,r]=(0,t.useState)(i),a=ve();return(0,t.useEffect)((()=>{if(a){const e=i();return r(e),()=>{e&&e.dispose()}}}),[e,n]),s})(r,s),o=(e=>{const[n,i]=(0,t.useState)(e.matches);return(0,t.useEffect)((()=>{const t=e=>{i(e.matches)};return e.addListener(t),i(e.matches),()=>{e.removeListener(t)}}),[e]),n})(a),l=ve();return(0,t.useEffect)((()=>{l&&i&&i(o)}),[o]),(0,t.useEffect)((()=>()=>{a&&a.dispose()}),[]),o},be=!1,we=!1,ke="${JSCORE_VERSION}",Ce=function(e,t){if(!e)throw xe(t)},xe=function(e){return new Error("Firebase Database ("+ke+") INTERNAL ASSERT FAILED: "+e)},Se=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const t=e[s],r=s+1<e.length,a=r?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,h=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,d=63&l;o||(d=64,r||(u=64)),i.push(n[c],n[h],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Se(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],r=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==r||null==a||null==o)throw new Ee;const l=t<<2|r>>4;if(i.push(l),64!==a){const e=r<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function(e){const t=Se(e);return Ae.encodeByteArray(t,!0)},Me=function(e){return Te(e).replace(/\./g,"")},Ie=function(e){try{return Ae.decodeString(e,!0)}catch($C){console.error("base64Decode failed: ",$C)}return null};function Re(e){return Pe(void 0,e)}function Pe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Pe(e[n],t[n]));return e}const Ne=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Le=()=>{try{return Ne()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/portfolio/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch($C){return}const t=e&&Ie(e[1]);return t&&JSON.parse(t)})()}catch($C){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat($C))}},De=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Le())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},Fe=()=>{var e;return null===(e=Le())||void 0===e?void 0:e.config};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function je(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(r)),""].join(".")}function We(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Be(){return!0===be||!0===we}class Ue extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],s=i?function(e,t){return e.replace(qe,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",r="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new Ue(n,r,t)}}const qe=/\{\$([^}]+)}/g;function Ve(e){return JSON.parse(e)}function Ge(e){return JSON.stringify(e)}const Ke=function(e){let t={},n={},i={},s="";try{const r=e.split(".");t=Ve(Ie(r[0])||""),n=Ve(Ie(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch($C){}return{header:t,claims:n,data:i,signature:s}};function Ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xe(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Qe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $e(e,t,n){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}function Je(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(Ze(n)&&Ze(r)){if(!Je(n,r))return!1}else if(n!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ze(e){return null!==e&&"object"===typeof e}class et{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let h=0;h<16;h++)n[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)n[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const e=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=4294967295&(e<<1|e>>>31)}let i,s,r=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(i=l^a&(o^l),s=1518500249):(i=a^o^l,s=1859775393):h<60?(i=a&o|l&(a|o),s=2400959708):(i=a^o^l,s=3395469782);const e=(r<<5|r>>>27)+i+c+s+n[h]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=r,r=e}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const s=this.buf_;let r=this.inbuf_;for(;i<t;){if(0===r)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(s[r]=e.charCodeAt(i),++r,++i,r===this.blockSize){this.compress_(s),r=0;break}}else for(;i<t;)if(s[r]=e[i],++r,++i,r===this.blockSize){this.compress_(s),r=0;break}}this.inbuf_=r,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function tt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const nt=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function it(e){return e&&e._delegate?e._delegate:e}class st{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const rt="[DEFAULT]";class at{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Oe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch($C){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch($C){if(i)return null;throw $C}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:rt})}catch($C){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch($C){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&r.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===rt?void 0:s),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(r){}var s;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt;return this.component?this.component.multipleInstances?e:rt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ot{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new at(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const lt=[];var ct;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ct||(ct={}));const ht={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},ut=ct.INFO,dt={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},pt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=dt[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,r=new Array(s>2?s-2:0),a=2;a<s;a++)r[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...r)};class ft{constructor(e){this.name=e,this._logLevel=ut,this._logHandler=pt,this._userLogHandler=null,lt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ht[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const gt=(e,t)=>t.some((t=>e instanceof t));let mt,vt;const _t=new WeakMap,yt=new WeakMap,bt=new WeakMap,wt=new WeakMap,kt=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return At(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vt||(vt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(Et(this),n),At(_t.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return At(e.apply(Et(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];const r=e.call(Et(this),t,...i);return bt.set(r,t.sort?t.sort():[t]),At(r)}}function St(e){return"function"===typeof e?xt(e):(e instanceof IDBTransaction&&function(e){if(yt.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));yt.set(e,t)}(e),gt(e,mt||(mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ct):e)}function At(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(At(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&_t.set(t,e)})).catch((()=>{})),kt.set(t,e),t}(e);if(wt.has(e))return wt.get(e);const t=St(e);return t!==e&&(wt.set(e,t),kt.set(t,e)),t}const Et=e=>kt.get(e);const Tt=["get","getKey","getAll","getAllKeys","count"],Mt=["put","add","delete","clear"],It=new Map;function Rt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(It.get(t))return It.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=Mt.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Tt.includes(n))return;const r=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let r=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(r=r.index(o.shift())),(await Promise.all([r[n](...o),s&&t.done]))[0]};return It.set(t,r),r}Ct=(e=>({...e,get:(t,n,i)=>Rt(t,n)||e.get(t,n,i),has:(t,n)=>!!Rt(t,n)||e.has(t,n)}))(Ct);class Pt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Nt="@firebase/app",Lt="0.10.5",Dt=new ft("@firebase/app"),Ft="@firebase/app-compat",Ot="@firebase/analytics-compat",jt="@firebase/analytics",Wt="@firebase/app-check-compat",zt="@firebase/app-check",Bt="@firebase/auth",Ut="@firebase/auth-compat",Ht="@firebase/database",qt="@firebase/database-compat",Vt="@firebase/functions",Gt="@firebase/functions-compat",Kt="@firebase/installations",Yt="@firebase/installations-compat",Xt="@firebase/messaging",Qt="@firebase/messaging-compat",$t="@firebase/performance",Jt="@firebase/performance-compat",Zt="@firebase/remote-config",en="@firebase/remote-config-compat",tn="@firebase/storage",nn="@firebase/storage-compat",sn="@firebase/firestore",rn="@firebase/vertexai-preview",an="@firebase/firestore-compat",on="firebase",ln="[DEFAULT]",cn={[Nt]:"fire-core",[Ft]:"fire-core-compat",[jt]:"fire-analytics",[Ot]:"fire-analytics-compat",[zt]:"fire-app-check",[Wt]:"fire-app-check-compat",[Bt]:"fire-auth",[Ut]:"fire-auth-compat",[Ht]:"fire-rtdb",[qt]:"fire-rtdb-compat",[Vt]:"fire-fn",[Gt]:"fire-fn-compat",[Kt]:"fire-iid",[Yt]:"fire-iid-compat",[Xt]:"fire-fcm",[Qt]:"fire-fcm-compat",[$t]:"fire-perf",[Jt]:"fire-perf-compat",[Zt]:"fire-rc",[en]:"fire-rc-compat",[tn]:"fire-gcs",[nn]:"fire-gcs-compat",[sn]:"fire-fst",[an]:"fire-fst-compat",[rn]:"fire-vertex","fire-js":"fire-js",[on]:"fire-js-all"},hn=new Map,un=new Map,dn=new Map;function pn(e,t){try{e.container.addComponent(t)}catch($C){Dt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),$C)}}function fn(e){const t=e.name;if(dn.has(t))return Dt.debug("There were multiple attempts to register component ".concat(t,".")),!1;dn.set(t,e);for(const n of hn.values())pn(n,e);for(const n of un.values())pn(n,e);return!0}function gn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const mn=new He("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new st("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}const _n="10.12.2";function yn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:ln,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!==typeof s||!s)throw mn.create("bad-app-name",{appName:String(s)});if(n||(n=Fe()),!n)throw mn.create("no-options");const r=hn.get(s);if(r){if(Je(n,r.options)&&Je(i,r.config))return r;throw mn.create("duplicate-app",{appName:s})}const a=new ot(s);for(const l of dn.values())a.addComponent(l);const o=new vn(n,i,a);return hn.set(s,o),o}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln;const t=hn.get(e);if(!t&&e===ln&&Fe())return yn();if(!t)throw mn.create("no-app",{appName:e});return t}function wn(e,t,n){var i;let s=null!==(i=cn[e])&&void 0!==i?i:e;n&&(s+="-".concat(n));const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return r&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),r&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Dt.warn(e.join(" "))}fn(new st("".concat(s,"-version"),(()=>({library:s,version:t})),"VERSION"))}const kn="firebase-heartbeat-database",Cn=1,xn="firebase-heartbeat-store";let Sn=null;function An(){return Sn||(Sn=function(e,t){let{blocked:n,upgrade:i,blocking:s,terminated:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=At(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(At(a.result),e.oldVersion,e.newVersion,At(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(kn,Cn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(xn)}catch($C){console.warn($C)}}}).catch((e=>{throw mn.create("idb-open",{originalErrorMessage:e.message})}))),Sn}async function En(e,t){try{const n=(await An()).transaction(xn,"readwrite"),i=n.objectStore(xn);await i.put(t,Tn(e)),await n.done}catch($C){if($C instanceof Ue)Dt.warn($C.message);else{const t=mn.create("idb-set",{originalErrorMessage:null===$C||void 0===$C?void 0:$C.message});Dt.warn(t.message)}}}function Tn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Mn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=In();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=In(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Pn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pn(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),s=Me(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function In(){return(new Date).toISOString().substring(0,10)}class Rn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch($C){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(xi){t(xi)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await An()).transaction(xn),n=await t.objectStore(xn).get(Tn(e));return await t.done,n}catch($C){if($C instanceof Ue)Dt.warn($C.message);else{const t=mn.create("idb-get",{originalErrorMessage:null===$C||void 0===$C?void 0:$C.message});Dt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return En(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return En(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Pn(e){return Me(JSON.stringify({version:2,heartbeats:e})).length}var Nn;Nn="",fn(new st("platform-logger",(e=>new Pt(e)),"PRIVATE")),fn(new st("heartbeat",(e=>new Mn(e)),"PRIVATE")),wn(Nt,Lt,Nn),wn(Nt,Lt,"esm2017"),wn("fire-js","");wn("firebase","10.12.2","app");const Ln="firebasestorage.googleapis.com",Dn="storageBucket";class Fn extends Ue{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Wn(e),"Firebase Storage: ".concat(t," (").concat(Wn(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wn(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var On,jn;function Wn(e){return"storage/"+e}function zn(){return new Fn(On.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Bn(){return new Fn(On.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Un(){return new Fn(On.CANCELED,"User canceled the upload/download.")}function Hn(e){return new Fn(On.INVALID_ARGUMENT,e)}function qn(){return new Fn(On.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(On||(On={}));class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Vn.makeFromUrl(e,t)}catch($C){return new Vn(e,"")}if(""===n.path)return n;throw i=e,new Fn(On.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+i+"(/(.*))?$","i");function r(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp("^https?://".concat(t===Ln?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:r}];for(let l=0;l<o.length;l++){const t=o[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let s=i[t.indices.path];s||(s=""),n=new Vn(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Fn(On.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Gn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Kn(e,t,n,i){if(i<t)throw Hn("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw Hn("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yn(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function Xn(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||i||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(jn||(jn={}));class Qn{constructor(e,t,n,i,s,r,a,o,l,c,h){let u=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=r,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new $n(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===jn.NO_ERROR,s=n.getStatus();if(!t||Xn(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===jn.ABORT;return void e(!1,new $n(!1,null,t))}const r=-1!==this.successCodes_.indexOf(s);e(!0,new $n(r,n))}))},t=(e,t)=>{const n=this.resolve_,i=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch($C){i($C)}else if(null!==s){const e=zn();e.serverResponse=s.getErrorText(),this.errorCallback_?i(this.errorCallback_(s,e)):i(e)}else if(t.canceled){i(this.appDelete_?qn():Un())}else{i(Bn())}};this.canceled_?t(0,new $n(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,s=null,r=null,a=!1,o=0;function l(){return 2===o}let c=!1;function h(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function u(t){s=setTimeout((()=>{s=null,e(p,l())}),t)}function d(){r&&clearTimeout(r)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void h.call(null,e,...n);if(l()||a)return d(),void h.call(null,e,...n);let r;i<64&&(i*=2),1===o?(o=2,r=0):r=1e3*(i+Math.random()),u(r)}let f=!1;function g(e){f||(f=!0,d(),c||(null!==s?(e||(o=2),clearTimeout(s),u(0)):e||(o=1)))}return u(0),r=setTimeout((()=>{a=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $n{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Jn(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Zn{constructor(e,t){this._service=e,this._location=t instanceof Vn?t:Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zn(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jn(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Vn(this._location.bucket,e);return new Zn(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Fn(On.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ei(e,t){const n=null===t||void 0===t?void 0:t[Dn];return null==n?null:Vn.makeFromBucketSpec(n,e)}class ti{constructor(e,t,n,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Ln,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Vn.makeFromBucketSpec(i,this._host):ei(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=ei(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zn(this,e)}_makeRequest(e,t,n,i){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Gn(qn());{const r=function(e,t,n,i,s,r){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Yn(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,r),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new Qn(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,i,t,this._firebaseVersion,s);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),r}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const ni="@firebase/storage",ii="0.12.5",si="storage";function ri(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new ti(i,s,r,n,_n)}fn(new st(si,ri,"PUBLIC").setMultipleInstances(!0)),wn(ni,ii,""),wn(ni,ii,"esm2017");const ai="@firebase/database",oi="1.0.5";let li="";function ci(e){li=e}class hi{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ge(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ve(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ui{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ye(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const di=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hi(t)}}catch($C){}return new ui},pi=di("localStorage"),fi=di("sessionStorage"),gi=new ft("@firebase/database"),mi=function(){let e=1;return function(){return e++}}(),vi=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,Ce(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t}(e),n=new et;n.update(t);const i=n.digest();return Ae.encodeByteArray(i)},_i=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=_i.apply(null,n):e+="object"===typeof n?Ge(n):n,e+=" "}return e};let yi=null,bi=!0;const wi=function(e,t){Ce(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(gi.logLevel=ct.VERBOSE,yi=gi.log.bind(gi),t&&fi.set("logging_enabled",!0)):"function"===typeof e?yi=e:(yi=null,fi.remove("logging_enabled"))},ki=function(){if(!0===bi&&(bi=!1,null===yi&&!0===fi.get("logging_enabled")&&wi(!0)),yi){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=_i.apply(null,t);yi(i)}},Ci=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];ki(e,...n)}},xi=function(){const e="FIREBASE INTERNAL ERROR: "+_i(...arguments);gi.error(e)},Si=function(){const e="FIREBASE FATAL ERROR: ".concat(_i(...arguments));throw gi.error(e),new Error(e)},Ai=function(){const e="FIREBASE WARNING: "+_i(...arguments);gi.warn(e)},Ei=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ti="[MIN_NAME]",Mi="[MAX_NAME]",Ii=function(e,t){if(e===t)return 0;if(e===Ti||t===Mi)return-1;if(t===Ti||e===Mi)return 1;{const n=ji(e),i=ji(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},Ri=function(e,t){return e===t?0:e<t?-1:1},Pi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ge(t))},Ni=function(e){if("object"!==typeof e||null===e)return Ge(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=Ge(t[i]),n+=":",n+=Ni(e[t[i]]);return n+="}",n},Li=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function Di(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Fi=function(e){Ce(!Ei(e),"Invalid JSON number");const t=1023;let n,i,s,r,a;0===e?(i=0,s=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=r+t,s=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(i=0,s=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(s%2?1:0),s=Math.floor(s/2);for(a=11;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Oi=new RegExp("^-?(0*)\\d{1,10}$"),ji=function(e){if(Oi.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Wi=function(e){try{e()}catch($C){setTimeout((()=>{const t=$C.stack||"";throw Ai("Exception was thrown by user callback.",t),$C}),Math.floor(0))}},zi=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Bi{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Ai('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Ui{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(ki("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ai(e)}}class Hi{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Hi.OWNER="owner";const qi="5",Vi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gi="ac",Ki="websocket",Yi="long_polling";class Xi{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=r,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pi.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Qi(e,t,n){let i;if(Ce("string"===typeof t,"typeof type must == string"),Ce("object"===typeof n,"typeof params must == object"),t===Ki)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Yi)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const s=[];return Di(n,((e,t)=>{s.push(e+"="+t)})),i+s.join("&")}class $i{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ye(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Re(this.counters_)}}const Ji={},Zi={};function es(e){const t=e.toString();return Ji[t]||(Ji[t]=new $i),Ji[t]}class ts{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Wi((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ns="start";class is{constructor(e,t,n,i,s,r,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.transportSessionId=r,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ci(e),this.stats_=es(t),this.urlFn=e=>(this.appCheckToken&&(e[Gi]=this.appCheckToken),Qi(t,Yi,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ts(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Be()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ss((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[s,r,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,s===ns)n.id=r,n.password=a;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);r?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(r,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[s,r]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(s,r)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ns]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=qi,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Gi]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Vi.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){is.forceAllow_=!0}static forceDisallow(){is.forceDisallow_=!0}static isAvailable(){return!Be()&&(!!is.forceAllow_||!is.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ge(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Te(t),i=Li(n,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Be())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ge(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ss{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Be())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=mi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ss.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch($C){ki("frame writing exception"),$C.stack&&ki($C.stack),ki($C)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ki("No IE domain setting required")}catch($C){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(i),n()}))}addTag(e,t){Be()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ki("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch($C){}}),Math.floor(1))}}let rs=null;"undefined"!==typeof MozWebSocket?rs=MozWebSocket:"undefined"!==typeof WebSocket&&(rs=WebSocket);class as{constructor(e,t,n,i,s,r,a){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ci(this.connId),this.stats_=es(t),this.connURL=as.connectionURL_(t,r,a,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,s){const r={};return r.v=qi,!Be()&&"undefined"!==typeof location&&location.hostname&&Vi.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),i&&(r[Gi]=i),s&&(r.p=s),Qi(e,Ki,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pi.set("previous_websocket_failure",!0);try{let e;if(Be()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(qi,"/").concat(li,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/portfolio/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new rs(this.connURL,[],e)}catch($C){this.log_("Error instantiating WebSocket.");const t=$C.message||$C.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){as.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rs&&!as.forceDisallow_}static previouslyFailed(){return pi.isInMemoryStorage||!0===pi.get("previous_websocket_failure")}markConnectionHealthy(){pi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Ve(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ce(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Ge(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Li(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch($C){this.log_("Exception thrown from WebSocket.send():",$C.message||$C.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}as.responsesRequiredToBeHealthy=2,as.healthyTimeout=3e4;class os{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[is,as]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=as&&as.isAvailable();let n=t&&!as.previouslyFailed();if(e.webSocketOnly&&(t||Ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[as];else{const e=this.transports_=[];for(const t of os.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);os.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}os.globalTransportInitialized_=!1;class ls{constructor(e,t,n,i,s,r,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=r,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ci("c:"+this.id+":"),this.transportManager_=new os(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=zi((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Pi("t",e),n=Pi("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Pi("t",e),n=Pi("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Pi("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?xi("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qi!==n&&Ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),zi((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zi((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cs{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class hs{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<s.length;e++)s[e].callback.apply(s[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!n||n===i[s].context))return void i.splice(s,1)}validateEventType_(e){Ce(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class us extends hs{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ze()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new us}getInitialEvent(e){return Ce("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const ds=32,ps=768;class fs{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gs(){return new fs("")}function ms(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function vs(e){return e.pieces_.length-e.pieceNum_}function _s(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new fs(e.pieces_,t)}function ys(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function bs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ws(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fs(t,0)}function ks(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof fs)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new fs(n,0)}function Cs(e){return e.pieceNum_>=e.pieces_.length}function xs(e,t){const n=ms(e),i=ms(t);if(null===n)return t;if(n===i)return xs(_s(e),_s(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ss(e,t){if(vs(e)!==vs(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function As(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(vs(e)>vs(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Es{constructor(e,t){this.errorPrefix_=t,this.parts_=bs(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=nt(this.parts_[n]);Ts(this)}}function Ts(e){if(e.byteLength_>ps)throw new Error(e.errorPrefix_+"has a key path longer than "+ps+" bytes ("+e.byteLength_+").");if(e.parts_.length>ds)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ds+") or object contains a cycle "+Ms(e))}function Ms(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Is extends hs{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Is}getInitialEvent(e){return Ce("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Rs=1e3;class Ps extends cs{constructor(e,t,n,i,s,r,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=Ps.nextPersistentConnectionId_++,this.log_=Ci("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!Be())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Is.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&us.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(Ge(s)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Oe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const s=e._queryIdentifier,r=e._path.toString();this.log_("Listen called for "+r+" "+s),this.listens.has(r)||this.listens.set(r,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(r).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(r).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const s={p:n};e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(s=>{const r=s.d,a=s.s;Ps.warnOnListenWarnings_(r,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(n,i),e.onComplete&&e.onComplete(a,r))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Ye(e,"w")){const n=Xe(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Ai("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Ke(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Ke(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e};i&&(s.q=n,s.t=i),this.sendRequest("n",s)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const s={p:t,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,(e=>{i&&setTimeout((()=>{i(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,s){this.initConnection_();const r={p:t,d:n};void 0!==s&&(r.h=s),this.outstandingPuts_.push({action:e,request:r,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ge(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):xi("Unrecognized action received from server: "+Ge(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Rs),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ps.nextConnectionId_++,s=this.lastSessionId;let r=!1,a=null;const o=function(){a?a.close():(r=!0,n())},l=function(e){Ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);r?ki("getToken() completed but was canceled"):(ki("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new ls(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Ai(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),s))}catch(xi){this.log_("Failed to get token: "+xi),r||(this.repoInfo_.nodeAdmin&&Ai(xi),o())}}}interrupt(e){ki("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ki("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Qe(this.interruptReasons_)&&(this.reconnectDelay_=Rs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ni(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new fs(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){ki("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ki("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Be()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+li.replace(/\./g,"-")]=1,ze()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=us.getInstance().currentlyOnline();return Qe(this.interruptReasons_)&&e}}Ps.nextPersistentConnectionId_=0,Ps.nextConnectionId_=0;class Ns{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ns(e,t)}}class Ls{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ns(Ti,e),i=new Ns(Ti,t);return 0!==this.compare(n,i)}minPost(){return Ns.MIN}}let Ds;class Fs extends Ls{static get __EMPTY_NODE(){return Ds}static set __EMPTY_NODE(e){Ds=e}compare(e,t){return Ii(e.name,t.name)}isDefinedOn(e){throw xe("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ns.MIN}maxPost(){return new Ns(Mi,Ds)}makePost(e,t){return Ce("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ns(e,Ds)}toString(){return".key"}}const Os=new Fs;class js{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,i&&(r*=-1),r<0)e=this.isReverse_?e.left:e.right;else{if(0===r){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ws{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:Ws.RED,this.left=null!=i?i:zs.EMPTY_NODE,this.right=null!=s?s:zs.EMPTY_NODE}copy(e,t,n,i,s){return new Ws(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return zs.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return zs.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ws.RED=!0,Ws.BLACK=!1;class zs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zs.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new zs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ws.BLACK,null,null))}remove(e){return new zs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ws.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new js(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new js(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new js(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new js(this.root_,null,this.comparator_,!0,e)}}function Bs(e,t){return Ii(e.name,t.name)}function Us(e,t){return Ii(e,t)}let Hs;zs.EMPTY_NODE=new class{copy(e,t,n,i,s){return this}insert(e,t,n){return new Ws(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qs=function(e){return"number"===typeof e?"number:"+Fi(e):"string:"+e},Vs=function(e){if(e.isLeafNode()){const t=e.val();Ce("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ye(t,".sv"),"Priority must be a string or number.")}else Ce(e===Hs||e.isEmpty(),"priority of unexpected type.");Ce(e===Hs||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Gs,Ks,Ys;class Xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xs.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ce(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vs(this.priorityNode_)}static set __childrenNodeConstructor(e){Gs=e}static get __childrenNodeConstructor(){return Gs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xs(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Xs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Cs(e)?this:".priority"===ms(e)?this.priorityNode_:Xs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Xs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ms(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ce(".priority"!==n||1===vs(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Xs.__childrenNodeConstructor.EMPTY_NODE.updateChild(_s(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qs(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Fi(this.value_):this.value_,this.lazyHash_=vi(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xs.__childrenNodeConstructor?-1:(Ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=Xs.VALUE_TYPE_ORDER.indexOf(t),s=Xs.VALUE_TYPE_ORDER.indexOf(n);return Ce(i>=0,"Unknown leaf type: "+t),Ce(s>=0,"Unknown leaf type: "+n),i===s?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Xs.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Qs=new class extends Ls{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),s=n.compareTo(i);return 0===s?Ii(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ns.MIN}maxPost(){return new Ns(Mi,new Xs("[PRIORITY-POST]",Ys))}makePost(e,t){const n=Ks(e);return new Ns(t,new Xs("[PRIORITY-POST]",n))}toString(){return".priority"}},$s=Math.log(2);class Js{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/$s,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zs=function(e,t,n,i){e.sort(t);const s=function(t,i){const r=i-t;let a,o;if(0===r)return null;if(1===r)return a=e[t],o=n?n(a):a,new Ws(o,a.node,Ws.BLACK,null,null);{const l=parseInt(r/2,10)+t,c=s(t,l),h=s(l+1,i);return a=e[l],o=n?n(a):a,new Ws(o,a.node,Ws.BLACK,c,h)}},r=function(t){let i=null,r=null,a=e.length;const o=function(t,i){const r=a-t,o=a;a-=t;const c=s(r+1,o),h=e[r],u=n?n(h):h;l(new Ws(u,h.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(r=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?o(i,Ws.BLACK):(o(i,Ws.BLACK),o(i,Ws.RED))}return r}(new Js(e.length));return new zs(i||t,r)};let er;const tr={};class nr{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ce(tr&&Qs,"ChildrenNode.ts has not been loaded"),er=er||new nr({".priority":tr},{".priority":Qs}),er}get(e){const t=Xe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof zs?t:null}hasIndex(e){return Ye(this.indexSet_,e.toString())}addIndex(e,t){Ce(e!==Os,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const s=t.getIterator(Ns.Wrap);let r,a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),n.push(a),a=s.getNext();r=i?Zs(n,e.getCompare()):tr;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=r,new nr(c,l)}addToIndexes(e,t){const n=$e(this.indexes_,((n,i)=>{const s=Xe(this.indexSet_,i);if(Ce(s,"Missing index implementation for "+i),n===tr){if(s.isDefinedOn(e.node)){const n=[],i=t.getIterator(Ns.Wrap);let r=i.getNext();for(;r;)r.name!==e.name&&n.push(r),r=i.getNext();return n.push(e),Zs(n,s.getCompare())}return tr}{const i=t.get(e.name);let s=n;return i&&(s=s.remove(new Ns(e.name,i))),s.insert(e,e.node)}}));return new nr(n,this.indexSet_)}removeFromIndexes(e,t){const n=$e(this.indexes_,(n=>{if(n===tr)return n;{const i=t.get(e.name);return i?n.remove(new Ns(e.name,i)):n}}));return new nr(n,this.indexSet_)}}let ir;class sr{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vs(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ir||(ir=new sr(new zs(Us),null,nr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ir}updatePriority(e){return this.children_.isEmpty()?this:new sr(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ir:t}}getChild(e){const t=ms(e);return null===t?this:this.getImmediateChild(t).getChild(_s(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ce(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ns(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(n,this.children_));const r=i.isEmpty()?ir:this.priorityNode_;return new sr(i,r,s)}}updateChild(e,t){const n=ms(e);if(null===n)return t;{Ce(".priority"!==ms(e)||1===vs(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(_s(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,s=!0;if(this.forEachChild(Qs,((r,a)=>{t[r]=a.val(e),n++,s&&sr.INTEGER_REGEXP_.test(r)?i=Math.max(i,Number(r)):s=!1})),!e&&s&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+qs(this.getPriority().val())+":"),this.forEachChild(Qs,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":vi(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Ns(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ns(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ns(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ns.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ns.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rr?-1:0}withIndex(e){if(e===Os||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new sr(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Os||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Qs),n=t.getIterator(Qs);let i=e.getNext(),s=n.getNext();for(;i&&s;){if(i.name!==s.name||!i.node.equals(s.node))return!1;i=e.getNext(),s=n.getNext()}return null===i&&null===s}return!1}return!1}}resolveIndex_(e){return e===Os?null:this.indexMap_.get(e.toString())}}sr.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const rr=new class extends sr{constructor(){super(new zs(Us),sr.EMPTY_NODE,nr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return sr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ns,{MIN:{value:new Ns(Ti,sr.EMPTY_NODE)},MAX:{value:new Ns(Mi,rr)}}),Fs.__EMPTY_NODE=sr.EMPTY_NODE,Xs.__childrenNodeConstructor=sr,Hs=rr,function(e){Ys=e}(rr);const ar=!0;function or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return sr.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ce(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Xs(e,or(t))}if(e instanceof Array||!ar){let n=sr.EMPTY_NODE;return Di(e,((t,i)=>{if(Ye(e,t)&&"."!==t.substring(0,1)){const e=or(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(or(t))}{const n=[];let i=!1;if(Di(e,((e,t)=>{if("."!==e.substring(0,1)){const s=or(t);s.isEmpty()||(i=i||!s.getPriority().isEmpty(),n.push(new Ns(e,s)))}})),0===n.length)return sr.EMPTY_NODE;const s=Zs(n,Bs,(e=>e.name),Us);if(i){const e=Zs(n,Qs.getCompare());return new sr(s,or(t),new nr({".priority":e},{".priority":Qs}))}return new sr(s,or(t),nr.Default)}}!function(e){Ks=e}(or);class lr extends Ls{constructor(e){super(),this.indexPath_=e,Ce(!Cs(e)&&".priority"!==ms(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),s=n.compareTo(i);return 0===s?Ii(e.name,t.name):s}makePost(e,t){const n=or(e),i=sr.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ns(t,i)}maxPost(){const e=sr.EMPTY_NODE.updateChild(this.indexPath_,rr);return new Ns(Mi,e)}toString(){return bs(this.indexPath_,0).join("/")}}const cr=new class extends Ls{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Ii(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ns.MIN}maxPost(){return Ns.MAX}makePost(e,t){const n=or(e);return new Ns(t,n)}toString(){return".value"}};function hr(e){return{type:"value",snapshotNode:e}}function ur(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dr(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pr(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class fr{constructor(e){this.index_=e}updateChild(e,t,n,i,s,r){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?e:(null!=r&&(n.isEmpty()?e.hasChild(t)?r.trackChildChange(dr(t,a)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?r.trackChildChange(ur(t,n)):r.trackChildChange(pr(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Qs,((e,i)=>{t.hasChild(e)||n.trackChildChange(dr(e,i))})),t.isLeafNode()||t.forEachChild(Qs,((t,i)=>{if(e.hasChild(t)){const s=e.getImmediateChild(t);s.equals(i)||n.trackChildChange(pr(t,i,s))}else n.trackChildChange(ur(t,i))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?sr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gr{constructor(e){this.indexedFilter_=new fr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gr.getStartPost_(e),this.endPost_=gr.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,s,r){return this.matches(new Ns(t,n))||(n=sr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,s,r)}updateFullNode(e,t,n){t.isLeafNode()&&(t=sr.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(sr.EMPTY_NODE);const s=this;return t.forEachChild(Qs,((e,t)=>{s.matches(new Ns(e,t))||(i=i.updateImmediateChild(e,sr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class mr{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new gr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,s,r){return this.rangedFilter_.matches(new Ns(t,n))||(n=sr.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,s,r):this.fullLimitUpdateChild_(e,t,n,s,r)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=sr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=sr.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(sr.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,sr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,s){let r;if(this.reverse_){const e=this.index_.getCompare();r=(t,n)=>e(n,t)}else r=this.index_.getCompare();const a=e;Ce(a.numChildren()===this.limit_,"");const o=new Ns(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const u=null==h?1:r(h,o);if(c&&!n.isEmpty()&&u>=0)return null!=s&&s.trackChildChange(pr(t,n,e)),a.updateImmediateChild(t,n);{null!=s&&s.trackChildChange(dr(t,e));const n=a.updateImmediateChild(t,sr.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=s&&s.trackChildChange(ur(h.name,h.node)),n.updateImmediateChild(h.name,h.node)):n}}return n.isEmpty()?e:c&&r(l,o)>=0?(null!=s&&(s.trackChildChange(dr(l.name,l.node)),s.trackChildChange(ur(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,sr.EMPTY_NODE)):e}}class vr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qs}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ti}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qs}copy(){const e=new vr;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _r(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Qs?n="$priority":e.index_===cr?n="$value":e.index_===Os?n="$key":(Ce(e.index_ instanceof lr,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ge(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Ge(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Ge(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Ge(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Ge(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function yr(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Qs&&(t.i=e.index_.toString()),t}class br extends cs{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Ci("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const r=br.getListenId_(e,n),a={};this.listens_[r]=a;const o=_r(e._queryParams);this.restRequest_(s+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(s,o,!1,n),Xe(this.listens_,r)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=br.getListenId_(e,t);delete this.listens_[n]}get(e){const t=_r(e._queryParams),n=e._path.toString(),i=new Oe;return this.restRequest_(n+".json",t,((e,t)=>{let s=t;404===e&&(s=null,e=null),null===e?(this.onDataUpdate_(n,s,!1,null),i.resolve(s)):i.reject(new Error(s))})),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((i=>{let[s,r]=i;s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=Ve(o.responseText)}catch($C){Ai("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Ai("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class wr{constructor(){this.rootNode_=sr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function kr(){return{value:null,children:new Map}}function Cr(e,t,n){if(Cs(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ms(t);e.children.has(i)||e.children.set(i,kr());Cr(e.children.get(i),t=_s(t),n)}}function xr(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,i)=>{xr(i,new fs(t.toString()+"/"+e),n)}))}class Sr{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Di(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ar{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sr(e);const n=1e4+2e4*Math.random();zi(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Di(e,((e,i)=>{i>0&&Ye(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),zi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Er;function Tr(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Er||(Er={}));class Mr{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Er.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Cs(this.path)){if(null!=this.affectedTree.value)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new fs(e));return new Mr(gs(),t,this.revert)}}return Ce(ms(this.path)===e,"operationForChild called for unrelated child."),new Mr(_s(this.path),this.affectedTree,this.revert)}}class Ir{constructor(e,t){this.source=e,this.path=t,this.type=Er.LISTEN_COMPLETE}operationForChild(e){return Cs(this.path)?new Ir(this.source,gs()):new Ir(this.source,_s(this.path))}}class Rr{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Er.OVERWRITE}operationForChild(e){return Cs(this.path)?new Rr(this.source,gs(),this.snap.getImmediateChild(e)):new Rr(this.source,_s(this.path),this.snap)}}class Pr{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Er.MERGE}operationForChild(e){if(Cs(this.path)){const t=this.children.subtree(new fs(e));return t.isEmpty()?null:t.value?new Rr(this.source,gs(),t.value):new Pr(this.source,gs(),t)}return Ce(ms(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pr(this.source,_s(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nr{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Cs(e))return this.isFullyInitialized()&&!this.filtered_;const t=ms(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Lr{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Dr(e,t,n,i,s,r){const a=i.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw xe("Should only compare child_ events.");const i=new Ns(t.childName,t.snapshotNode),s=new Ns(n.childName,n.snapshotNode);return e.index_.compare(i,s)}(e,t,n))),a.forEach((n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,r);s.forEach((s=>{s.respondsTo(n.type)&&t.push(s.createEvent(i,e.query_))}))}))}function Fr(e,t){return{eventCache:e,serverCache:t}}function Or(e,t,n,i){return Fr(new Nr(t,n,i),e.serverCache)}function jr(e,t,n,i){return Fr(e.eventCache,new Nr(t,n,i))}function Wr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function zr(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Br;class Ur{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Br||(Br=new zs(Ri)),Br);this.value=e,this.children=t}static fromObject(e){let t=new Ur(null);return Di(e,((e,n)=>{t=t.set(new fs(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gs(),value:this.value};if(Cs(e))return null;{const n=ms(e),i=this.children.get(n);if(null!==i){const s=i.findRootMostMatchingPathAndValue(_s(e),t);if(null!=s){return{path:ks(new fs(n),s.path),value:s.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Cs(e))return this;{const t=ms(e),n=this.children.get(t);return null!==n?n.subtree(_s(e)):new Ur(null)}}set(e,t){if(Cs(e))return new Ur(t,this.children);{const n=ms(e),i=(this.children.get(n)||new Ur(null)).set(_s(e),t),s=this.children.insert(n,i);return new Ur(this.value,s)}}remove(e){if(Cs(e))return this.children.isEmpty()?new Ur(null):new Ur(null,this.children);{const t=ms(e),n=this.children.get(t);if(n){const i=n.remove(_s(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Ur(null):new Ur(this.value,s)}return this}}get(e){if(Cs(e))return this.value;{const t=ms(e),n=this.children.get(t);return n?n.get(_s(e)):null}}setTree(e,t){if(Cs(e))return t;{const n=ms(e),i=(this.children.get(n)||new Ur(null)).setTree(_s(e),t);let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new Ur(this.value,s)}}fold(e){return this.fold_(gs(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,s)=>{n[i]=s.fold_(ks(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,gs(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Cs(e))return null;{const i=ms(e),s=this.children.get(i);return s?s.findOnPath_(_s(e),ks(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gs(),t)}foreachOnPath_(e,t,n){if(Cs(e))return this;{this.value&&n(t,this.value);const i=ms(e),s=this.children.get(i);return s?s.foreachOnPath_(_s(e),ks(t,i),n):new Ur(null)}}foreach(e){this.foreach_(gs(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(ks(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Hr{constructor(e){this.writeTree_=e}static empty(){return new Hr(new Ur(null))}}function qr(e,t,n){if(Cs(t))return new Hr(new Ur(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const s=i.path;let r=i.value;const a=xs(s,t);return r=r.updateChild(a,n),new Hr(e.writeTree_.set(s,r))}{const i=new Ur(n),s=e.writeTree_.setTree(t,i);return new Hr(s)}}}function Vr(e,t,n){let i=e;return Di(n,((e,n)=>{i=qr(i,ks(t,e),n)})),i}function Gr(e,t){if(Cs(t))return Hr.empty();{const n=e.writeTree_.setTree(t,new Ur(null));return new Hr(n)}}function Kr(e,t){return null!=Yr(e,t)}function Yr(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(xs(n.path,t)):null}function Xr(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Qs,((e,n)=>{t.push(new Ns(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ns(e,n.value))})),t}function Qr(e,t){if(Cs(t))return e;{const n=Yr(e,t);return new Hr(null!=n?new Ur(n):e.writeTree_.subtree(t))}}function $r(e){return e.writeTree_.isEmpty()}function Jr(e,t){return Zr(gs(),e.writeTree_,t)}function Zr(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,s)=>{".priority"===t?(Ce(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):n=Zr(ks(e,t),s,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(ks(e,".priority"),i)),n}}function ea(e,t){return pa(t,e)}function ta(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ce(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,a=e.allWrites.length-1;for(;s&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&na(t,i.path)?s=!1:As(i.path,t.path)&&(r=!0)),a--}if(s){if(r)return function(e){e.visibleWrites=sa(e.allWrites,ia,gs()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=Gr(e.visibleWrites,i.path);else{Di(i.children,(t=>{e.visibleWrites=Gr(e.visibleWrites,ks(i.path,t))}))}return!0}return!1}function na(e,t){if(e.snap)return As(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&As(ks(e.path,n),t))return!0;return!1}function ia(e){return e.visible}function sa(e,t,n){let i=Hr.empty();for(let s=0;s<e.length;++s){const r=e[s];if(t(r)){const e=r.path;let t;if(r.snap)As(n,e)?(t=xs(n,e),i=qr(i,t,r.snap)):As(e,n)&&(t=xs(e,n),i=qr(i,gs(),r.snap.getChild(t)));else{if(!r.children)throw xe("WriteRecord should have .snap or .children");if(As(n,e))t=xs(n,e),i=Vr(i,t,r.children);else if(As(e,n))if(t=xs(e,n),Cs(t))i=Vr(i,gs(),r.children);else{const e=Xe(r.children,ms(t));if(e){const n=e.getChild(_s(t));i=qr(i,gs(),n)}}}}}return i}function ra(e,t,n,i,s){if(i||s){const r=Qr(e.visibleWrites,t);if(!s&&$r(r))return n;if(s||null!=n||Kr(r,gs())){const r=function(e){return(e.visible||s)&&(!i||!~i.indexOf(e.writeId))&&(As(e.path,t)||As(t,e.path))};return Jr(sa(e.allWrites,r,t),n||sr.EMPTY_NODE)}return null}{const i=Yr(e.visibleWrites,t);if(null!=i)return i;{const i=Qr(e.visibleWrites,t);if($r(i))return n;if(null!=n||Kr(i,gs())){return Jr(i,n||sr.EMPTY_NODE)}return null}}}function aa(e,t,n,i){return ra(e.writeTree,e.treePath,t,n,i)}function oa(e,t){return function(e,t,n){let i=sr.EMPTY_NODE;const s=Yr(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Qs,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const s=Qr(e.visibleWrites,t);return n.forEachChild(Qs,((e,t)=>{const n=Jr(Qr(s,new fs(e)),t);i=i.updateImmediateChild(e,n)})),Xr(s).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}return Xr(Qr(e.visibleWrites,t)).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function la(e,t,n,i){return function(e,t,n,i,s){Ce(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=ks(t,n);if(Kr(e.visibleWrites,r))return null;{const t=Qr(e.visibleWrites,r);return $r(t)?s.getChild(n):Jr(t,s.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function ca(e,t){return function(e,t){return Yr(e.visibleWrites,t)}(e.writeTree,ks(e.treePath,t))}function ha(e,t,n,i,s,r){return function(e,t,n,i,s,r,a){let o;const l=Qr(e.visibleWrites,t),c=Yr(l,gs());if(null!=c)o=c;else{if(null==n)return[];o=Jr(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=r?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let l=n.getNext();for(;l&&e.length<s;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,s,r)}function ua(e,t,n){return function(e,t,n,i){const s=ks(t,n),r=Yr(e.visibleWrites,s);if(null!=r)return r;if(i.isCompleteForChild(n))return Jr(Qr(e.visibleWrites,s),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function da(e,t){return pa(ks(e.treePath,t),e.writeTree)}function pa(e,t){return{treePath:e,writeTree:t}}class fa{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ce("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ce(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(n,pr(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(n,dr(n,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(n,ur(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw xe("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,pr(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const ga=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class ma{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Nr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ua(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zr(this.viewCache_),s=ha(this.writes_,i,t,1,n,e);return 0===s.length?null:s[0]}}function va(e,t,n,i,s){const r=new fa;let a,o;if(n.type===Er.OVERWRITE){const l=n;l.source.fromUser?a=ba(e,t,l.path,l.snap,i,s,r):(Ce(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!Cs(l.path),a=ya(e,t,l.path,l.snap,i,s,o,r))}else if(n.type===Er.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,i,s,r,a){let o=t;return i.foreach(((i,l)=>{const c=ks(n,i);wa(t,ms(c))&&(o=ba(e,o,c,l,s,r,a))})),i.foreach(((i,l)=>{const c=ks(n,i);wa(t,ms(c))||(o=ba(e,o,c,l,s,r,a))})),o}(e,t,l.path,l.children,i,s,r):(Ce(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=Ca(e,t,l.path,l.children,i,s,o,r))}else if(n.type===Er.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,i,s,r){let a;if(null!=ca(i,n))return t;{const o=new ma(i,t,s),l=t.eventCache.getNode();let c;if(Cs(n)||".priority"===ms(n)){let n;if(t.serverCache.isFullyInitialized())n=aa(i,zr(t));else{const e=t.serverCache.getNode();Ce(e instanceof sr,"serverChildren would be complete if leaf node"),n=oa(i,e)}c=e.filter.updateFullNode(l,n,r)}else{const s=ms(n);let h=ua(i,s,t.serverCache);null==h&&t.serverCache.isCompleteForChild(s)&&(h=l.getImmediateChild(s)),c=null!=h?e.filter.updateChild(l,s,h,_s(n),o,r):t.eventCache.getNode().hasChild(s)?e.filter.updateChild(l,s,sr.EMPTY_NODE,_s(n),o,r):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=aa(i,zr(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,r)))}return a=t.serverCache.isFullyInitialized()||null!=ca(i,gs()),Or(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,i,s,r):function(e,t,n,i,s,r,a){if(null!=ca(s,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Cs(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ya(e,t,n,l.getNode().getChild(n),s,r,o,a);if(Cs(n)){let i=new Ur(null);return l.getNode().forEachChild(Os,((e,t)=>{i=i.set(new fs(e),t)})),Ca(e,t,n,i,s,r,o,a)}return t}{let c=new Ur(null);return i.foreach(((e,t)=>{const i=ks(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))})),Ca(e,t,n,c,s,r,o,a)}}(e,t,o.path,o.affectedTree,i,s,r)}else{if(n.type!==Er.LISTEN_COMPLETE)throw xe("Unknown operation type: "+n.type);a=function(e,t,n,i,s){const r=t.serverCache,a=jr(t,r.getNode(),r.isFullyInitialized()||Cs(n),r.isFiltered());return _a(e,a,n,i,ga,s)}(e,t,n.path,i,r)}const l=r.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=Wr(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(hr(Wr(t)))}}(t,a,l),{viewCache:a,changes:l}}function _a(e,t,n,i,s,r){const a=t.eventCache;if(null!=ca(i,n))return t;{let o,l;if(Cs(n))if(Ce(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=zr(t),s=oa(i,n instanceof sr?n:sr.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),s,r)}else{const n=aa(i,zr(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,r)}else{const c=ms(n);if(".priority"===c){Ce(1===vs(n),"Can't have a priority with additional path components");const s=a.getNode();l=t.serverCache.getNode();const r=la(i,n,s,l);o=null!=r?e.filter.updatePriority(s,r):a.getNode()}else{const h=_s(n);let u;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=la(i,n,a.getNode(),l);u=null!=e?a.getNode().getImmediateChild(c).updateChild(h,e):a.getNode().getImmediateChild(c)}else u=ua(i,c,t.serverCache);o=null!=u?e.filter.updateChild(a.getNode(),c,u,h,s,r):a.getNode()}}return Or(t,o,a.isFullyInitialized()||Cs(n),e.filter.filtersNodes())}}function ya(e,t,n,i,s,r,a,o){const l=t.serverCache;let c;const h=a?e.filter:e.filter.getIndexedFilter();if(Cs(n))c=h.updateFullNode(l.getNode(),i,null);else if(h.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=h.updateFullNode(l.getNode(),e,null)}else{const e=ms(n);if(!l.isCompleteForPath(n)&&vs(n)>1)return t;const s=_s(n),r=l.getNode().getImmediateChild(e).updateChild(s,i);c=".priority"===e?h.updatePriority(l.getNode(),r):h.updateChild(l.getNode(),e,r,s,ga,null)}const u=jr(t,c,l.isFullyInitialized()||Cs(n),h.filtersNodes());return _a(e,u,n,s,new ma(s,u,r),o)}function ba(e,t,n,i,s,r,a){const o=t.eventCache;let l,c;const h=new ma(s,t,r);if(Cs(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,a),l=Or(t,c,!0,e.filter.filtersNodes());else{const s=ms(n);if(".priority"===s)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Or(t,c,o.isFullyInitialized(),o.isFiltered());else{const r=_s(n),c=o.getNode().getImmediateChild(s);let u;if(Cs(r))u=i;else{const e=h.getCompleteChild(s);u=null!=e?".priority"===ys(r)&&e.getChild(ws(r)).isEmpty()?e:e.updateChild(r,i):sr.EMPTY_NODE}if(c.equals(u))l=t;else{l=Or(t,e.filter.updateChild(o.getNode(),s,u,r,h,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function wa(e,t){return e.eventCache.isCompleteForChild(t)}function ka(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ca(e,t,n,i,s,r,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Cs(n)?i:new Ur(null).setTree(n,i);const h=t.serverCache.getNode();return l.children.inorderTraversal(((n,i)=>{if(h.hasChild(n)){const l=ka(0,t.serverCache.getNode().getImmediateChild(n),i);c=ya(e,c,new fs(n),l,s,r,a,o)}})),l.children.inorderTraversal(((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!h.hasChild(n)&&!l){const l=ka(0,t.serverCache.getNode().getImmediateChild(n),i);c=ya(e,c,new fs(n),l,s,r,a,o)}})),c}class xa{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new fr(n.getIndex()),s=(r=n).loadsAllData()?new fr(r.getIndex()):r.hasLimit()?new mr(r):new gr(r);var r;this.processor_=function(e){return{filter:e}}(s);const a=t.serverCache,o=t.eventCache,l=i.updateFullNode(sr.EMPTY_NODE,a.getNode(),null),c=s.updateFullNode(sr.EMPTY_NODE,o.getNode(),null),h=new Nr(l,a.isFullyInitialized(),i.filtersNodes()),u=new Nr(c,o.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fr(u,h),this.eventGenerator_=new Lr(this.query_)}get query(){return this.query_}}function Sa(e,t){const n=zr(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Cs(t)&&!n.getImmediateChild(ms(t)).isEmpty())?n.getChild(t):null}function Aa(e){return 0===e.eventRegistrations_.length}function Ea(e,t,n){const i=[];if(n){Ce(null==t,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,s);t&&i.push(t)}))}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const s=e.eventRegistrations_[i];if(s.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(s)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function Ta(e,t,n,i){t.type===Er.MERGE&&null!==t.source.queryId&&(Ce(zr(e.viewCache_),"We should always have a full cache before handling merges"),Ce(Wr(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,r=va(e.processor_,s,t,n,i);var a,o;return a=e.processor_,o=r.viewCache,Ce(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Ce(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Ce(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,Ma(e,r.changes,r.viewCache.eventCache.getNode(),null)}function Ma(e,t,n,i){const s=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const s=[],r=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&r.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Dr(e,s,"child_removed",t,i,n),Dr(e,s,"child_added",t,i,n),Dr(e,s,"child_moved",r,i,n),Dr(e,s,"child_changed",t,i,n),Dr(e,s,"value",t,i,n),s}(e.eventGenerator_,t,n,s)}let Ia,Ra;class Pa{constructor(){this.views=new Map}}function Na(e,t,n,i){const s=t.source.queryId;if(null!==s){const r=e.views.get(s);return Ce(null!=r,"SyncTree gave us an op for an invalid query."),Ta(r,t,n,i)}{let s=[];for(const r of e.views.values())s=s.concat(Ta(r,t,n,i));return s}}function La(e,t,n,i,s){const r=t._queryIdentifier,a=e.views.get(r);if(!a){let e=aa(n,s?i:null),r=!1;e?r=!0:i instanceof sr?(e=oa(n,i),r=!1):(e=sr.EMPTY_NODE,r=!1);const a=Fr(new Nr(e,r,!1),new Nr(i,s,!1));return new xa(t,a)}return a}function Da(e,t,n,i,s,r){const a=La(e,t,i,s,r);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Qs,((e,t)=>{i.push(ur(e,t))}));return n.isFullyInitialized()&&i.push(hr(n.getNode())),Ma(e,i,n.getNode(),t)}(a,n)}function Fa(e,t,n,i){const s=t._queryIdentifier,r=[];let a=[];const o=Ba(e);if("default"===s)for(const[l,c]of e.views.entries())a=a.concat(Ea(c,n,i)),Aa(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const t=e.views.get(s);t&&(a=a.concat(Ea(t,n,i)),Aa(t)&&(e.views.delete(s),t.query._queryParams.loadsAllData()||r.push(t.query)))}return o&&!Ba(e)&&r.push(new(Ce(Ia,"Reference.ts has not been loaded"),Ia)(t._repo,t._path)),{removed:r,events:a}}function Oa(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ja(e,t){let n=null;for(const i of e.views.values())n=n||Sa(i,t);return n}function Wa(e,t){if(t._queryParams.loadsAllData())return Ua(e);{const n=t._queryIdentifier;return e.views.get(n)}}function za(e,t){return null!=Wa(e,t)}function Ba(e){return null!=Ua(e)}function Ua(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ha=1;class qa{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ur(null),this.pendingWriteTree_={visibleWrites:Hr.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Va(e,t,n,i,s){return function(e,t,n,i,s){Ce(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=qr(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,s),s?Ja(e,new Rr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ga(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(ta(e.pendingWriteTree_,t)){let t=new Ur(null);return null!=i.snap?t=t.set(gs(),!0):Di(i.children,(e=>{t=t.set(new fs(e),!0)})),Ja(e,new Mr(i.path,t,n))}return[]}function Ka(e,t,n){return Ja(e,new Rr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Ya(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=t._path,a=e.syncPointTree_.get(r);let o=[];if(a&&("default"===t._queryIdentifier||za(a,t))){const l=Fa(a,t,n,i);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(r));const c=l.removed;if(o=l.events,!s){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),s=e.syncPointTree_.findOnPath(r,((e,t)=>Ba(t)));if(n&&!s){const t=e.syncPointTree_.subtree(r);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Ba(t)){return[Ua(t)]}{let e=[];return t&&(e=Oa(t)),Di(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const i=n[t],s=i.query,r=to(e,i);e.listenProvider_.startListening(oo(s),no(e,s),r.hashFn,r.onComplete)}}}if(!s&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(oo(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(io(t));e.listenProvider_.stopListening(oo(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=io(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Xa(e,t,n,i){const s=so(e,i);if(null!=s){const i=ro(s),r=i.path,a=i.queryId,o=xs(r,t);return ao(e,r,new Rr(Tr(a),o,n))}return[]}function Qa(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t._path;let r=null,a=!1;e.syncPointTree_.foreachOnPath(s,((e,t)=>{const n=xs(e,s);r=r||ja(t,n),a=a||Ba(t)}));let o,l=e.syncPointTree_.get(s);if(l?(a=a||Ba(l),r=r||ja(l,gs())):(l=new Pa,e.syncPointTree_=e.syncPointTree_.set(s,l)),null!=r)o=!0;else{o=!1,r=sr.EMPTY_NODE;e.syncPointTree_.subtree(s).foreachChild(((e,t)=>{const n=ja(t,gs());n&&(r=r.updateImmediateChild(e,n))}))}const c=za(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=io(t);Ce(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=Ha++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let h=Da(l,t,n,ea(e.pendingWriteTree_,s),r,o);if(!c&&!a&&!i){const n=Wa(l,t);h=h.concat(function(e,t,n){const i=t._path,s=no(e,t),r=to(e,n),a=e.listenProvider_.startListening(oo(t),s,r.hashFn,r.onComplete),o=e.syncPointTree_.subtree(i);if(s)Ce(!Ba(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!Cs(e)&&t&&Ba(t))return[Ua(t).query];{let e=[];return t&&(e=e.concat(Oa(t).map((e=>e.query)))),Di(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(oo(i),no(e,i))}}return a}(e,t,n))}return h}function $a(e,t,n){const i=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=ja(n,xs(e,t));if(i)return i}));return ra(i,t,s,n,!0)}function Ja(e,t){return Za(t,e.syncPointTree_,null,ea(e.pendingWriteTree_,gs()))}function Za(e,t,n,i){if(Cs(e.path))return eo(e,t,n,i);{const s=t.get(gs());null==n&&null!=s&&(n=ja(s,gs()));let r=[];const a=ms(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=da(i,a);r=r.concat(Za(o,l,e,t))}return s&&(r=r.concat(Na(s,e,i,n))),r}}function eo(e,t,n,i){const s=t.get(gs());null==n&&null!=s&&(n=ja(s,gs()));let r=[];return t.children.inorderTraversal(((t,s)=>{const a=n?n.getImmediateChild(t):null,o=da(i,t),l=e.operationForChild(t);l&&(r=r.concat(eo(l,s,a,o)))})),s&&(r=r.concat(Na(s,e,i,n))),r}function to(e,t){const n=t.query,i=no(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||sr.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=so(e,n);if(i){const n=ro(i),s=n.path,r=n.queryId,a=xs(s,t);return ao(e,s,new Ir(Tr(r),a))}return[]}(e,n._path,i):function(e,t){return Ja(e,new Ir({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return Ya(e,n,null,i)}}}}function no(e,t){const n=io(t);return e.queryToTagMap.get(n)}function io(e){return e._path.toString()+"$"+e._queryIdentifier}function so(e,t){return e.tagToQueryMap.get(t)}function ro(e){const t=e.indexOf("$");return Ce(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fs(e.substr(0,t))}}function ao(e,t,n){const i=e.syncPointTree_.get(t);Ce(i,"Missing sync point for query tag that we're tracking");return Na(i,n,ea(e.pendingWriteTree_,t),null)}function oo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ce(Ra,"Reference.ts has not been loaded"),Ra)(e._repo,e._path):e}class lo{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lo(t)}node(){return this.node_}}class co{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ks(this.path_,e);return new co(this.syncTree_,t)}node(){return $a(this.syncTree_,this.path_)}}const ho=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},uo=function(e,t,n){return e&&"object"===typeof e?(Ce(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?po(e[".sv"],t,n):"object"===typeof e[".sv"]?fo(e[".sv"],t):void Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},po=function(e,t,n){if("timestamp"===e)return n.timestamp;Ce(!1,"Unexpected server value: "+e)},fo=function(e,t,n){e.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&Ce(!1,"Unexpected increment value: "+i);const s=t.node();if(Ce(null!==s&&"undefined"!==typeof s,"Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const r=s.getValue();return"number"!==typeof r?i:r+i},go=function(e,t,n,i){return vo(t,new co(n,e),i)},mo=function(e,t,n){return vo(e,new lo(t),n)};function vo(e,t,n){const i=e.getPriority().val(),s=uo(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const i=e,r=uo(i.getValue(),t,n);return r!==i.getValue()||s!==i.getPriority().val()?new Xs(r,or(s)):e}{const i=e;return r=i,s!==i.getPriority().val()&&(r=r.updatePriority(new Xs(s))),i.forEachChild(Qs,((e,i)=>{const s=vo(i,t.getImmediateChild(e),n);s!==i&&(r=r.updateImmediateChild(e,s))})),r}}class _o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function yo(e,t){let n=t instanceof fs?t:new fs(t),i=e,s=ms(n);for(;null!==s;){const e=Xe(i.node.children,s)||{children:{},childCount:0};i=new _o(s,i,e),n=_s(n),s=ms(n)}return i}function bo(e){return e.node.value}function wo(e,t){e.node.value=t,Ao(e)}function ko(e){return e.node.childCount>0}function Co(e,t){Di(e.node.children,((n,i)=>{t(new _o(n,e,i))}))}function xo(e,t,n,i){n&&!i&&t(e),Co(e,(e=>{xo(e,t,!0,i)})),n&&i&&t(e)}function So(e){return new fs(null===e.parent?e.name:So(e.parent)+"/"+e.name)}function Ao(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===bo(e)&&!ko(e)}(n),s=Ye(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,Ao(e)):i||s||(e.node.children[t]=n.node,e.node.childCount++,Ao(e))}(e.parent,e.name,e)}const Eo=/[\[\].#$\/\u0000-\u001F\u007F]/,To=/[\[\].#$\u0000-\u001F\u007F]/,Mo=10485760,Io=function(e){return"string"===typeof e&&0!==e.length&&!Eo.test(e)},Ro=function(e){return"string"===typeof e&&0!==e.length&&!To.test(e)},Po=function(e,t,n,i){i&&void 0===t||No(tt(e,"value"),t,n)},No=function(e,t,n){const i=n instanceof fs?new Es(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ms(i));if("function"===typeof t)throw new Error(e+"contains a function "+Ms(i)+" with contents = "+t.toString());if(Ei(t))throw new Error(e+"contains "+t.toString()+" "+Ms(i));if("string"===typeof t&&t.length>Mo/3&&nt(t)>Mo)throw new Error(e+"contains a string greater than "+Mo+" utf8 bytes "+Ms(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,s=!1;if(Di(t,((t,r)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Io(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ms(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=nt(t),Ts(e)}(i,t),No(e,r,i),function(e){const t=e.parts_.pop();e.byteLength_-=nt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),n&&s)throw new Error(e+' contains ".value" child '+Ms(i)+" in addition to actual children.")}},Lo=function(e,t,n,i){if((!i||void 0!==n)&&!Ro(n))throw new Error(tt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Do=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lo(e,t,n,i)},Fo=function(e,t){if(".info"===ms(t))throw new Error(e+" failed = Can't modify data under /.info/")},Oo=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Io(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ro(e)}(n))throw new Error(tt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class jo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wo(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();null===n||Ss(r,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function zo(e,t,n){Wo(e,n),Uo(e,(e=>Ss(e,t)))}function Bo(e,t,n){Wo(e,n),Uo(e,(e=>As(e,t)||As(t,e)))}function Uo(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){t(s.path)?(Ho(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ho(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();yi&&ki("event: "+n.toString()),Wi(i)}}}const qo="repo_interrupt",Vo=25;class Go{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kr(),this.transactionQueueTree_=new _o,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ko(e,t,n){if(e.stats_=es(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new br(e.repoInfo_,((t,n,i,s)=>{Qo(e,t,n,i,s)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>$o(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ge(n)}catch($C){throw new Error("Invalid authOverride provided: "+$C)}}e.persistentConnection_=new Ps(e.repoInfo_,t,((t,n,i,s)=>{Qo(e,t,n,i,s)}),(t=>{$o(e,t)}),(t=>{!function(e,t){Di(t,((t,n)=>{Jo(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Zi[n]||(Zi[n]=t()),Zi[n]}(e.repoInfo_,(()=>new Ar(e.stats_,e.server_))),e.infoData_=new wr,e.infoSyncTree_=new qa({startListening:(t,n,i,s)=>{let r=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(r=Ka(e.infoSyncTree_,t._path,a),setTimeout((()=>{s("ok")}),0)),r},stopListening:()=>{}}),Jo(e,"connected",!1),e.serverSyncTree_=new qa({startListening:(t,n,i,s)=>(e.server_.listen(t,i,n,((n,i)=>{const r=s(n,i);Bo(e.eventQueue_,t._path,r)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Yo(e){const t=e.infoData_.getNode(new fs(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Xo(e){return ho({timestamp:Yo(e)})}function Qo(e,t,n,i,s){e.dataUpdateCount++;const r=new fs(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(s)if(i){const t=$e(n,(e=>or(e)));a=function(e,t,n,i){const s=so(e,i);if(s){const i=ro(s),r=i.path,a=i.queryId,o=xs(r,t),l=Ur.fromObject(n);return ao(e,r,new Pr(Tr(a),o,l))}return[]}(e.serverSyncTree_,r,t,s)}else{const t=or(n);a=Xa(e.serverSyncTree_,r,t,s)}else if(i){const t=$e(n,(e=>or(e)));a=function(e,t,n){const i=Ur.fromObject(n);return Ja(e,new Pr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,r,t)}else{const t=or(n);a=Ka(e.serverSyncTree_,r,t)}let o=r;a.length>0&&(o=ol(e,r)),Bo(e.eventQueue_,o,a)}function $o(e,t){Jo(e,"connected",t),!1===t&&function(e){il(e,"onDisconnectEvents");const t=Xo(e),n=kr();xr(e.onDisconnect_,gs(),((i,s)=>{const r=go(i,s,e.serverSyncTree_,t);Cr(n,i,r)}));let i=[];xr(n,gs(),((t,n)=>{i=i.concat(Ka(e.serverSyncTree_,t,n));const s=dl(e,t);ol(e,s)})),e.onDisconnect_=kr(),Bo(e.eventQueue_,gs(),i)}(e)}function Jo(e,t,n){const i=new fs("/.info/"+t),s=or(n);e.infoData_.updateSnapshot(i,s);const r=Ka(e.infoSyncTree_,i,s);Bo(e.eventQueue_,i,r)}function Zo(e){return e.nextWriteId_++}function el(e,t,n,i,s){il(e,"set",{path:t.toString(),value:n,priority:i});const r=Xo(e),a=or(n,i),o=$a(e.serverSyncTree_,t),l=mo(a,o,r),c=Zo(e),h=Va(e.serverSyncTree_,t,l,c,!0);Wo(e.eventQueue_,h),e.server_.put(t.toString(),a.val(!0),((n,i)=>{const r="ok"===n;r||Ai("set at "+t+" failed: "+n);const a=Ga(e.serverSyncTree_,c,!r);Bo(e.eventQueue_,t,a),sl(e,s,n,i)}));const u=dl(e,t);ol(e,u),Bo(e.eventQueue_,u,[])}function tl(e,t,n){let i;i=".info"===ms(t._path)?Ya(e.infoSyncTree_,t,n):Ya(e.serverSyncTree_,t,n),zo(e.eventQueue_,t._path,i)}function nl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qo)}function il(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];ki(t,...i)}function sl(e,t,n,i){t&&Wi((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let s=e;i&&(s+=": "+i);const r=new Error(s);r.code=e,t(r)}}))}function rl(e,t,n){return $a(e.serverSyncTree_,t,n)||sr.EMPTY_NODE}function al(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ul(e,t),bo(t)){const n=cl(e,t);Ce(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const i=n.map((e=>e.currentWriteId)),s=rl(e,t,i);let r=s;const a=s.hash();for(let c=0;c<n.length;c++){const e=n[c];Ce(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=xs(t,e.path);r=r.updateChild(i,e.currentOutputSnapshotRaw)}const o=r.val(!0),l=t;e.server_.put(l.toString(),o,(i=>{il(e,"transaction put response",{path:l.toString(),status:i});let s=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,s=s.concat(Ga(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();ul(e,yo(e.transactionQueueTree_,t)),al(e,e.transactionQueueTree_),Bo(e.eventQueue_,t,s);for(let e=0;e<i.length;e++)Wi(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Ai("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}ol(e,t)}}),a)}(e,So(t),n)}else ko(t)&&Co(t,(t=>{al(e,t)}))}function ol(e,t){const n=ll(e,t),i=So(n);return function(e,t,n){if(0===t.length)return;const i=[];let s=[];const r=t.filter((e=>0===e.status)),a=r.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const r=t[l],c=xs(n,r.path);let h,u=!1;if(Ce(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===r.status)u=!0,h=r.abortReason,s=s.concat(Ga(e.serverSyncTree_,r.currentWriteId,!0));else if(0===r.status)if(r.retryCount>=Vo)u=!0,h="maxretry",s=s.concat(Ga(e.serverSyncTree_,r.currentWriteId,!0));else{const n=rl(e,r.path,a);r.currentInputSnapshot=n;const i=t[l].update(n.val());if(void 0!==i){No("transaction failed: Data returned ",i,r.path);let t=or(i);"object"===typeof i&&null!=i&&Ye(i,".priority")||(t=t.updatePriority(n.getPriority()));const o=r.currentWriteId,l=Xo(e),c=mo(t,n,l);r.currentOutputSnapshotRaw=t,r.currentOutputSnapshotResolved=c,r.currentWriteId=Zo(e),a.splice(a.indexOf(o),1),s=s.concat(Va(e.serverSyncTree_,r.path,c,r.currentWriteId,r.applyLocally)),s=s.concat(Ga(e.serverSyncTree_,o,!0))}else u=!0,h="nodata",s=s.concat(Ga(e.serverSyncTree_,r.currentWriteId,!0))}Bo(e.eventQueue_,n,s),s=[],u&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===h?i.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):i.push((()=>t[l].onComplete(new Error(h),!1,null)))))}var o;ul(e,e.transactionQueueTree_);for(let l=0;l<i.length;l++)Wi(i[l]);al(e,e.transactionQueueTree_)}(e,cl(e,n),i),i}function ll(e,t){let n,i=e.transactionQueueTree_;for(n=ms(t);null!==n&&void 0===bo(i);)i=yo(i,n),n=ms(t=_s(t));return i}function cl(e,t){const n=[];return hl(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function hl(e,t,n){const i=bo(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Co(t,(t=>{hl(e,t,n)}))}function ul(e,t){const n=bo(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,wo(t,n.length>0?n:void 0)}Co(t,(t=>{ul(e,t)}))}function dl(e,t){const n=So(ll(e,t)),i=yo(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,(t=>{pl(e,t)})),pl(e,i),xo(i,(t=>{pl(e,t)})),n}function pl(e,t){const n=bo(t);if(n){const i=[];let s=[],r=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ce(r===t-1,"All SENT items should be at beginning of queue."),r=t,n[t].status=3,n[t].abortReason="set"):(Ce(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),s=s.concat(Ga(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===r?wo(t,void 0):n.length=r+1,Bo(e.eventQueue_,So(t),s);for(let e=0;e<i.length;e++)Wi(i[e])}}const fl=function(e,t){const n=gl(e),i=n.namespace;"firebase.com"===n.domain&&Si(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Xi(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new fs(n.pathString)}},gl=function(e){let t="",n="",i="",s="",r="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let h=e.indexOf("/");-1===h&&(h=e.length);let u=e.indexOf("?");-1===u&&(u=e.length),t=e.substring(0,Math.min(h,u)),h<u&&(s=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch($C){}t+="/"+e}return t}(e.substring(h,u)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ai("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,u)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),r=i}"ns"in d&&(r=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:a,scheme:o,pathString:s,namespace:r}},ml="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class vl{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ge(this.snapshot.exportVal())}}class _l{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class yl{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bl{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Cs(this._path)?null:ys(this._path)}get ref(){return new wl(this._repo,this._path)}get _queryIdentifier(){const e=yr(this._queryParams),t=Ni(e);return"{}"===t?"default":t}get _queryObject(){return yr(this._queryParams)}isEqual(e){if(!((e=it(e))instanceof bl))return!1;const t=this._repo===e._repo,n=Ss(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class wl extends bl{constructor(e,t){super(e,t,new vr,!1)}get parent(){const e=ws(this._path);return null===e?null:new wl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class kl{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new fs(e),n=xl(this.ref,e);return new kl(this._node.getChild(t),n,Qs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new kl(n,xl(this.ref,t),Qs))))}hasChild(e){const t=new fs(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Cl(e,t){return(e=it(e))._checkNotDeleted("ref"),void 0!==t?xl(e._root,t):e._root}function xl(e,t){return null===ms((e=it(e))._path)?Do("child","path",t,!1):Lo("child","path",t,!1),new wl(e._repo,ks(e._path,t))}function Sl(e,t){e=it(e),Fo("set",e._path),Po("set",t,e._path,!1);const n=new Oe;return el(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}class Al{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new vl("value",this,new kl(e.snapshotNode,new wl(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _l(this,e,t):null}matches(e){return e instanceof Al&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class El{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _l(this,e,t):null}createEvent(e,t){Ce(null!=e.childName,"Child events should have a childName.");const n=xl(new wl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new vl(e.type,this,new kl(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof El&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Tl(e,t,n,i,s){let r;if("object"===typeof i&&(r=void 0,s=i),"function"===typeof i&&(r=i),s&&s.onlyOnce){const t=n,i=(n,i)=>{tl(e._repo,e,o),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const a=new yl(n,r||void 0),o="value"===t?new Al(a):new El(t,a);return function(e,t,n){let i;i=".info"===ms(t._path)?Qa(e.infoSyncTree_,t,n):Qa(e.serverSyncTree_,t,n),zo(e.eventQueue_,t._path,i)}(e._repo,e,o),()=>tl(e._repo,e,o)}function Ml(e,t,n,i){return Tl(e,"value",t,n,i)}!function(e){Ce(!Ia,"__referenceConstructor has already been defined"),Ia=e}(wl),function(e){Ce(!Ra,"__referenceConstructor has already been defined"),Ra=e}(wl);const Il="FIREBASE_DATABASE_EMULATOR_HOST",Rl={};let Pl=!1;function Nl(e,t,n,i,s){let r=i||e.options.databaseURL;void 0===r&&(e.options.projectId||Si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ki("Using default host for project ",e.options.projectId),r="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let a,o,l=fl(r,s),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/portfolio/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Il]),o?(a=!0,r="http://".concat(o,"?ns=").concat(c.namespace),l=fl(r,s),c=l.repoInfo):a=!l.repoInfo.secure;const h=s&&a?new Hi(Hi.OWNER):new Ui(e.name,e.options,t);Oo("Invalid Firebase Database URL",l),Cs(l.path)||Si("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,i){let s=Rl[t.name];s||(s={},Rl[t.name]=s);let r=s[e.toURLString()];r&&Si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return r=new Go(e,Pl,n,i),s[e.toURLString()]=r,r}(c,e,h,new Bi(e.name,n));return new Ll(u,e)}class Ll{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ko(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wl(this._repo,gs())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Rl[t];n&&n[e.key]===e||Si("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),nl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Si("Cannot call "+e+" on a deleted database.")}}Ps.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ps.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){ci(_n),fn(new st("database",((e,t)=>{let{instanceIdentifier:n}=t;return Nl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wn(ai,oi,e),wn(ai,oi,"esm2017")}();const Dl=JSON.parse('{"data":[{"title":"Cube","status":"done","year":2024,"scope":"AI-Music (M.S.)","type":"individual","mainDescriptionEN":"\uc804\uc790 \uc74c\uc545 \ud569\uc8fc\ub97c \uc704\ud55c \ub514\uc9c0\ud138 \uc545\uae30 \ubc0f \ubab0\uc785 \uacf5\uac04 \ub514\uc790\uc778","mainDescriptionKR":"\ubcf8 \uc5f0\uad6c\ub294 \uc77c\ubc18 \ub300\uc911\uc774 \uc27d\uac8c \uc811\uadfc\ud558\uace0 \ubab0\uc785\ud560 \uc218 \uc788\ub294 \uc804\uc790 \uc74c\uc545 \uc559\uc0c1\ube14 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud558\ub294 \uc0c8\ub85c\uc6b4 \ud615\ud0dc\uc758 \uc778\ud130\ub799\ud2f0\ube0c \uacf5\uac04\uc744 \uc124\uacc4\ud558\uace0 \uad6c\ud604\ud558\ub294 \uac83\uc744 \ubaa9\ud45c\ub85c \ud55c\ub2e4. \uc774\ub97c \uc704\ud574 \ubcf8 \uc5f0\uad6c\ub294 \uc0ac\uc6b4\ub4dc \ub514\uc790\uc778\uc744 \uc9c4\ud589\ud558\uace0, \ud30c\uc77c\ub7ff \ud14c\uc2a4\ud2b8\ub97c \ud1b5\ud574 \ud53c\ub4dc\ubc31\uc744 \uc218\uc9d1\ud558\uc600\ub2e4. \uc774\ud6c4 \uc218\uc9d1\ub41c \ud53c\ub4dc\ubc31\uc744 \ubc14\ud0d5\uc73c\ub85c \uc545\uae30 \ub514\uc790\uc778\uacfc \uacf5\uac04 \ub514\uc790\uc778\uc744 \uc644\uc131\ud558\uc600\ub2e4. \uc774\ud6c4 \ud3c9\uac00 \uacfc\uc815\uc5d0\uc11c\ub294 \uc804\ubb38\uac00\uc640 \uc77c\ubc18 \ub300\uc911\uc744 \ub300\uc0c1\uc73c\ub85c \uc2e4\ud5d8\uc744 \uc9c4\ud589\ud558\uc600\uc73c\uba70, \uc804\ubb38\uac00 \ud3c9\uac00\uc5d0\uc11c\ub294 \uc545\ubcf4 \ubd84\uc11d\uacfc \uc791\uace1 \ubc29\uc2dd\uc5d0 \ucd08\uc810\uc744 \ub9de\ucd94\uc5b4 \uc2dc\uc2a4\ud15c\uc758 \uc74c\uc545\uc801 \ud45c\ud604\ub825\uacfc \uc778\ud130\ub799\ud2f0\ube0c \uc694\uc18c\uc758 \ud6a8\uacfc\ub97c \uac80\uc99d\ud558\uc600\ub2e4. \uc77c\ubc18 \ub300\uc911 \ud3c9\uac00\uc5d0\uc11c\ub294 \uc2dc\uc2a4\ud15c\uc758 \uc0ac\uc6a9\uc131, \ubab0\uc785\uac10, \ucc3d\uc758\uc801 \ud45c\ud604 \uac00\ub2a5\uc131 \ubc0f \ud611\uc5c5\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5\uc744 \ud3c9\uac00\ud558\uc600\ub2e4. \uc778\ud130\ubdf0 \ub370\uc774\ud130\ub294 \uc5b4\ud53c\ub2c8\ud2f0 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc744 \ud1b5\ud574 \ubd84\uc11d\ud558\uc5ec \uc8fc\uc694 \ud14c\ub9c8\ub97c \ub3c4\ucd9c\ud558\uc600\ub2e4. \ubcf8 \uc5f0\uad6c\uc5d0\uc11c \uace0\uc548\ub41c \uc545\uae30\uc640 \uacf5\uac04\uc740 \uc804\ubb38\uac00\uc640 \uc77c\ubc18 \ub300\uc911 \ubaa8\ub450\uc5d0\uac8c \ucc3d\uc758\uc801\uc774\uace0 \ubab0\uc785\uc801\uc778 \uc74c\uc545\uc801 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud558\ub294 \ub370 \uc720\ud6a8\ud55c \ub3c4\uad6c\uc784\uc774 \ud655\uc778\ub418\uc5c8\ub2e4. \uadf8\ub7ec\ub098 \uae30\uc220\uc801 \ud55c\uacc4\uc640 \uc0ac\uc6a9\uc790 \uc778\ud130\ud398\uc774\uc2a4 \uac1c\uc120\uc758 \ud544\uc694\uc131\ub3c4 \ub4dc\ub7ec\ub0ac\ub2e4. \ubcf8 \uc5f0\uad6c\ub294 \uc0c8\ub85c\uc6b4 \ub514\uc9c0\ud138 \uc545\uae30\uc758 \uc7a0\uc7ac\ub825\uacfc \uc0ac\uc6a9\uc131\uc5d0 \ub300\ud55c \ucd08\uae30 \ud3c9\uac00\ub97c \uc81c\uacf5\ud558\uba70, \ud5a5\ud6c4 \ub354\uc6b1 \ubc1c\uc804\ub41c \ub514\uc9c0\ud138 \uc545\uae30\ub97c \uac1c\ubc1c\ud558\uc5ec \uc74c\uc545\uc801 \ucc3d\uc758\uc131\uc744 \uc99d\uc9c4\uc2dc\ud0a4\ub294 \ub370 \uae30\uc5ec\ud560 \uc218 \uc788\uc744 \uac83\uc73c\ub85c \uae30\ub300\ub41c\ub2e4.","subDescription":"This study aims to design and implement a new type of interactive space that provides an electronic music ensemble experience easily accessible and engaging for the general public. To achieve this, the study conducted sound design and collected feedback through pilot testing. Based on the collected feedback, the instrument and space designs were finalized. In the evaluation phase, experiments were conducted targeting both experts and the general public. The expert evaluation focused on analyzing scores and composition methods to verify the system\'s musical expressiveness and the effectiveness of interactive elements. The evaluation for the general public assessed the system\'s usability, immersion, potential for creative expression, and impact on collaboration. Interview data were analyzed through an affinity diagram to identify key themes. The instruments and spaces devised in this study were confirmed to be effective tools in providing creative and immersive musical experiences for both experts and the general public. However, technical limitations and the need for user interface improvements were also revealed. This research provides an initial evaluation of the potential and usability of new digital instruments, expecting to contribute to enhancing musical creativity through the development of more advanced digital instruments in the future.","link":["https://soulmilk98.github.io/portfolio/Project/Cube/","\ube44\ub514\uc624 \ubc0f \uc74c\uc545"],"url":"/Cube","img":["project_img/Cube1.png","project_img/Cube2.png"],"vid":[""],"youtube":["https://www.youtube.com/embed/ZI4hDqxyyLg"],"pdf":["project_pdf/Cube",31]},{"title":"Unseen Forces ","status":"done","year":2023,"scope":"Media Art","type":"team(3 people)","mainDescriptionEN":"Unseen Forces: Social Dynamics in a Changing Force  ","mainDescriptionKR":"\uc774 \uc791\ud488\uc5d0\uc11c \uc6b0\ub9ac\ub294 \uc778\ub958\uc138\ub77c\ub294 \uac1c\ub150\uc5d0 \ub300\ud574 \uc0c8\ub85c\uc6b4 \uc2dc\uc120\uc73c\ub85c \uc778\uac04\uc774 \uc0ac\ud68c\uc801 \uc0c1\ud638\uc791\uc6a9\uc744 \ud1b5\ud574 \uc774 \uc2dc\ub300\ub97c \uacc4\uc18d\ud574\uc11c \ub9cc\ub4e4\uace0 \uc720\uc9c0\ud558\uace0 \ud30c\uad34\ud558\uace0 \uc788\ub2e4\ub294 \uac83\uc744 \ud45c\ud604\ud588\ub2e4.","subDescription":"In this work, we speculated Anthropocene that humans continue to create, maintain, and destroy through social interaction, with a new perspective.","link":[""],"url":"/UnseenForces","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/BNvFH9zUGHc"],"pdf":["project_pdf/UnseenForces",4]},{"title":"Mistique Mirror","status":"done","year":2022,"scope":"Media Art (Product)","type":"team(2 people)","mainDescriptionEN":"Mistique Mirror: A mirror that morphs you into a different identity. ","mainDescriptionKR":"","subDescription":"Have you ever want to be a hero? Or a villian? Or just a someone else? Here\'s special mirror for you.","link":[],"url":"/MistiqueMirror","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/bCuZBsXxobU"],"pdf":["project_pdf/MistiqueMirror",3]},{"title":"Salmon","status":"done","year":2021,"scope":"Product Design","type":"individual","mainDescriptionEN":"Signal = Fire = Oddly Satisfying = \uba4d~ \ub54c\ub9ac\uae30","mainDescriptionKR":"\uc9c0\uae08 \uc6b0\ub9ac\ub294 \uc2e0\ud638\uac00 \ubcf4\uc774\uc9c0 \uc54a\ub294 \uc2dc\ub300\uc5d0 \uc0b4\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc640\uc774\ud30c\uc774, \ube14\ub8e8\ud22c\uc2a4\ub4e4\uc740 \uacfc\uac70\uc758 \ubd09\ud654(\u70fd\u706b)\uc640 \ub2ec\ub9ac \ubcf4\uc774\uc9c0 \uc54a\uace0, \uc2ec\uc9c0\uc5b4 0\uacfc 1\ub85c \uc774\ub8e8\uc5b4\uc9c4 \ub098\uc5f4\uc744 \uc8fc\uace0 \ubc1b\uc2b5\ub2c8\ub2e4. \uc815\ubcf4\ub294 \ube60\ub974\uace0 \uac04\ud3b8\ud558\uac8c \uc804\ub2ec\ub418\uc9c0\ub9cc, \ubcf4\ud1b5 \uc0ac\ub78c\ub4e4\uc774 \uc774\ub97c \uc751\uc6a9\ud574\uc11c \ubb34\uc5b8\uac00\ub97c \ud558\uae30\uc5d0\ub294 \uc5b4\ub835\uc2b5\ub2c8\ub2e4. \uc65c\ub0d0\ud558\uba74 \uadf8\ub4e4\uc5d0\uac8c \uc774\ub7f0 \ud604\ub300\uae30\uc220\uc740 \ubc84\ud2bc \uba87 \uac1c\ub85c \uc6d0\ud558\ub294 \uac83\uc744 \uc5bb\uc744 \uc218 \uc788\ub294 \ub9c8\ubc95 \uc0c1\uc790\uc774\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.","subDescription":"Salmon\uc740 \ub9c8\ubc95\uacfc \uac19\uc740 \ub514\uc9c0\ud138 \uc138\uc0c1\uc744 \ub450 \uc190\uc73c\ub85c \ub9cc\uc9c0\uace0 \uc870\ub9bd\ud558\uba74\uc11c \ud0d0\ud5d8\ud558\ub294 \ud0a4\ud2b8\uc785\ub2c8\ub2e4. \ub79c\ub364\ud558\uac8c \uc870\ub9bd\ub41c \ud0a4\ud2b8\ub294 \uc5b4\ub290 \uc21c\uac04 \ud2b9\uc815 \ud328\ud134\uc744 \ubc18\ubcf5\ud558\uac8c \ub418\uace0, \uc774\ub294 \ubb18\ud55c \ub9cc\uc871\uac10\uc744 \uc90d\ub2c8\ub2e4. \uacfc\uac70 \uc790\uc5f0\uc774 \uadf8\ub7ac\uace0 \uc61b \uc120\uc870\ub4e4\uc774 \ubc1c\uacac\ud55c \ubd88\uc774 \uadf8\ub7ac\ub358 \uac83\ucc98\ub7fc.","link":[],"url":"/Salmon","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/4nMuHNx8R0o"],"pdf":["project_pdf/Salmon",4]},{"title":"Marble","status":"done","year":2021,"scope":"UI/UX","type":"team(5 people)","mainDescriptionEN":"","mainDescriptionKR":"\uc190 \uc548\uc5d0\uc11c \uc2dc\uc791\ub418\ub294 \uc0c9\ub2e4\ub978 \uc8fc\uc2dd \ub300\ud654","subDescription":"\ud604\ub300 \uc0ac\ud68c\uc5d0\uc11c \uc6b0\ub9ac\ub294 \uc815\ubcf4\uc758 \ud64d\uc218 \uc18d\uc5d0 \uc0b4\uace0\uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc6b0\ub9ac\ub294 \ub9ce\uc740 \uc815\ubcf4\ub4e4 \uc911 \uc6b0\ub9ac\uc758 \uac1c\uc778 \ub370\uc774\ud130\ub97c \uae30\ubc18\uc73c\ub85c \uac78\ub7ec\uc9c4 \uc815\ubcf4\ub9cc\uc744 \uc811\ud558\uac8c \ub418\uc8e0. \uc5b8\ub73b \ubcf4\uba74 \uc6b0\ub9ac \uac01\uc790\uac00 \ud544\uc694\ud55c \uc815\ubcf4\ub4e4\uc744 \uc81c\uacf5\ud574 \uc8fc\ub294 \ub4ef \ubcf4\uc774\uc9c0\ub9cc, \uc790\uc2e0\uacfc \ub2e4\ub978 \uc758\uacac\uacfc \uc815\ubcf4\ub97c \ubb34\uc2dc\ud558\uace0, \uc774\ub294 \ud655\uc99d\ud3b8\ud5a5\uc73c\ub85c \uc774\uc5b4\uc9c0\uac8c \ub429\ub2c8\ub2e4. marble \uc740 \uc6b0\ub9ac\uc640 \ub2e4\ub978 \uc2dc\uac01\uc744 \uac00\uc9c4 \uc0ac\ub78c\uc744 \ub9cc\ub098\uac8c \ud558\uc5ec, \uc880 \ub354 \uade0\ud615\uc7a1\ud788\uace0 \uac1d\uad00\uc801\uc73c\ub85c \uc815\ubcf4\ub97c \ubc1b\uc544\ub4dc\ub824 \ub354 \ub098\uc740 \ud22c\uc790\ub97c \ud560 \uc218 \uc788\ub294 \ubb38\ud654\ub97c \ub9cc\ub4e4\uace0\uc790 \ud558\ub294 \ud504\ub85c\uc81d\ud2b8 \uc785\ub2c8\ub2e4.","link":[],"url":"/Marble","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/N0h2RMHtmOo"],"pdf":["project_pdf/Marble",4]},{"title":"Makerble","status":"done","year":2020,"scope":"Engineering/Branding","type":"team(Leader)","mainDescriptionEN":"","mainDescriptionKR":"\u201c\ub098\ub294 \uc774\ub7f0 \uac83\ub3c4 \ub9cc\ub4e4\uc5b4\uc11c \uc368!\u201d","subDescription":"Makerble\uc740 \uc544\uc774\ub4e4\uc5d0\uac8c \uc131\uacf5\ud558\ub294 \uacbd\ud5d8\uc744 \uc8fc\ub294 \uacfc\ud559, \uacf5\ud559 \ud0a4\ud2b8 \uad6c\ub3c5 \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4. Makerble\uc740 \ud559\uc0dd\ub4e4\uc774 \uacfc\ud559 \uacf5\ud559\uc744 \ubb34\uac81\uace0 \uc9c4\uc9c0\ud55c \ud559\ubb38\uc774 \uc544\ub2c8\ub77c \uc990\uac81\uac8c \uacbd\ud5d8\ud560 \uc218 \uc788\ub294 \ucde8\ubbf8 \ubd84\uc57c\ub77c\uace0 \uc0dd\uac01\ud558\uae30\ub97c \ubc14\ub78d\ub2c8\ub2e4. \ub610, \ud559\uc0dd\ub4e4\uc774 \ud55c \uc904\uc11c\uae30 \ud615\ud0dc\uc758 \ud3c9\uac00 \ubb38\ud654\uc5d0\uc11c \ubc97\uc5b4\ub098 \uc790\uc2e0\uc758 \ucc3d\uc791\ubb3c\uc744 \uc790\uc2e0\uc758 \uc801\uc131\uacfc \ucc3d\uc758\ub825\uc744 \ud65c\uc6a9\ud574 \uacf5\uc720\ud558\uace0 \ubc1c\uc804\ud574 \ub098\uac00\uae30\ub97c \uc6d0\ud569\ub2c8\ub2e4. ","link":[],"url":"/makerble","img":[""],"vid":[""],"youtube":[""],"pdf":["project_pdf/makerble",4]},{"title":"Enchanticket","status":"done","year":2019,"scope":"Product Design/UX","type":"team(3 people)","mainDescriptionEN":"","mainDescriptionKR":"\ud2f0\ucf13\uc5d0 \uc8fc\ubb38\uc744 \uc678\uc6b0\uba74, \uadf8\ub54c\uc758 \ubaa8\uc2b5\uc774 \ub5a0\uc624\ub985\ub2c8\ub2e4. \uc218\ub9ac \uc218\ub9ac \ub9c8\uc218\ub9ac~ \uc58d!","subDescription":"\uc5ec\ud589 \uc911\uc5d0\ub294 \uae30\uc5b5\ud558\uace0 \uc2f6\uc740 \ud2b9\ubcc4\ud55c \uc21c\uac04\ub4e4\uc774 \uac00\ub4dd\ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uadf8 \uc21c\uac04\uc744 \uae30\uc5b5\ud558\uae30 \uc704\ud574 \uc6b0\ub9ac\ub294 \uc0ac\uc9c4\uc744 \ucc0d\uc2b5\ub2c8\ub2e4. \uae30\uc220\uc758 \ubc1c\ub2ec\ub85c \uc0ac\uc9c4\uc744 \ucc0d\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc27d\uace0 \uac04\ub2e8\ud574\uc9c0\uba74\uc11c, \ub9ce\uc740 \uae30\uc5b5\ub4e4\uc774 \uc0ac\uc9c4\uc5d0 \ub2f4\uae41\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \ub514\uc9c0\ud138 \uc0ac\uc9c4\uc744 \uc5b4\ub290\ub54c\ubcf4\ub2e4 \ub9ce\uc774 \ucc0d\uac8c\ub41c \uac83\uc5d0 \ube44\ud574 \uae30\uae30\uc5d0 \uc800\uc7a5\ub41c \uc0ac\uc9c4\uc744 \ub2e4\uc2dc \ubcf4\ub294 \ud589\uc704\ub294 \uadf8\ub9ac \ub9ce\uc774 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. EnchanTicket\uc740 AR \uae30\uc220\uc744 \ud65c\uc6a9\ud558\uc5ec \uc5ec\ud589 \uc911\uc5d0 \uc0dd\uae34 \ud2f0\ucf13, \uc601\uc218\uc99d\uacfc \uac19\uc740 \uc885\uc774 \uae30\ub150\ud488\uacfc \uadf8 \uc21c\uac04\uc758 \uc0ac\uc9c4\uc744 \uc5f0\uacb0\ud568\uc73c\ub85c\uc368 \ub514\uc9c0\ud138 \uc0ac\uc9c4\uc744 \ub2e4\uc2dc \ubcf4\uba70 \uc18c\uc911\ud55c \uc21c\uac04\ub4e4\uc744 \ub2e4\uc2dc \uae30\uc5b5\ub098\uac8c \ud569\ub2c8\ub2e4.","link":[],"url":"/Enchanticket","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/gpSdbeyojvg"],"pdf":["project_pdf/Enchanticket",3]},{"title":"RAPID","status":"done","year":2023,"scope":"LLM-HCI","type":"team(Developer)","mainDescriptionEN":"Designing Prompt Analytics Dashboards to Analyze Student-ChatGPT Interactions in EFL Writing","mainDescriptionKR":"ChatGPT\ub97c \uad50\uc721 \ud658\uacbd\uc5d0 \ud1b5\ud569\ud558\uba74\uc11c \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc704\ud5d8 \uc694\uc18c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574, 6\uba85\uc758 EFL(\uc678\uad6d\uc778\uc744 \uc704\ud55c \uc601\uc5b4 \uad50\uc721)\uad50\uc0ac\ub97c \ub300\uc0c1\uc73c\ub85c \ud55c \'Prompt Analytics Dashboard (PAD)\' \ud504\ub85c\ud1a0\ud0c0\uc785 RAPID\ub97c \uac1c\ubc1c\ud588\uc2b5\ub2c8\ub2e4. \ub300\uc2dc\ubcf4\ub4dc\uc5d0\uc11c\ub294 \ud559\uc0dd\uacfc ChatGPT \uac04\uc758 \ucc44\ud305 \uae30\ub85d\uacfc \uc5d0\uc138\uc774 \ud3b8\uc9d1 \uae30\ub85d\uc744 \uc2dc\uac01\ud654\ud574, \uad50\uc0ac\ub4e4\uc774 \ud559\uc0dd \ud589\ub3d9\uc744 \ubd84\uc11d\ud558\uace0, \ud559\uc2b5 \uacfc\uc815\uc744 \uc124\uacc4\ud558\uba70, \uad50\uc218 \uae30\uc220\uc744 \uac1c\ubc1c\ud558\ub294 \ub370 \ub3c4\uc6c0\uc744 \uc90d\ub2c8\ub2e4.","subDescription":"While ChatGPT has significantly impacted education by offering personalized resources for students, its integration into educational settings poses unprecedented risks, such as inaccuracies and biases in AI-generated content, plagiarism and over-reliance on AI, and privacy and security issues. To help teachers address such risks, we conducted a two-phase iterative design process that comprises surveys, interviews, and prototype demonstration involving six EFL (English as a Foreign Language) teachers, who integrated ChatGPT into semester-long English essay writing classes. Based on the needs identified during the initial survey and interviews, we developed a prototype of Prompt Analytics Dashboard (PAD) that integrates the essay editing history and chat logs between students and ChatGPT. Teacher\'s feedback on the prototype informs additional features and unmet needs for designing future PAD, which helps them (1) analyze contextual analysis of student behaviors, (2) design an overall learning loop, and (3) develop their teaching skills.","link":["https://arxiv.org/abs/2405.19691","\ub17c\ubb38 \ub9c1\ud06c"],"url":"/","img":["project_img/RAPID2.png","project_img/RAPID.png"],"vid":[""],"youtube":[""],"pdf":[""]},{"title":"NAVER : BITE","status":"done","year":2023,"scope":"UI/UX","type":"TA","mainDescriptionEN":"ID403 System Design","mainDescriptionKR":"GenZ\uac00 \uc0ac\ub791\ud558\ub294 \uacf5\uac04 \uadf8 \uacbd\ud5d8\uc774 \ub354\uc6b1 \uc990\uac81\ub3c4\ub85d: \uc0c8\ub85c\uc6b4 \ub124\uc774\ubc84 \uacf5\uac04 \uc815\ubcf4 \uc11c\ube44\uc2a4","subDescription":"Bite\ub294 \ucde8\ud5a5 \uacf5\uac04\uc758 \uc990\uac70\uc6c0\uc744 \ub193\uce58\uc9c0 \uc54a\uace0 \uacbd\ud5d8\ud558\uae30\ub97c \uc6d0\ud558\ub294 \ubc29\ubb38\uc790\ub4e4\uc744 \uc704\ud55c \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uacf5\uac04\uc744 \ubc29\ubb38\ud558\ub294 GenZ\ub4e4\uc774 \uacf5\uac04\uc758 \uc990\uac70\uc6c0\uc5d0 \uc811\uadfc\ud558\ub294 \uac83\uc774 \uc26c\uc6cc\uc9c0\uace0, \uacf5\uac04\uc5d0\uc11c \ubc1c\uacac\ud55c \ucde8\ud5a5\uc758 \uc990\uac70\uc6c0\uc774 \uc77c\uc0c1\uc5d0\uc11c\ub3c4 \uc774\uc5b4\uc9c8 \uc218 \uc788\ub294 \uc11c\ube44\uc2a4\ub97c \ub514\uc790\uc778\ud588\uc2b5\ub2c8\ub2e4.","link":[],"url":"/Bite","img":[""],"vid":[""],"youtube":["https://www.youtube.com/embed/4kygZvWSBCQ"],"youtube_sub":["https://www.youtube.com/embed/SI5pfyZjD50","https://www.youtube.com/embed/UZo3LDJgRIw"],"pdf":["project_pdf/Bite",10]},{"title":"\uac00\ub85c\uc120\uc6a9","status":"mus","year":"","scope":"","type":"","mainDescriptionEN":"","mainDescriptionKR":"","subDescription":"","link":[],"url":"/","img":[""],"vid":[""],"youtube":[""],"pdf":[""]},{"title":"\uc740\ub730\ub9c8\uc744 APT","status":"music","year":"2023","scope":"","type":"Compilation","mainDescriptionEN":"","mainDescriptionKR":"","subDescription":"","linkCenter":["https://soundcloud.com/flat-fish/sets/eunthlapt","\uc740\ub730\ub9c8\uc744\uc544\ud30c\ud2b8(23.03.15.)"],"listCenter":["","001 \uc740\ub730\ub9c8\uc744 APT (title)","002 Open all day (feat. Kush Coma)","003 3(Three) (feat. \uc131\ubc30)","004 After Club (feat. Kush Coma)","005 Braided (JINU solo)","006 Soul Cry (feat. \uc131\ubc30)","007 Midnight (feat. \uc131\ubc30, Cheshire)","008 \uafc8 (\ub119\uce58 solo)","009 (Bonus) 220318 Beat","010 (Bonus) 221008 Beat"],"link":[],"url":"/EnthlAPT","img":["project_img/EnthlAPT.jpg"],"vid":[""],"youtube":[""],"pdf":[""]},{"title":"\ub119\uce5802_\uc815\ubb3c\uc5d0 \ub300\ud55c \uac10\uc0c1","status":"music","year":"2021","scope":"","type":"Solo","mainDescriptionEN":"","mainDescriptionKR":"","subDescription":"","linkCenter":["https://soundcloud.com/flat-fish/sets/flatfish02","\ub119\uce58 02_\uc815\ubb3c\uc5d0 \ub300\ud55c \uac10\uc0c1"],"listCenter":["","001 \ub098\ub294 \ub119\uce58\ub2e4 (intro)","002 Will never be fine.","003 \ub098\ubb34","004 I will never be fine RE (feat. JINU)","005 \uae38","006 \ubc84\ub2c8\ub2c8","007 Cry song (outro)"],"link":[],"url":"/flatfish02","img":["project_img/flatfish02.jpg"],"vid":[""],"youtube":[""],"pdf":[""]},{"title":"\ub119\uce5801","status":"music","year":"2019","scope":"","type":"Solo","mainDescriptionEN":"","mainDescriptionKR":"","subDescription":"","linkCenter":["https://soundcloud.com/flat-fish/sets/01a","\ub119\uce58 01"],"listCenter":["","01. Overnight","02. Realfakeee(feat. \uae40\uaddc\ud638)","03. \ud14c","04. \ucca0\ubd80\uc9c0(feat. LSB)"],"link":[],"url":"/flatfish01","img":["project_img/flatfish01.jpg"],"vid":[""],"youtube":[""],"pdf":[""]},{"title":"Blame-O-Matic","status":"done","year":2023,"scope":"LLM-HCI","type":"team(Engineer)","mainDescriptionEN":"\uc804\uc790 \uc74c\uc545 \ud569\uc8fc\ub97c \uc704\ud55c \ub514\uc9c0\ud138 \uc545\uae30 \ubc0f \ubab0\uc785 \uacf5\uac04 \ub514\uc790\uc778","mainDescriptionKR":"\ubcf8 \uc5f0\uad6c\ub294 \uc778\ud130\ub799\ud2f0\ube0c \uc7a5\uce58 \\"\ube14\ub808\uc784-\uc624-\ub9e4\ud2f1\\"\uc758 \ub514\uc790\uc778\uc744 \ud1b5\ud574 \ud3ed\ub825\uc801\uc778 \ucda9\ub3d9 \ud574\uc18c\ub97c \uc704\ud55c \uc0dd\uc131\ud615 AI\uc758 \ud65c\uc6a9 \uac00\ub2a5\uc131\uc744 \ud0d0\uad6c\ud55c\ub2e4. \ube14\ub808\uc784-\uc624-\ub9e4\ud2f1\uc740 \ucd5c\uc18c\ud55c\uc758 \ub2e8\uc5b4\ub97c \uc785\ub825\ubc1b\ub294 \uac83\ub9cc\uc73c\ub85c \ud574\ub2f9 \ub300\uc0c1\uc774 \ud574\ub97c \uc785\uc744 \uc218 \uc788\ub294 \uac00\uc0c1\uc758 \uc2dc\ub098\ub9ac\uc624\ub97c \uc0dd\uc131\ud558\uc5ec \ubd80\uc815\uc801\uc778 \uc0dd\uac01\uc5d0 \ub300\ud55c \ub300\ub9ac \ub9cc\uc871\uc744 \uc81c\uacf5\ud55c\ub2e4. \ubcf8 \uc5f0\uad6c\uc5d0\uc11c\ub294 \uc778\ud130\ubdf0\uc640 \uc544\uc774\ub514\uc5b4 \ub3c4\ucd9c\uc744 \ube44\ub86f\ud55c \ud0d0\uc0c9\uc801\uc778 \uc0ac\uc6a9\uc790 \uc5f0\uad6c\ub97c \ud1b5\ud574 \ucc38\uac00\uc790\ub4e4\uc758 \ubc18\uc751\uacfc \uc7a5\uce58\uc5d0 \ub300\ud55c \uc778\uc2dd\uc744 \uad00\ucc30\ud558\uc600\uc73c\uba70, \ubd80\uc815\uc801\uc778 \uc0dd\uac01\uacfc \uad00\ub828\ud558\uc5ec \uc0dd\uc131\ud615 AI\ub97c \uc0ac\uc6a9\ud558\ub294 \ub370 \ud544\uc694\ud55c \ud604\uc7a5 \uc9c0\uc2dd\uc744 \uc218\uc9d1\ud558\uc600\ub2e4. \ubcf8 \uc5f0\uad6c\ub294 \uacfc\uc7a5\ub41c \ud48d\uc790\uc640 \ub0c9\uc18c\ub97c \uc0ac\uc6a9\ud558\ub294 \ube14\ub808\uc784-\uc624-\ub9e4\ud2f1\uc758 \ub514\uc790\uc778\uc774 \uc0ac\uc6a9\uc790\ub4e4\uc774 \uc790\uc2e0\uc758 \ubd80\uc815\uc801\uc778 \uc0dd\uac01\uc744 \uc5b4\ub5bb\uac8c \ud574\uc18c\ud558\uace0, \uadf8\ub7ec\ud55c \uac10\uc815\uc758 \uc911\uc694\uc131\uc744 \uc0c8\ub86d\uac8c \ubc1c\uacac\ud558\ub3c4\ub85d \ub3c4\uc654\ub294\uc9c0 \ubcf4\uace0\ud55c\ub2e4. \ubcf8 \uc5f0\uad6c\ub294 \uc0dd\uc131\ud615 AI\ub97c \uc774\uc6a9\ud574 \ubd88\ud3b8\ud55c \uac10\uc815\uc744 \ub2e4\ub8e8\ub354\ub77c\ub3c4 \uc0ac\uc6a9\uc790\ub4e4\uc5d0\uac8c \ud658\uc601\ubc1b\uc744 \uc218 \uc788\uc73c\uba70, \uc758\ubbf8 \uc788\ub294 \uacbd\ud5d8\uc744 \uc548\uc815\uc801\uc73c\ub85c \uc81c\uacf5\ud560 \uc218 \uc788\uc74c\uc744 \uc2dc\uc0ac\ud55c\ub2e4.","subDescription":"This study explores the use of generative AIs to release violent urges through the design of an interactive artifact, the Blame-O-Matic. The device accepts few words of input and generates fictional scenarios in which a target could be harmed, providing vicarious satisfaction for negative emotions. Through an exploratory user study involving open-ended interviews and ideation, we observed participants\' reactions and perceptions of the device and gathered situated knowledge for using generative AIs to address the negative thoughts. The study reports how the blame-o-matic, which employs exaggerated sarcasm and cynicism, helps users release their negative thoughts and further discover the significance of these emotions in their lives. Our study suggests that generative AIs can address uncomfortable emotions in ways that users find both welcoming and meaningful.","link":["https://library.kaist.ac.kr/search/detail/view.do?bibCtrlNo=1096671&flag=dissertation","\ub17c\ubb38 \uc6d0\ubcf8"],"url":"/BlameOMatic","img":["project_img/BlameOMatic1.png","project_img/BlameOMatic2.png","project_img/BlameOMatic3.png","project_img/BlameOMatic4.png"],"vid":[""],"youtube":["https://www.youtube.com/embed/IyjvNkQkQ9I"],"pdf":[""]}]}'),Fl=yn({apiKey:"AIzaSyAWHUC8Rq7NxVz9hevcqQUUH23e2-qm3w4",authDomain:"portfolio-79fe6.firebaseapp.com",databaseURL:"https://portfolio-79fe6-default-rtdb.firebaseio.com",projectId:"portfolio-79fe6",storageBucket:"portfolio-79fe6.appspot.com",messagingSenderId:"844719877281",appId:"1:844719877281:web:3542b9227de6ec4385d4e0"}),Ol=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn(),t=arguments.length>1?arguments[1]:void 0;const n=gn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=De("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=it(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Si("Cannot call useEmulator() after instance has already been initialized.");const s=e._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Si('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Hi(Hi.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:je(i.mockUserToken,e.app.options.projectId);r=new Hi(t)}!function(e,t,n,i){e.repoInfo_=new Xi("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(s,t,n,r)}(n,...e)}return n}(Fl);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn(),t=arguments.length>1?arguments[1]:void 0;e=it(e);const n=gn(e,si).getImmediate({identifier:t}),i=De("storage");i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken="string"===typeof s?s:je(s,e.app.options.projectId))}(e,t,n,i)}(n,...i)}(Fl);var jl,Wl,zl,Bl,Ul,Hl,ql,Vl,Gl,Kl,Yl,Xl,Ql;function $l(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(s){t[i]=s,e.apply(n,t)}})}function Jl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zl(e,t){Jl(e,t),t.add(e)}function ec(e,t,n){Jl(e,t),t.set(e,n)}function tc(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function nc(e,t,n){return n(tc(e,t))}function ic(e,t){return e.get(tc(e,t))}function sc(e,t,n){return e.set(tc(e,t),n),n}function rc(e){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(e)}function ac(e){var t=function(e,t){if("object"!=rc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=rc(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rc(t)?t:t+""}function oc(e,t,n){return(t=ac(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}jl=Dl,Sl(Cl(Ol,"/"),jl).then((()=>{console.log("Data successfully uploaded to Firebase Realtime Database")})).catch((e=>{console.error("Error uploading data to Firebase Realtime Database: ",e)}));var lc={d:(e,t)=>{for(var n in t)lc.o(t,n)&&!lc.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},cc=globalThis.pdfjsLib={};lc.d(cc,{AbortException:()=>wh,AnnotationEditorLayer:()=>vC,AnnotationEditorParamsType:()=>Cc,AnnotationEditorType:()=>kc,AnnotationEditorUIManager:()=>dp,AnnotationLayer:()=>My,AnnotationMode:()=>wc,CMapCompressionType:()=>nh,ColorPicker:()=>iw,DOMSVGFactory:()=>vu,DrawLayer:()=>MC,FeatureTest:()=>Sh,GlobalWorkerOptions:()=>xg,ImageKind:()=>Rc,InvalidPDFException:()=>vh,MissingPDFException:()=>_h,OPS:()=>ih,Outliner:()=>sb,PDFDataRangeTransport:()=>yv,PDFDateString:()=>Mu,PDFWorker:()=>Rv,PasswordResponses:()=>sh,PermissionFlag:()=>xc,PixelsPerInch:()=>Xh,RenderingCancelledException:()=>yu,TextLayer:()=>Jm,UnexpectedResponseException:()=>yh,Util:()=>Eh,VerbosityLevel:()=>th,XfaLayer:()=>n_,build:()=>Jv,createValidAbsoluteUrl:()=>dh,fetchData:()=>fu,getDocument:()=>gv,getFilenameFromUrl:()=>ku,getPdfFilenameFromUrl:()=>Cu,getXfaPageViewport:()=>Iu,isDataScheme:()=>bu,isPdfFile:()=>wu,noContextMenu:()=>Au,normalizeUnicode:()=>Ph,renderTextLayer:()=>ov,setLayerDimensions:()=>Lu,shadow:()=>ph,updateTextLayer:()=>lv,version:()=>$v});const hc="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),uc=[1,0,0,1,0,0],dc=[.001,0,0,.001,0,0],pc=1.35,fc=1,gc=2,mc=4,vc=16,_c=32,yc=64,bc=256,wc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},kc={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Cc={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},xc={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Sc=0,Ac=1,Ec=2,Tc=3,Mc=3,Ic=4,Rc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Pc=1,Nc=2,Lc=3,Dc=4,Fc=5,Oc=6,jc=7,Wc=8,zc=9,Bc=10,Uc=11,Hc=12,qc=13,Vc=14,Gc=15,Kc=16,Yc=17,Xc=20,Qc=1,$c=2,Jc=3,Zc=4,eh=5,th={ERRORS:0,WARNINGS:1,INFOS:5},nh={NONE:0,BINARY:1},ih={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},sh={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rh=th.WARNINGS;function ah(e){Number.isInteger(e)&&(rh=e)}function oh(){return rh}function lh(e){rh>=th.INFOS&&console.log("Info: ".concat(e))}function ch(e){rh>=th.WARNINGS&&console.log("Warning: ".concat(e))}function hh(e){throw new Error(e)}function uh(e,t){e||hh(t)}function dh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch{}}const i=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function ph(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const fh=function(){function e(t,n){this.constructor===e&&hh("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class gh extends fh{constructor(e,t){super(e,"PasswordException"),this.code=t}}class mh extends fh{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class vh extends fh{constructor(e){super(e,"InvalidPDFException")}}class _h extends fh{constructor(e){super(e,"MissingPDFException")}}class yh extends fh{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class bh extends fh{constructor(e){super(e,"FormatError")}}class wh extends fh{constructor(e){super(e,"AbortException")}}function kh(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||hh("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let s=0;s<t;s+=n){const r=Math.min(s+n,t),a=e.subarray(s,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Ch(e){"string"!==typeof e&&hh("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}function xh(e){const t=Object.create(null);for(const[n,i]of e)t[n]=i;return t}class Sh{static get isLittleEndian(){return ph(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return ph(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return ph(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var e;return"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.platform)?ph(this,"platform",{isMac:navigator.platform.includes("Mac")}):ph(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return ph(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ah=Array.from(Array(256).keys(),(e=>e.toString(16).padStart(2,"0")));class Eh{static makeHexColor(e,t,n){return"#".concat(Ah[e]).concat(Ah[t]).concat(Ah[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),r=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],s[0],r[0]),Math.min(n[1],i[1],s[1],r[1]),Math.max(n[0],i[0],s[0],r[0]),Math.max(n[1],i[1],s[1],r[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],a=(n+r)/2,o=Math.sqrt((n+r)**2-4*(n*r-s*i))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>r?null:[n,s,i,r]}static bezierBoundingBox(e,t,n,i,s,r,a,o,l){return l?(l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o)):l=[Math.min(e,a),Math.min(t,o),Math.max(e,a),Math.max(t,o)],tc(Eh,this,Mh).call(this,e,n,s,a,t,i,r,o,3*(3*(n-s)-e+a),6*(e-2*n+s),3*(n-e),l),tc(Eh,this,Mh).call(this,e,n,s,a,t,i,r,o,3*(3*(i-r)-t+o),6*(t-2*i+r),3*(i-t),l),l}}function Th(e,t,n,i,s,r,a,o,l,c){if(l<=0||l>=1)return;const h=1-l,u=l*l,d=u*l,p=h*(h*(h*e+3*l*t)+3*u*n)+d*i,f=h*(h*(h*s+3*l*r)+3*u*a)+d*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],f),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],f)}function Mh(e,t,n,i,s,r,a,o,l,c,h,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&tc(Wl,this,Th).call(this,e,t,n,i,s,r,a,o,-h/c,u));const d=c**2-4*h*l;if(d<0)return;const p=Math.sqrt(d),f=2*l;tc(Wl,this,Th).call(this,e,t,n,i,s,r,a,o,(-c+p)/f,u),tc(Wl,this,Th).call(this,e,t,n,i,s,r,a,o,(-c-p)/f,u)}Wl=Eh;let Ih=null,Rh=null;function Ph(e){return Ih||(Ih=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Rh=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Ih,((e,t,n)=>t?t.normalize("NFKC"):Rh.get(n)))}const Nh="pdfjs_internal_id_",Lh=0,Dh=1,Fh=2,Oh=3,jh=4,Wh=5,zh=6,Bh=7,Uh=8;class Hh{constructor(){this.constructor===Hh&&hh("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(){}}class qh{constructor(){this.constructor===qh&&hh("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){hh("Abstract method `_createCanvas` called.")}}class Vh{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===Vh&&hh("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?nh.BINARY:nh.NONE;return this._fetchData(n,i).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))}))}_fetchData(e,t){hh("Abstract method `_fetchData` called.")}}class Gh{constructor(e){let{baseUrl:t=null}=e;this.constructor===Gh&&hh("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetchData(n).catch((e=>{throw new Error("Unable to load font data at: ".concat(n))}))}_fetchData(e){hh("Abstract method `_fetchData` called.")}}class Kh{constructor(){this.constructor===Kh&&hh("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){hh("Abstract method `_createSVG` called.")}}const Yh="http://www.w3.org/2000/svg";class Xh{}zl=Xh,oc(Xh,"CSS",96),oc(Xh,"PDF",72),oc(Xh,"PDF_TO_CSS_UNITS",zl.CSS/zl.PDF);var Qh=new WeakMap,$h=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,eu=new WeakMap,tu=new WeakMap,nu=new WeakSet;function iu(e){return ic(Qh,e)||sc(Qh,e,new Map)}function su(e){return ic(eu,e)||sc(eu,e,new Map)}function ru(e){if(!ic($h,e)){const t=ic(Zh,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=ic(Zh,e).createElementNS(Yh,"svg");i.setAttribute("width",0),i.setAttribute("height",0),sc($h,e,ic(Zh,e).createElementNS(Yh,"defs")),t.append(i),i.append(ic($h,e)),ic(Zh,e).body.append(t)}return ic($h,e)}function au(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=t[o]/255,r[o]=n[o]/255,a[o]=i[o]/255;return[s.join(","),r.join(","),a.join(",")]}function ou(e){const t=ic(Zh,this).createElementNS(Yh,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function lu(e){const t=ic(Zh,this).createElementNS(Yh,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function cu(e){const t=ic(Zh,this).createElementNS(Yh,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),nc(nu,this,ru).append(t),t}function hu(e,t,n){const i=ic(Zh,this).createElementNS(Yh,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function uu(e,t,n,i){const s=ic(Zh,this).createElementNS(Yh,"feComponentTransfer");i.append(s),tc(nu,this,hu).call(this,s,"feFuncR",e),tc(nu,this,hu).call(this,s,"feFuncG",t),tc(nu,this,hu).call(this,s,"feFuncB",n)}function du(e,t){const n=ic(Zh,this).createElementNS(Yh,"feComponentTransfer");t.append(n),tc(nu,this,hu).call(this,n,"feFuncA",e)}function pu(e){return nc(nu,this,ru).style.color=e,Ru(getComputedStyle(nc(nu,this,ru)).getPropertyValue("color"))}async function fu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Su(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise(((n,i)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)i(new Error(s.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(s.response)}n(s.responseText)}},s.send(null)}))}class gu extends Vh{_fetchData(e,t){return fu(e,this.isCompressed?"arraybuffer":"text").then((e=>({cMapData:e instanceof ArrayBuffer?new Uint8Array(e):Ch(e),compressionType:t})))}}class mu extends Gh{_fetchData(e){return fu(e,"arraybuffer").then((e=>new Uint8Array(e)))}}class vu extends Kh{_createSVG(e){return document.createElementNS(Yh,e)}}class _u{constructor(e){let{viewBox:t,scale:n,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}=e;this.viewBox=t,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=r;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,h,u,d,p,f,g,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,u=0,d=1;break;case 90:c=0,h=1,u=1,d=0;break;case 270:c=0,h=-1,u=-1,d=0;break;case 0:c=1,h=0,u=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,d=-d),0===c?(p=Math.abs(l-t[1])*n+s,f=Math.abs(o-t[0])*n+r,g=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(p=Math.abs(o-t[0])*n+s,f=Math.abs(l-t[1])*n+r,g=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[c*n,h*n,u*n,d*n,p-c*n*o-u*n*l,f-h*n*o-d*n*l],this.width=g,this.height=m}get rawDims(){const{viewBox:e}=this;return ph(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _u({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return Eh.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Eh.applyTransform([e[0],e[1]],this.transform),n=Eh.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Eh.applyInverseTransform([e,t],this.transform)}}class yu extends fh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function bu(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function wu(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function ku(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function Cu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(bu(e))return ch('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let s=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||t}class xu{constructor(){oc(this,"started",Object.create(null)),oc(this,"times",[])}time(e){e in this.started&&ch("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||ch("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push("".concat(n.padEnd(t)," ").concat(s-i,"ms\n"));return e.join("")}}function Su(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}function Au(e){e.preventDefault()}function Eu(e){console.log("Deprecated API usage: "+e)}let Tu;class Mu{static toDateObject(e){if(!e||"string"!==typeof e)return null;Tu||(Tu=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Tu.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(r+=c,a+=h):"+"===l&&(r-=c,a-=h),new Date(Date.UTC(n,i,s,r,a,o))}}function Iu(e,t){let{scale:n=1,rotation:i=0}=t;const{width:s,height:r}=e.attributes.style,a=[0,0,parseInt(s),parseInt(r)];return new _u({viewBox:a,scale:n,rotation:i})}function Ru(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):(ch('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Pu(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform();return[t,n,i,s,r,a]}function Nu(e){const{a:t,b:n,c:i,d:s,e:r,f:a}=e.getTransform().invertSelf();return[t,n,i,s,r,a]}function Lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof _u){const{pageWidth:i,pageHeight:s}=t.rawDims,{style:r}=e,a=Sh.isCSSRoundSupported,o="var(--scale-factor) * ".concat(i,"px"),l="var(--scale-factor) * ".concat(s,"px"),c=a?"round(".concat(o,", 1px)"):"calc(".concat(o,")"),h=a?"round(".concat(l,", 1px)"):"calc(".concat(l,")");n&&t.rotation%180!==0?(r.width=h,r.height=c):(r.width=c,r.height=h)}i&&e.setAttribute("data-main-rotation",t.rotation)}var Du=new WeakMap,Fu=new WeakMap,Ou=new WeakMap,ju=new WeakMap,Wu=new WeakSet;class zu{constructor(e){Zl(this,Wu),ec(this,Du,null),ec(this,Fu,null),ec(this,Ou,void 0),ec(this,ju,null),sc(Ou,this,e)}render(){const e=sc(Du,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Au),e.addEventListener("pointerdown",Bu);const t=sc(ju,this,document.createElement("div"));t.className="buttons",e.append(t);const n=ic(Ou,this).toolbarPosition;if(n){const{style:t}=e,i="ltr"===ic(Ou,this)._uiManager.direction?1-n[0]:n[0];t.insetInlineEnd="".concat(100*i,"%"),t.top="calc(".concat(100*n[1],"% + var(--editor-toolbar-vert-offset))")}return tc(Wu,this,Vu).call(this),e}hide(){var e;ic(Du,this).classList.add("hidden"),null===(e=ic(Fu,this))||void 0===e||e.hideDropdown()}show(){ic(Du,this).classList.remove("hidden")}addAltTextButton(e){tc(Wu,this,qu).call(this,e),ic(ju,this).prepend(e,nc(Wu,this,Gu))}addColorPicker(e){sc(Fu,this,e);const t=e.renderButton();tc(Wu,this,qu).call(this,t),ic(ju,this).prepend(t,nc(Wu,this,Gu))}remove(){var e;ic(Du,this).remove(),null===(e=ic(Fu,this))||void 0===e||e.destroy(),sc(Fu,this,null)}}function Bu(e){e.stopPropagation()}function Uu(e){ic(Ou,this)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}function Hu(e){ic(Ou,this)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}function qu(e){e.addEventListener("focusin",tc(Wu,this,Uu).bind(this),{capture:!0}),e.addEventListener("focusout",tc(Wu,this,Hu).bind(this),{capture:!0}),e.addEventListener("contextmenu",Au)}function Vu(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-editor-remove-".concat(ic(Ou,this).editorType,"-button")),tc(Wu,this,qu).call(this,e),e.addEventListener("click",(e=>{ic(Ou,this)._uiManager.delete()})),ic(ju,this).append(e)}function Gu(e){const t=document.createElement("div");return t.className="divider",t}var Ku=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,Qu=new WeakSet;class $u{constructor(e){Zl(this,Qu),ec(this,Ku,null),ec(this,Yu,null),ec(this,Xu,void 0),sc(Xu,this,e)}show(e,t,n){const[i,s]=tc(Qu,this,Zu).call(this,t,n),{style:r}=ic(Yu,this)||sc(Yu,this,tc(Qu,this,Ju).call(this));e.append(ic(Yu,this)),r.insetInlineEnd="".concat(100*i,"%"),r.top="calc(".concat(100*s,"% + var(--editor-toolbar-vert-offset))")}hide(){ic(Yu,this).remove()}}function Ju(){const e=sc(Yu,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Au);const t=sc(Ku,this,document.createElement("div"));return t.className="buttons",e.append(t),tc(Qu,this,ed).call(this),e}function Zu(e,t){let n=0,i=0;for(const s of e){const e=s.y+s.height;if(e<n)continue;const r=s.x+(t?s.width:0);e>n?(i=r,n=e):t?r>i&&(i=r):r<i&&(i=r)}return[t?1-i:i,n]}function ed(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),e.addEventListener("contextmenu",Au),e.addEventListener("click",(()=>{ic(Xu,this).highlightSelection("floating_button")})),ic(Ku,this).append(e)}function td(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var nd=new WeakMap;class id{constructor(){ec(this,nd,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((sc(nd,this,(e=ic(nd,this),t=e++,e)),t))}}var sd=new WeakMap,rd=new WeakMap,ad=new WeakMap,od=new WeakSet;class ld{constructor(){Zl(this,od),ec(this,sd,function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return kh(n)}()),ec(this,rd,0),ec(this,ad,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return ph(this,"_isSVGFittingCanvas",t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]))))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return tc(od,this,cd).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(s),e)}async getFromUrl(e){return tc(od,this,cd).call(this,e,e)}async getFromId(e){ic(ad,this)||sc(ad,this,new Map);const t=ic(ad,this).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=ic(ad,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){ic(ad,this)||sc(ad,this,new Map);const t=ic(ad,this).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(ic(sd,this),"_"))}}async function cd(e,t){var n;ic(ad,this)||sc(ad,this,new Map);let i=ic(ad,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var s,r;let e;if(i||(i={bitmap:null,id:"image_".concat(ic(sd,this),"_").concat((sc(rd,this,(s=ic(rd,this),r=s++,s)),r)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await fu(t,"blob")):e=i.file=t,"image/svg+xml"===e.type){const t=Bl._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise(((e,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;s.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},s.onerror=n.onerror=r}));n.readAsDataURL(e),await r}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch($C){console.error($C),i=null}return ic(ad,this).set(e,i),i&&ic(ad,this).set(i.id,i),i}Bl=ld;var hd=new WeakMap,ud=new WeakMap,dd=new WeakMap,pd=new WeakMap;class fd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;ec(this,hd,[]),ec(this,ud,!1),ec(this,dd,void 0),ec(this,pd,-1),sc(dd,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(s&&t(),ic(ud,this))return;const l={cmd:t,undo:n,post:i,type:r};if(-1===ic(pd,this))return ic(hd,this).length>0&&(ic(hd,this).length=0),sc(pd,this,0),void ic(hd,this).push(l);if(a&&ic(hd,this)[ic(pd,this)].type===r)return o&&(l.undo=ic(hd,this)[ic(pd,this)].undo),void(ic(hd,this)[ic(pd,this)]=l);const c=ic(pd,this)+1;c===ic(dd,this)?ic(hd,this).splice(0,1):(sc(pd,this,c),c<ic(hd,this).length&&ic(hd,this).splice(c)),ic(hd,this).push(l)}undo(){if(-1===ic(pd,this))return;sc(ud,this,!0);const{undo:e,post:t}=ic(hd,this)[ic(pd,this)];e(),null===t||void 0===t||t(),sc(ud,this,!1),sc(pd,this,ic(pd,this)-1)}redo(){if(ic(pd,this)<ic(hd,this).length-1){sc(pd,this,ic(pd,this)+1),sc(ud,this,!0);const{cmd:e,post:t}=ic(hd,this)[ic(pd,this)];e(),null===t||void 0===t||t(),sc(ud,this,!1)}}hasSomethingToUndo(){return-1!==ic(pd,this)}hasSomethingToRedo(){return ic(pd,this)<ic(hd,this).length-1}destroy(){sc(hd,this,null)}}var gd=new WeakSet;class md{constructor(e){Zl(this,gd),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Sh.platform;for(const[n,i,s={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:s}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(tc(gd,this,vd).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:r=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...r,t)(),s||(t.stopPropagation(),t.preventDefault()))}}function vd(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class _d{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,Ru(i))}t.remove()}(e),ph(this,"_colors",e)}convert(e){const t=Ru(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every(((e,n)=>e===t[n])))return _d._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Eh.makeHexColor(...t):e}}oc(_d,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var yd=new WeakMap,bd=new WeakMap,wd=new WeakMap,kd=new WeakMap,Cd=new WeakMap,xd=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Td=new WeakMap,Md=new WeakMap,Id=new WeakMap,Rd=new WeakMap,Pd=new WeakMap,Nd=new WeakMap,Ld=new WeakMap,Dd=new WeakMap,Fd=new WeakMap,Od=new WeakMap,jd=new WeakMap,Wd=new WeakMap,zd=new WeakMap,Bd=new WeakMap,Ud=new WeakMap,Hd=new WeakMap,qd=new WeakMap,Vd=new WeakMap,Gd=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,Qd=new WeakMap,$d=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,ap=new WeakMap,op=new WeakMap,lp=new WeakMap,cp=new WeakMap,hp=new WeakMap,up=new WeakSet;class dp{static get _keyboardManager(){const e=dp.prototype,t=e=>ic(cp,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ph(this,"_keyboardManager",new md([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&ic(cp,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&ic(cp,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,n,i,s,r,a,o,l){Zl(this,up),ec(this,yd,null),ec(this,bd,new Map),ec(this,wd,new Map),ec(this,kd,null),ec(this,Cd,null),ec(this,xd,null),ec(this,Sd,new fd),ec(this,Ad,0),ec(this,Ed,new Set),ec(this,Td,null),ec(this,Md,null),ec(this,Id,new Set),ec(this,Rd,!1),ec(this,Pd,null),ec(this,Nd,null),ec(this,Ld,null),ec(this,Dd,!1),ec(this,Fd,null),ec(this,Od,new id),ec(this,jd,!1),ec(this,Wd,!1),ec(this,zd,null),ec(this,Bd,null),ec(this,Ud,null),ec(this,Hd,kc.NONE),ec(this,qd,new Set),ec(this,Vd,null),ec(this,Gd,null),ec(this,Kd,null),ec(this,Yd,this.blur.bind(this)),ec(this,Xd,this.focus.bind(this)),ec(this,Qd,this.copy.bind(this)),ec(this,$d,this.cut.bind(this)),ec(this,Jd,this.paste.bind(this)),ec(this,Zd,this.keydown.bind(this)),ec(this,ep,this.keyup.bind(this)),ec(this,tp,this.onEditingAction.bind(this)),ec(this,np,this.onPageChanging.bind(this)),ec(this,ip,this.onScaleChanging.bind(this)),ec(this,sp,tc(up,this,gp).bind(this)),ec(this,rp,this.onRotationChanging.bind(this)),ec(this,ap,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),ec(this,op,[0,0]),ec(this,lp,null),ec(this,cp,null),ec(this,hp,null),sc(cp,this,e),sc(hp,this,t),sc(kd,this,n),this._eventBus=i,this._eventBus._on("editingaction",ic(tp,this)),this._eventBus._on("pagechanging",ic(np,this)),this._eventBus._on("scalechanging",ic(ip,this)),this._eventBus._on("rotationchanging",ic(rp,this)),tc(up,this,vp).call(this),tc(up,this,wp).call(this),sc(Cd,this,s.annotationStorage),sc(Pd,this,s.filterFactory),sc(Gd,this,r),sc(Ld,this,a||null),sc(Rd,this,o),sc(Ud,this,l||null),this.viewParameters={realScale:Xh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var e,t;tc(up,this,kp).call(this),tc(up,this,bp).call(this),this._eventBus._off("editingaction",ic(tp,this)),this._eventBus._off("pagechanging",ic(np,this)),this._eventBus._off("scalechanging",ic(ip,this)),this._eventBus._off("rotationchanging",ic(rp,this));for(const n of ic(wd,this).values())n.destroy();ic(wd,this).clear(),ic(bd,this).clear(),ic(Id,this).clear(),sc(yd,this,null),ic(qd,this).clear(),ic(Sd,this).destroy(),null===(e=ic(kd,this))||void 0===e||e.destroy(),null===(t=ic(Fd,this))||void 0===t||t.hide(),sc(Fd,this,null),ic(Nd,this)&&(clearTimeout(ic(Nd,this)),sc(Nd,this,null)),ic(lp,this)&&(clearTimeout(ic(lp,this)),sc(lp,this,null)),tc(up,this,_p).call(this)}async mlGuess(e){var t;return(null===(t=ic(Ud,this))||void 0===t?void 0:t.guess(e))||null}get hasMLManager(){return!!ic(Ud,this)}get hcmFilter(){return ph(this,"hcmFilter",ic(Gd,this)?ic(Pd,this).addHCMFilter(ic(Gd,this).foreground,ic(Gd,this).background):"none")}get direction(){return ph(this,"direction",getComputedStyle(ic(cp,this)).direction)}get highlightColors(){return ph(this,"highlightColors",ic(Ld,this)?new Map(ic(Ld,this).split(",").map((e=>e.split("=").map((e=>e.trim()))))):null)}get highlightColorNames(){return ph(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(e=>e.reverse()))):null)}setMainHighlightColorPicker(e){sc(Bd,this,e)}editAltText(e){var t;null===(t=ic(kd,this))||void 0===t||t.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;sc(Ad,this,t-1)}focusMainContainer(){ic(cp,this).focus()}findParent(e,t){for(const n of ic(wd,this).values()){const{x:i,y:s,width:r,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+r&&t>=s&&t<=s+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ic(hp,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){ic(Id,this).add(e)}removeShouldRescale(e){ic(Id,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*Xh.PDF_TO_CSS_UNITS;for(const n of ic(Id,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=t,a=t.toString(),o=tc(up,this,pp).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(l){t.empty(),ic(Hd,this)===kc.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:kc.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const t of ic(wd,this).values())if(t.hasTextLayer(o)){t.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r,text:a});break}}}addToAnnotationStorage(e){e.isEmpty()||!ic(Cd,this)||ic(Cd,this).has(e.id)||ic(Cd,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,ic(Dd,this)&&(sc(Dd,this,!1),tc(up,this,mp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of ic(qd,this))if(t.div.contains(e)){sc(zd,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!ic(zd,this))return;const[e,t]=ic(zd,this);sc(zd,this,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),t.focus()}addEditListeners(){tc(up,this,wp).call(this),tc(up,this,Cp).call(this)}removeEditListeners(){tc(up,this,kp).call(this),tc(up,this,xp).call(this)}copy(e){var t;if(e.preventDefault(),null===(t=ic(yd,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of ic(qd,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const e of ic(Md,this))if(e.isHandlingMimeForPasting(r.type))return void e.paste(r,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){return void ch('paste: "'.concat(s.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const r of n){const t=i.deserialize(r);if(!t)return;e.push(t)}const t=()=>{for(const t of e)tc(up,this,Mp).call(this,t);tc(up,this,Pp).call(this,e)},s=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:s,mustExec:!0})}catch(s){ch('paste: "'.concat(s.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),ic(Hd,this)===kc.NONE||this.isEditorHandlingKeyboard||dp._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,ic(Dd,this)&&(sc(Dd,this,!1),tc(up,this,mp).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(tc(up,this,yp).call(this),tc(up,this,Cp).call(this),tc(up,this,Sp).call(this,{isEditing:ic(Hd,this)!==kc.NONE,isEmpty:tc(up,this,Rp).call(this),hasSomethingToUndo:ic(Sd,this).hasSomethingToUndo(),hasSomethingToRedo:ic(Sd,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(tc(up,this,bp).call(this),tc(up,this,xp).call(this),tc(up,this,Sp).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!ic(Md,this)){sc(Md,this,e);for(const e of ic(Md,this))tc(up,this,Ap).call(this,e.defaultPropertiesToUpdate)}}getId(){return ic(Od,this).id}get currentLayer(){return ic(wd,this).get(ic(Ad,this))}getLayer(e){return ic(wd,this).get(e)}get currentPageIndex(){return ic(Ad,this)}addLayer(e){ic(wd,this).set(e.pageIndex,e),ic(jd,this)?e.enable():e.disable()}removeLayer(e){ic(wd,this).delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ic(Hd,this)!==e){if(sc(Hd,this,e),e===kc.NONE)return this.setEditingState(!1),void tc(up,this,Tp).call(this);this.setEditingState(!0),tc(up,this,Ep).call(this),this.unselectAll();for(const t of ic(wd,this).values())t.updateMode(e);if(t||!n){if(t)for(const e of ic(bd,this).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==ic(Hd,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(ic(Md,this)){switch(e){case Cc.CREATE:return void this.currentLayer.addNewEditor();case Cc.HIGHLIGHT_DEFAULT_COLOR:null===(n=ic(Bd,this))||void 0===n||n.updateColor(t);break;case Cc.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(ic(Kd,this)||sc(Kd,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of ic(qd,this))n.updateParams(e,t);for(const n of ic(Md,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const s of ic(bd,this).values())s.editorType===e&&s.show(t);(null===(n=null===(i=ic(Kd,this))||void 0===i?void 0:i.get(Cc.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&tc(up,this,Ap).call(this,[[Cc.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ic(Wd,this)!==e){sc(Wd,this,e);for(const t of ic(wd,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of ic(bd,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return ic(bd,this).get(e)}addEditor(e){ic(bd,this).set(e.id,e)}removeEditor(e){var t;(e.div.contains(document.activeElement)&&(ic(Nd,this)&&clearTimeout(ic(Nd,this)),sc(Nd,this,setTimeout((()=>{this.focusMainContainer(),sc(Nd,this,null)}),0))),ic(bd,this).delete(e.id),this.unselect(e),e.annotationElementId&&ic(Ed,this).has(e.annotationElementId))||(null===(t=ic(Cd,this))||void 0===t||t.remove(e.id))}addDeletedAnnotationElement(e){ic(Ed,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return ic(Ed,this).has(e)}removeDeletedAnnotationElement(e){ic(Ed,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){ic(yd,this)!==e&&(sc(yd,this,e),e&&tc(up,this,Ap).call(this,e.propertiesToUpdate))}updateUI(e){nc(up,this,Ip)===e&&tc(up,this,Ap).call(this,e.propertiesToUpdate)}toggleSelected(e){if(ic(qd,this).has(e))return ic(qd,this).delete(e),e.unselect(),void tc(up,this,Sp).call(this,{hasSelectedEditor:this.hasSelection});ic(qd,this).add(e),e.select(),tc(up,this,Ap).call(this,e.propertiesToUpdate),tc(up,this,Sp).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of ic(qd,this))t!==e&&t.unselect();ic(qd,this).clear(),ic(qd,this).add(e),e.select(),tc(up,this,Ap).call(this,e.propertiesToUpdate),tc(up,this,Sp).call(this,{hasSelectedEditor:!0})}isSelected(e){return ic(qd,this).has(e)}get firstSelectedEditor(){return ic(qd,this).values().next().value}unselect(e){e.unselect(),ic(qd,this).delete(e),tc(up,this,Sp).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==ic(qd,this).size}get isEnterHandled(){return 1===ic(qd,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){ic(Sd,this).undo(),tc(up,this,Sp).call(this,{hasSomethingToUndo:ic(Sd,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:tc(up,this,Rp).call(this)})}redo(){ic(Sd,this).redo(),tc(up,this,Sp).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ic(Sd,this).hasSomethingToRedo(),isEmpty:tc(up,this,Rp).call(this)})}addCommands(e){ic(Sd,this).add(e),tc(up,this,Sp).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:tc(up,this,Rp).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...ic(qd,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)tc(up,this,Mp).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=ic(yd,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return ic(yd,this)||this.hasSelection}selectAll(){for(const e of ic(qd,this))e.commit();tc(up,this,Pp).call(this,ic(bd,this).values())}unselectAll(){if((!ic(yd,this)||(ic(yd,this).commitOrRemove(),ic(Hd,this)===kc.NONE))&&this.hasSelection){for(const e of ic(qd,this))e.unselect();ic(qd,this).clear(),tc(up,this,Sp).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;ic(op,this)[0]+=e,ic(op,this)[1]+=t;const[n,i]=ic(op,this),s=[...ic(qd,this)];ic(lp,this)&&clearTimeout(ic(lp,this)),sc(lp,this,setTimeout((()=>{sc(lp,this,null),ic(op,this)[0]=ic(op,this)[1]=0,this.addCommands({cmd:()=>{for(const e of s)ic(bd,this).has(e.id)&&e.translateInPage(n,i)},undo:()=>{for(const e of s)ic(bd,this).has(e.id)&&e.translateInPage(-n,-i)},mustExec:!1})}),1e3));for(const r of s)r.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),sc(Td,this,new Map);for(const e of ic(qd,this))ic(Td,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ic(Td,this))return!1;this.disableUserSelect(!1);const e=ic(Td,this);sc(Td,this,null);let t=!1;for(const[{x:i,y:s,pageIndex:r},a]of e)a.newX=i,a.newY=s,a.newPageIndex=r,t||(t=i!==a.savedX||s!==a.savedY||r!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(ic(bd,this).has(e.id)){const s=ic(wd,this).get(i);s?e._setParentAndPosition(s,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:s,newPageIndex:r}]of e)n(t,i,s,r)},undo:()=>{for(const[t,{savedX:i,savedY:s,savedPageIndex:r}]of e)n(t,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(ic(Td,this))for(const n of ic(Td,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===ic(qd,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return ic(yd,this)===e}getActive(){return ic(yd,this)}getMode(){return ic(Hd,this)}get imageManager(){return ph(this,"imageManager",new ld)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:r}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/r,y:1-(e+a-n)/s,width:o/r,height:a/s});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/s,y:1-(t+o-i)/r,width:a/s,height:o/r});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/r,y:(e-n)/s,width:o/r,height:a/s});break;default:a=(e,t,a,o)=>({x:(e-n)/s,y:(t-i)/r,width:a/s,height:o/r})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:s}of e.getClientRects())0!==i&&0!==s&&o.push(a(t,n,i,s))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(ic(xd,this)||sc(xd,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=ic(xd,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=ic(xd,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=ic(Cd,this).getRawValue(n);i&&(ic(Hd,this)!==kc.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}}function pp(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function fp(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=tc(up,this,pp).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(ic(Fd,this)||sc(Fd,this,new $u(this)),ic(Fd,this).show(t,n,"ltr"===this.direction))}function gp(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(ic(Vd,this))null===(n=ic(Fd,this))||void 0===n||n.hide(),sc(Vd,this,null),tc(up,this,Sp).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===ic(Vd,this))return;var s;if(tc(up,this,pp).call(this,t).closest(".textLayer")){if(null===(e=ic(Fd,this))||void 0===e||e.hide(),sc(Vd,this,i),tc(up,this,Sp).call(this,{hasSelectedText:!0}),(ic(Hd,this)===kc.HIGHLIGHT||ic(Hd,this)===kc.NONE)&&(ic(Hd,this)===kc.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),sc(Dd,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=t=>{"pointerup"===t.type&&0!==t.button||(window.removeEventListener("pointerup",e),window.removeEventListener("blur",e),"pointerup"===t.type&&tc(up,this,mp).call(this,"main_toolbar"))};window.addEventListener("pointerup",e),window.addEventListener("blur",e)}}else ic(Vd,this)&&(null===(s=ic(Fd,this))||void 0===s||s.hide(),sc(Vd,this,null),tc(up,this,Sp).call(this,{hasSelectedText:!1}))}function mp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ic(Hd,this)===kc.HIGHLIGHT?this.highlightSelection(e):ic(Rd,this)&&tc(up,this,fp).call(this)}function vp(){document.addEventListener("selectionchange",ic(sp,this))}function _p(){document.removeEventListener("selectionchange",ic(sp,this))}function yp(){window.addEventListener("focus",ic(Xd,this)),window.addEventListener("blur",ic(Yd,this))}function bp(){window.removeEventListener("focus",ic(Xd,this)),window.removeEventListener("blur",ic(Yd,this))}function wp(){window.addEventListener("keydown",ic(Zd,this)),window.addEventListener("keyup",ic(ep,this))}function kp(){window.removeEventListener("keydown",ic(Zd,this)),window.removeEventListener("keyup",ic(ep,this))}function Cp(){document.addEventListener("copy",ic(Qd,this)),document.addEventListener("cut",ic($d,this)),document.addEventListener("paste",ic(Jd,this))}function xp(){document.removeEventListener("copy",ic(Qd,this)),document.removeEventListener("cut",ic($d,this)),document.removeEventListener("paste",ic(Jd,this))}function Sp(e){Object.entries(e).some((e=>{let[t,n]=e;return ic(ap,this)[t]!==n}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ic(ap,this),e)}),ic(Hd,this)===kc.HIGHLIGHT&&!1===e.hasSelectedEditor&&tc(up,this,Ap).call(this,[[Cc.HIGHLIGHT_FREE,!0]]))}function Ap(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}function Ep(){if(!ic(jd,this)){sc(jd,this,!0);for(const e of ic(wd,this).values())e.enable();for(const e of ic(bd,this).values())e.enable()}}function Tp(){if(this.unselectAll(),ic(jd,this)){sc(jd,this,!1);for(const e of ic(wd,this).values())e.disable();for(const e of ic(bd,this).values())e.disable()}}function Mp(e){const t=ic(wd,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function Ip(e){let t=null;for(t of ic(qd,e));return t}function Rp(){if(0===ic(bd,this).size)return!0;if(1===ic(bd,this).size)for(const e of ic(bd,this).values())return e.isEmpty();return!1}function Pp(e){for(const t of ic(qd,this))t.unselect();ic(qd,this).clear();for(const t of e)t.isEmpty()||(ic(qd,this).add(t),t.select());tc(up,this,Sp).call(this,{hasSelectedEditor:this.hasSelection})}oc(dp,"TRANSLATE_SMALL",1),oc(dp,"TRANSLATE_BIG",10);var Np=new WeakMap,Lp=new WeakMap,Dp=new WeakMap,Fp=new WeakMap,Op=new WeakMap,jp=new WeakMap,Wp=new WeakMap,zp=new WeakSet;class Bp{constructor(e){Zl(this,zp),ec(this,Np,""),ec(this,Lp,!1),ec(this,Dp,null),ec(this,Fp,null),ec(this,Op,null),ec(this,jp,!1),ec(this,Wp,null),sc(Wp,this,e)}static initialize(e){Bp._l10nPromise||(Bp._l10nPromise=e)}async render(){const e=sc(Dp,this,document.createElement("button"));e.className="altText";const t=await Bp._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",Au),e.addEventListener("pointerdown",(e=>e.stopPropagation()));const n=e=>{e.preventDefault(),ic(Wp,this)._uiManager.editAltText(ic(Wp,this))};return e.addEventListener("click",n,{capture:!0}),e.addEventListener("keydown",(t=>{t.target===e&&"Enter"===t.key&&(sc(jp,this,!0),n(t))})),await tc(zp,this,Up).call(this),e}finish(){ic(Dp,this)&&(ic(Dp,this).focus({focusVisible:ic(jp,this)}),sc(jp,this,!1))}isEmpty(){return!ic(Np,this)&&!ic(Lp,this)}get data(){return{altText:ic(Np,this),decorative:ic(Lp,this)}}set data(e){let{altText:t,decorative:n}=e;ic(Np,this)===t&&ic(Lp,this)===n||(sc(Np,this,t),sc(Lp,this,n),tc(zp,this,Up).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ic(Dp,this)&&(!e&&ic(Op,this)&&(clearTimeout(ic(Op,this)),sc(Op,this,null)),ic(Dp,this).disabled=!e)}destroy(){var e;null===(e=ic(Dp,this))||void 0===e||e.remove(),sc(Dp,this,null),sc(Fp,this,null)}}async function Up(){const e=ic(Dp,this);if(!e)return;var t;if(!ic(Np,this)&&!ic(Lp,this))return e.classList.remove("done"),void(null===(t=ic(Fp,this))||void 0===t||t.remove());e.classList.add("done"),Ul._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((t=>{e.setAttribute("aria-label",t)}));let n=ic(Fp,this);if(!n){sc(Fp,this,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip");const t=n.id="alt-text-tooltip-".concat(ic(Wp,this).id);e.setAttribute("aria-describedby",t);const i=100;e.addEventListener("mouseenter",(()=>{sc(Op,this,setTimeout((()=>{sc(Op,this,null),ic(Fp,this).classList.add("show"),ic(Wp,this)._reportTelemetry({action:"alt_text_tooltip"})}),i))})),e.addEventListener("mouseleave",(()=>{var e;ic(Op,this)&&(clearTimeout(ic(Op,this)),sc(Op,this,null)),null===(e=ic(Fp,this))||void 0===e||e.classList.remove("show")}))}n.innerText=ic(Lp,this)?await Ul._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):ic(Np,this),n.parentNode||e.append(n);const i=ic(Wp,this).getImageForAltText();null===i||void 0===i||i.setAttribute("aria-describedby",n.id)}Ul=Bp,oc(Bp,"_l10nPromise",null);var Hp=new WeakMap,qp=new WeakMap,Vp=new WeakMap,Gp=new WeakMap,Kp=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,Qp=new WeakMap,$p=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,ef=new WeakMap,tf=new WeakMap,nf=new WeakMap,sf=new WeakMap,rf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap,cf=new WeakMap,hf=new WeakMap,uf=new WeakSet;class df{static get _resizerKeyboardManager(){const e=df.prototype._resizeWithKeyboard,t=dp.TRANSLATE_SMALL,n=dp.TRANSLATE_BIG;return ph(this,"_resizerKeyboardManager",new md([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],df.prototype._stopResizingWithKeyboard]]))}constructor(e){Zl(this,uf),ec(this,Hp,null),ec(this,qp,null),ec(this,Vp,!1),ec(this,Gp,!1),ec(this,Kp,null),ec(this,Yp,null),ec(this,Xp,this.focusin.bind(this)),ec(this,Qp,this.focusout.bind(this)),ec(this,$p,null),ec(this,Jp,""),ec(this,Zp,!1),ec(this,ef,null),ec(this,tf,!1),ec(this,nf,!1),ec(this,sf,!1),ec(this,rf,null),ec(this,af,0),ec(this,of,0),ec(this,lf,null),oc(this,"_initialOptions",Object.create(null)),oc(this,"_isVisible",!0),oc(this,"_uiManager",null),oc(this,"_focusEventsAllowed",!0),oc(this,"_l10nPromise",null),ec(this,cf,!1),ec(this,hf,df._zIndex++),this.constructor===df&&hh("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,r];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ph(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ef({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(df._l10nPromise||(df._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((t=>[t,e.get(t.replaceAll(/([A-Z])/g,(e=>"-".concat(e.toLowerCase()))))])))),null!==n&&void 0!==n&&n.strings)for(const s of n.strings)df._l10nPromise.set(s,e.get(s));if(-1!==df._borderLineWidth)return;const i=getComputedStyle(document.documentElement);df._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){hh("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ic(cf,this)}set _isDraggable(e){var t;sc(cf,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ic(hf,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):tc(uf,this,Af).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(ic(Zp,this)?sc(Zp,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,r]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/r,this.fixAndSetPosition()}translate(e,t){tc(uf,this,pf).call(this,this.parentDimensions,e,t)}translateInPage(e,t){ic(ef,this)||sc(ef,this,[this.x,this.y]),tc(uf,this,pf).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){ic(ef,this)||sc(ef,this,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=e/n,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this;const[a,o]=this.getBaseTranslation();s+=a,r+=o,this.div.style.left="".concat((100*s).toFixed(2),"%"),this.div.style.top="".concat((100*r).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!ic(ef,this)&&(ic(ef,this)[0]!==this.x||ic(ef,this)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=df,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[t,n]=this.pageDimensions;let{x:i,y:s,width:r,height:a}=this;if(r*=t,a*=n,i*=t,s*=n,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-r,i)),s=Math.max(0,Math.min(n-a,s));break;case 90:i=Math.max(0,Math.min(t-a,i)),s=Math.min(n,Math.max(r,s));break;case 180:i=Math.min(t,Math.max(r,i)),s=Math.min(n,Math.max(a,s));break;case 270:i=Math.min(t,Math.max(a,i)),s=Math.max(0,Math.min(n-r,s))}this.x=i/=t,this.y=s/=n;const[o,l]=this.getBaseTranslation();i+=o,s+=l;const{style:c}=this.div;c.left="".concat((100*i).toFixed(2),"%"),c.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return ff.call(df,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ff.call(df,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,i=t*e,s=n*e;return Sh.isCSSRoundSupported?[Math.round(i),Math.round(s)]:[i,s]}setDims(e,t){const[n,i]=this.parentDimensions;this.div.style.width="".concat((100*e/n).toFixed(2),"%"),ic(Gp,this)||(this.div.style.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),s=!ic(Gp,this)&&t.endsWith("%");if(i&&s)return;const[r,a]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/r).toFixed(2),"%")),ic(Gp,this)||s||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var e;null===(e=ic(qp,this))||void 0===e||e.finish()}async addEditToolbar(){return ic($p,this)||ic(nf,this)||(sc($p,this,new zu(this)),this.div.append(ic($p,this).render()),ic(qp,this)&&ic($p,this).addAltTextButton(await ic(qp,this).render())),ic($p,this)}removeEditToolbar(){var e;ic($p,this)&&(ic($p,this).remove(),sc($p,this,null),null===(e=ic(qp,this))||void 0===e||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){ic(qp,this)||(Bp.initialize(df._l10nPromise),sc(qp,this,new Bp(this)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=ic(qp,this))||void 0===e?void 0:e.data}set altTextData(e){ic(qp,this)&&(ic(qp,this).data=e)}hasAltText(){var e;return!(null!==(e=ic(qp,this))&&void 0!==e&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=ic(Vp,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",ic(Xp,this)),this.div.addEventListener("focusout",ic(Qp,this));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[n,i]=this.getInitialTranslation();return this.translate(n,i),td(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Sh.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(sc(Zp,this,!0),this._isDraggable?tc(uf,this,wf).call(this,e):tc(uf,this,bf).call(this,e))}moveInDOM(){ic(rf,this)&&clearTimeout(ic(rf,this)),sc(rf,this,setTimeout((()=>{var e;sc(rf,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)}),0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,h=this.x*s,u=this.y*r,d=this.width*s,p=this.height*r;switch(n){case 0:return[h+l+a,r-u-c-p+o,h+l+d+a,r-u-c+o];case 90:return[h+c+a,r-u+l+o,h+c+p+a,r-u+l+d+o];case 180:return[h-l-d+a,r-u+c+o,h-l+a,r-u+c+p+o];case 270:return[h-c-p+a,r-u-l-d+o,h-c+a,r-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,r]=e,a=s-n,o=r-i;switch(this.rotation){case 0:return[n,t-r,a,o];case 90:return[n,t-i,o,a];case 180:return[s,t-i,a,o];case 270:return[s,t-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){sc(nf,this,!0)}disableEditMode(){sc(nf,this,!1)}isInEditMode(){return ic(nf,this)}shouldGetKeyboardEvents(){return ic(sf,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;null===(e=this.div)||void 0===e||e.addEventListener("focusin",ic(Xp,this)),null===(t=this.div)||void 0===t||t.addEventListener("focusout",ic(Qp,this))}rotate(e){}serialize(){hh("An editor must be serializable")}static deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation;const[s,r]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,r);return i.x=a/s,i.y=o/r,i.width=l/s,i.height=c/r,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",ic(Xp,this)),this.div.removeEventListener("focusout",ic(Qp,this)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),ic(rf,this)&&(clearTimeout(ic(rf,this)),sc(rf,this,null)),tc(uf,this,Af).call(this),this.removeEditToolbar(),ic(lf,this)){for(const e of ic(lf,this).values())clearTimeout(e);sc(lf,this,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(tc(uf,this,mf).call(this),ic(Kp,this).classList.remove("hidden"),td(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),sc(Yp,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=ic(Kp,this).children;if(!ic(Hp,this)){sc(Hp,this,Array.from(t));const e=tc(uf,this,kf).bind(this),n=tc(uf,this,Cf).bind(this);for(const t of ic(Hp,this)){const i=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e),t.addEventListener("blur",n),t.addEventListener("focus",tc(uf,this,xf).bind(this,i)),df._l10nPromise.get("pdfjs-editor-resizer-label-".concat(i)).then((e=>t.setAttribute("aria-label",e)))}}const n=ic(Hp,this)[0];let i=0;for(const r of t){if(r===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(ic(Hp,this).length/4);if(s!==i){if(s<i)for(let t=0;t<i-s;t++)ic(Kp,this).append(ic(Kp,this).firstChild);else if(s>i)for(let t=0;t<s-i;t++)ic(Kp,this).firstChild.before(ic(Kp,this).lastChild);let e=0;for(const n of t){const t=ic(Hp,this)[e++].getAttribute("data-resizer-name");df._l10nPromise.get("pdfjs-editor-resizer-label-".concat(t)).then((e=>n.setAttribute("aria-label",e)))}}tc(uf,this,Sf).call(this,0),sc(sf,this,!0),ic(Kp,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){ic(sf,this)&&tc(uf,this,yf).call(this,ic(Jp,this),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){tc(uf,this,Af).call(this),this.div.focus()}select(){var e,t;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),ic($p,this)?null===(t=ic($p,this))||void 0===t||t.show():this.addEditToolbar().then((()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=ic($p,this))||void 0===t||t.show())}))}unselect(){var e,t,n,i;null===(e=ic(Kp,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=ic($p,this))||void 0===i||i.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return ic(tf,this)}set isEditing(e){sc(tf,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){sc(Gp,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){ic(lf,this)||sc(lf,this,new Map);const{action:t}=e;let n=ic(lf,this).get(t);return n&&clearTimeout(n),n=setTimeout((()=>{this._reportTelemetry(e),ic(lf,this).delete(t),0===ic(lf,this).size&&sc(lf,this,null)}),df._telemetryTimeout),void ic(lf,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),sc(Vp,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),sc(Vp,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}function pf(e,t,n){let[i,s]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/s,this.fixAndSetPosition()}function ff(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function gf(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function mf(){if(ic(Kp,this))return;sc(Kp,this,document.createElement("div")),ic(Kp,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of e){const e=document.createElement("div");ic(Kp,this).append(e),e.classList.add("resizer",t),e.setAttribute("data-resizer-name",t),e.addEventListener("pointerdown",tc(uf,this,vf).bind(this,t)),e.addEventListener("contextmenu",Au),e.tabIndex=-1}this.div.prepend(ic(Kp,this))}function vf(e,t){var n;t.preventDefault();const{isMac:i}=Sh.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=ic(qp,this))||void 0===n||n.toggle(!1);const s=tc(uf,this,yf).bind(this,e),r=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Au);const o=this.x,l=this.y,c=this.width,h=this.height,u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var e;this.parent.togglePointerEvents(!0),null===(e=ic(qp,this))||void 0===e||e.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Au),this.parent.div.style.cursor=u,this.div.style.cursor=d,tc(uf,this,_f).call(this,o,l,c,h)};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}function _f(e,t,n,i){const s=this.x,r=this.y,a=this.width,o=this.height;s===e&&r===t&&a===n&&o===i||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=s,this.y=r;const[e,t]=this.parentDimensions;this.setDims(e*a,t*o),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=e,this.y=t;const[s,r]=this.parentDimensions;this.setDims(s*n,r*i),this.fixAndSetPosition()},mustExec:!0})}function yf(e,t){const[n,i]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,l=Hl.MIN_SIZE/n,c=Hl.MIN_SIZE/i,h=e=>Math.round(1e4*e)/1e4,u=tc(uf,this,gf).call(this,this.rotation),d=(e,t)=>[u[0]*e+u[2]*t,u[1]*e+u[3]*t],p=tc(uf,this,gf).call(this,360-this.rotation);let f,g,m=!1,v=!1;switch(e){case"topLeft":m=!0,f=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case"topMiddle":f=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case"topRight":m=!0,f=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case"middleRight":v=!0,f=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case"bottomRight":m=!0,f=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case"bottomMiddle":f=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case"bottomLeft":m=!0,f=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case"middleLeft":v=!0,f=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2]}const _=f(a,o),y=g(a,o);let b=d(...y);const w=h(s+b[0]),k=h(r+b[1]);let C=1,x=1,[S,A]=this.screenToPageTranslation(t.movementX,t.movementY);var E,T;if([S,A]=(E=S/n,T=A/i,[p[0]*E+p[2]*T,p[1]*E+p[3]*T]),m){const e=Math.hypot(a,o);C=x=Math.max(Math.min(Math.hypot(y[0]-_[0]-S,y[1]-_[1]-A)/e,1/a,1/o),l/a,c/o)}else v?C=Math.max(l,Math.min(1,Math.abs(y[0]-_[0]-S)))/a:x=Math.max(c,Math.min(1,Math.abs(y[1]-_[1]-A)))/o;const M=h(a*C),I=h(o*x);b=d(...g(M,I));const R=w-b[0],P=k-b[1];this.width=M,this.height=I,this.x=R,this.y=P,this.setDims(n*M,i*I),this.fixAndSetPosition()}function bf(e){const{isMac:t}=Sh.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function wf(e){const t=this._uiManager.isSelected(this);let n,i;this._uiManager.setUpDragSession(),t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0},sc(af,this,e.clientX),sc(of,this,e.clientY),i=e=>{const{clientX:t,clientY:n}=e,[i,s]=this.screenToPageTranslation(t-ic(af,this),n-ic(of,this));sc(af,this,t),sc(of,this,n),this._uiManager.dragSelectedEditors(i,s)},window.addEventListener("pointermove",i,n));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",i,n)),sc(Zp,this,!1),this._uiManager.endDragSession()||tc(uf,this,bf).call(this,e)};window.addEventListener("pointerup",s),window.addEventListener("blur",s)}function kf(e){Hl._resizerKeyboardManager.exec(this,e)}function Cf(e){var t;ic(sf,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==ic(Kp,this)&&tc(uf,this,Af).call(this)}function xf(e){sc(Jp,this,ic(sf,this)?e:"")}function Sf(e){if(ic(Hp,this))for(const t of ic(Hp,this))t.tabIndex=e}function Af(){if(sc(sf,this,!1),tc(uf,this,Sf).call(this,-1),ic(Yp,this)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=ic(Yp,this);tc(uf,this,_f).call(this,e,t,n,i),sc(Yp,this,null)}}Hl=df,oc(df,"_borderLineWidth",-1),oc(df,"_colorManager",new _d),oc(df,"_zIndex",1),oc(df,"_telemetryTimeout",1e3);class Ef extends df{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Tf=3285377520,Mf=4294901760,If=65535;class Rf{constructor(e){this.h1=e?4294967295&e:Tf,this.h2=e?4294967295&e:Tf}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,s=e.length;i<s;i++){const s=e.charCodeAt(i);s<=255?t[n++]=s:(t[n++]=s>>>8,t[n++]=255&s)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,r=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const h=3432918353,u=461845907,d=11601,p=13715;for(let f=0;f<i;f++)1&f?(a=r[f],a=a*h&Mf|a*d&If,a=a<<15|a>>>17,a=a*u&Mf|a*p&If,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*h&Mf|o*d&If,o=o<<15|o>>>17,o=o*u&Mf|o*p&If,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,s){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*h&Mf|a*d&If,a=a<<15|a>>>17,a=a*u&Mf|a*p&If,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Mf|36045*e&If,t=4283543511*t&Mf|(2950163797*(t<<16|e>>>16)&Mf)>>>16,e^=t>>>1,e=444984403*e&Mf|60499*e&If,t=3301882366*t&Mf|(3120437893*(t<<16|e>>>16)&Mf)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Pf=Object.freeze({map:null,hash:"",transfer:void 0});var Nf=new WeakMap,Lf=new WeakMap,Df=new WeakSet;class Ff{constructor(){Zl(this,Df),ec(this,Nf,!1),ec(this,Lf,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=ic(Lf,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return ic(Lf,this).get(e)}remove(e){if(ic(Lf,this).delete(e),0===ic(Lf,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of ic(Lf,this).values())if(e instanceof df)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=ic(Lf,this).get(e);let i=!1;if(void 0!==n)for(const[s,r]of Object.entries(t))n[s]!==r&&(i=!0,n[s]=r);else i=!0,ic(Lf,this).set(e,t);i&&tc(Df,this,Of).call(this),t instanceof df&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return ic(Lf,this).has(e)}getAll(){return ic(Lf,this).size>0?xh(ic(Lf,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return ic(Lf,this).size}resetModified(){ic(Nf,this)&&(sc(Nf,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Wf(this)}get serializable(){if(0===ic(Lf,this).size)return Pf;const e=new Map,t=new Rf,n=[],i=Object.create(null);let s=!1;for(const[r,a]of ic(Lf,this)){const n=a instanceof df?a.serialize(!1,i):a;n&&(e.set(r,n),t.update("".concat(r,":").concat(JSON.stringify(n))),s||(s=!!n.bitmap))}if(s)for(const r of e.values())r.bitmap&&n.push(r.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Pf}get editorStats(){let e=null;const t=new Map;for(const s of ic(Lf,this).values()){var n;if(!(s instanceof df))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(r)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const s=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,s+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}}function Of(){ic(Nf,this)||(sc(Nf,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var jf=new WeakMap;class Wf extends Ff{constructor(e){super(),ec(this,jf,void 0);const{map:t,hash:n,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);sc(jf,this,{map:s,hash:n,transfer:i})}get print(){hh("Should not call PrintAnnotationStorage.print")}get serializable(){return ic(jf,this)}}var zf=new WeakMap;class Bf{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;ec(this,zf,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),ic(zf,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(t&&!ic(zf,this).has(t.loadedName))if(uh(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:i,style:s}=t,r=new FontFace(e,i,s);this.addNativeFontFace(r);try{await r.load(),ic(zf,this).add(e),null===n||void 0===n||n(t)}catch{ch("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(r)}}else hh("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw ch("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)}))}}get isFontLoadingAPISupported(){var e;return ph(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return(hc||"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ph(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(uh(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return ph(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let h=this._loadTestFont;h=i(h,976,c.length,c);const u=1482184792;let d=n(h,16);for(s=0,r=c.length-3;s<r;s+=4)d=d-u+n(c,s)|0;var p;s<c.length&&(d=d-u+n(c+"XXX",s)|0),h=i(h,16,4,(p=d,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f="url(data:font/opentype;base64,".concat(btoa(h),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(f,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return ch("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,(()=>{m.remove(),t.complete()}))}}class Uf{constructor(e,t){let{disableFontFace:n=!1,inspectFont:i=null}=t;this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=!0===n,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=kh(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let i;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(n,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,n),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(s){ch('getPathGenerator - ignoring character: "'.concat(s,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};const i=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case Lh:{const[e,t,s,a,o,l]=n.slice(r,r+6);i.push((n=>n.bezierCurveTo(e,t,s,a,o,l))),r+=6}break;case Dh:{const[e,t]=n.slice(r,r+2);i.push((n=>n.moveTo(e,t))),r+=2}break;case Fh:{const[e,t]=n.slice(r,r+2);i.push((n=>n.lineTo(e,t))),r+=2}break;case Oh:{const[e,t,s,a]=n.slice(r,r+4);i.push((n=>n.quadraticCurveTo(e,t,s,a))),r+=4}break;case jh:i.push((e=>e.restore()));break;case Wh:i.push((e=>e.save()));break;case zh:uh(2===i.length,"Scale command is only valid at the third position.");break;case Bh:{const[e,t,s,a,o,l]=n.slice(r,r+6);i.push((n=>n.transform(e,t,s,a,o,l))),r+=6}break;case Uh:{const[e,t]=n.slice(r,r+2);i.push((n=>n.translate(e,t))),r+=2}}return this.compiledGlyphs[t]=function(e,t){i[0](e),i[1](e),e.scale(t,-t);for(let n=2,s=i.length;n<s;n++)i[n](e)}}}if(hc){var Hf=Promise.withResolvers(),qf=null;(async()=>{const e=await import("fs"),t=await import("http"),n=await import("https"),i=await import("url");return new Map(Object.entries({fs:e,http:t,https:n,url:i,canvas:undefined,path2d:undefined}))})().then((e=>{qf=e,Hf.resolve()}),(e=>{ch("loadPackages: ".concat(e)),qf=new Map,Hf.resolve()}))}class Vf{static get promise(){return Hf.promise}static get(e){var t;return null===(t=qf)||void 0===t?void 0:t.get(e)}}const Gf=function(e){return Vf.get("fs").promises.readFile(e).then((e=>new Uint8Array(e)))};const Kf="Fill",Yf="Stroke",Xf="Shading";function Qf(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],n,i),e.clip(s)}class $f{constructor(){this.constructor===$f&&hh("Cannot initialize BaseShadingPattern.")}getPattern(){hh("Abstract method `getPattern` called.")}}class Jf extends $f{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===Yf||i===Kf){const r=t.current.getClippedPathBoundingBox(i,Pu(e))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o,!0),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-r[0],-r[1]),n=Eh.transform(n,[1,0,0,1,r[0],r[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Qf(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(l.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else Qf(e,this._bbox),s=this._createGradient(e);return s}}function Zf(e,t,n,i,s,r,a,o){const l=t.coords,c=t.colors,h=e.data,u=4*e.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=a,a=d),l[i+1]>l[s+1]&&(d=i,i=s,s=d,d=a,a=o,o=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=r,r=a,a=d);const p=(l[n]+t.offsetX)*t.scaleX,f=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[s]+t.offsetX)*t.scaleX,_=(l[s+1]+t.offsetY)*t.scaleY;if(f>=_)return;const y=c[r],b=c[r+1],w=c[r+2],k=c[a],C=c[a+1],x=c[a+2],S=c[o],A=c[o+1],E=c[o+2],T=Math.round(f),M=Math.round(_);let I,R,P,N,L,D,F,O;for(let j=T;j<=M;j++){if(j<m){const e=j<f?0:(f-j)/(f-m);I=p-(p-g)*e,R=y-(y-k)*e,P=b-(b-C)*e,N=w-(w-x)*e}else{let e;e=j>_?1:m===_?0:(m-j)/(m-_),I=g-(g-v)*e,R=k-(k-S)*e,P=C-(C-A)*e,N=x-(x-E)*e}let e;e=j<f?0:j>_?1:(f-j)/(f-_),L=p-(p-v)*e,D=y-(y-S)*e,F=b-(b-A)*e,O=w-(w-E)*e;const t=Math.round(Math.min(I,L)),n=Math.round(Math.max(I,L));let i=u*j+4*t;for(let s=t;s<=n;s++)e=(I-s)/(I-L),e<0?e=0:e>1&&(e=1),h[i++]=R-(R-D)*e|0,h[i++]=P-(P-F)*e|0,h[i++]=N-(N-O)*e|0,h[i++]=255}}function eg(e,t,n){const i=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(r=0;r<l;r++){let t=r*o;for(let r=0;r<c;r++,t++)Zf(e,n,i[t],i[t+1],i[t+o],s[t],s[t+1],s[t+o]),Zf(e,n,i[t+o+1],i[t+1],i[t+o],s[t+o+1],s[t+1],s[t+o])}break;case"triangles":for(r=0,a=i.length;r<a;r+=3)Zf(e,n,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class tg extends $f{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=r/o,h=a/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-s,scaleX:1/c,scaleY:1/h},d=o+4,p=l+4,f=n.getCanvas("mesh",d,p,!1),g=f.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)eg(m,v,u);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:i-2*c,offsetY:s-2*h,scaleX:c,scaleY:h}}getPattern(e,t,n,i){let s;if(Qf(e,this._bbox),i===Xf)s=Eh.singularValueDecompose2dScale(Pu(e));else if(s=Eh.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=Eh.singularValueDecompose2dScale(this.matrix);s=[s[0]*e[0],s[1]*e[1]]}const r=this._createMeshCanvas(s,i===Xf?null:this._background,t.cachedCanvases);return i!==Xf&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(r.offsetX,r.offsetY),e.scale(r.scaleX,r.scaleY),e.createPattern(r.canvas,"no-repeat")}}class ng extends $f{getPattern(){return"hotpink"}}const ig=1,sg=2;class rg{constructor(e,t,n,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,i=this.xstep,s=this.ystep,r=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;lh("TilingType: "+a);const c=n[0],h=n[1],u=n[2],d=n[3],p=Eh.singularValueDecompose2dScale(this.matrix),f=Eh.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(i,this.ctx.canvas.width,g[0]),v=this.getSizeAndScale(s,this.ctx.canvas.height,g[1]),_=e.cachedCanvases.getCanvas("pattern",m.size,v.size,!0),y=_.context,b=l.createCanvasGraphics(y);b.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(b,r,o);let w=c,k=h,C=u,x=d;return c<0&&(w=0,C+=Math.abs(c)),h<0&&(k=0,x+=Math.abs(h)),y.translate(-m.scale*w,-v.scale*k),b.transform(m.scale,0,0,v.scale,0,0),y.save(),this.clipBbox(b,w,k,C,x),b.baseTransform=Pu(b.ctx),b.executeOperatorList(t),b.endDrawing(),{canvas:_.canvas,scaleX:m.scale,scaleY:v.scale,offsetX:w,offsetY:k}}getSizeAndScale(e,t,n){e=Math.abs(e);const i=Math.max(rg.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const r=i-t,a=s-n;e.ctx.rect(t,n,r,a),e.current.updateRectMinMax(Pu(e.ctx),[t,n,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case ig:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,s.fillColor=e.fillStyle,s.strokeColor=e.strokeStyle;break;case sg:const r=Eh.makeHexColor(n[0],n[1],n[2]);i.fillStyle=r,i.strokeStyle=r,s.fillColor=r,s.strokeColor=r;break;default:throw new bh("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,i){let s=n;i!==Xf&&(s=Eh.transform(s,t.baseTransform),this.matrix&&(s=Eh.transform(s,this.matrix)));const r=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=e.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function ag(e){let{src:t,srcPos:n=0,dest:i,width:s,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=Sh.isLittleEndian?4278190080:255,[c,h]=o?[a,l]:[l,a],u=s>>3,d=7&s,p=t.length;i=new Uint32Array(i.buffer);let f=0;for(let g=0;g<r;g++){for(const s=n+u;n<s;n++){const e=n<p?t[n]:255;i[f++]=128&e?h:c,i[f++]=64&e?h:c,i[f++]=32&e?h:c,i[f++]=16&e?h:c,i[f++]=8&e?h:c,i[f++]=4&e?h:c,i[f++]=2&e?h:c,i[f++]=1&e?h:c}if(0===d)continue;const e=n<p?t[n++]:255;for(let t=0;t<d;t++)i[f++]=e&1<<7-t?h:c}return{srcPos:n,destPos:f}}oc(rg,"MAX_PATTERN_SIZE",3e3);const og=16;class lg{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function cg(e,t,n,i,s,r,a,o,l,c){const[h,u,d,p,f,g]=Pu(e);if(0===u&&0===d){const m=a*h+f,v=Math.round(m),_=o*p+g,y=Math.round(_),b=(a+l)*h+f,w=Math.abs(Math.round(b)-v)||1,k=(o+c)*p+g,C=Math.abs(Math.round(k)-y)||1;return e.setTransform(Math.sign(h),0,0,Math.sign(p),v,y),e.drawImage(t,n,i,s,r,0,0,w,C),e.setTransform(h,u,d,p,f,g),[w,C]}if(0===h&&0===p){const m=o*d+f,v=Math.round(m),_=a*u+g,y=Math.round(_),b=(o+c)*d+f,w=Math.abs(Math.round(b)-v)||1,k=(a+l)*u+g,C=Math.abs(Math.round(k)-y)||1;return e.setTransform(0,Math.sign(u),Math.sign(d),0,v,y),e.drawImage(t,n,i,s,r,0,0,C,w),e.setTransform(h,u,d,p,f,g),[C,w]}e.drawImage(t,n,i,s,r,a,o,l,c);return[Math.hypot(h,u)*l,Math.hypot(d,p)*c]}class hg{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=uc,this.textMatrixScale=1,this.fontMatrix=dc,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Sc,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Eh.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Eh.applyTransform(t,e),i=Eh.applyTransform(t.slice(2),e),s=Eh.applyTransform([t[0],t[3]],e),r=Eh.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],s[0],r[0]),this.minY=Math.min(this.minY,n[1],i[1],s[1],r[1]),this.maxX=Math.max(this.maxX,n[0],i[0],s[0],r[0]),this.maxY=Math.max(this.maxY,n[1],i[1],s[1],r[1])}updateScalingPathMinMax(e,t){Eh.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,s,r,a,o,l,c){const h=Eh.bezierBoundingBox(t,n,i,s,r,a,o,l,c);c||this.updateRectMinMax(e,h)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Yf){t||hh("Stroke bounding box must include transform.");const e=Eh.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,s=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=Eh.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kf,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Eh.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ug(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,s=n%og,r=(n-s)/og,a=0===s?r:r+1,o=e.createImageData(i,og);let l,c=0;const h=t.data,u=o.data;let d,p,f,g;if(t.kind===Rc.GRAYSCALE_1BPP){const t=h.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,_=Sh.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(f=d<r?og:s,l=0,p=0;p<f;p++){const e=t-c;let s=0;const r=e>m?i:8*e-7,a=-8&r;let o=0,u=0;for(;s<a;s+=8)u=h[c++],n[l++]=128&u?v:_,n[l++]=64&u?v:_,n[l++]=32&u?v:_,n[l++]=16&u?v:_,n[l++]=8&u?v:_,n[l++]=4&u?v:_,n[l++]=2&u?v:_,n[l++]=1&u?v:_;for(;s<r;s++)0===o&&(u=h[c++],o=128),n[l++]=u&o?v:_,o>>=1}for(;l<g;)n[l++]=0;e.putImageData(o,0,d*og)}}else if(t.kind===Rc.RGBA_32BPP){for(p=0,g=i*og*4,d=0;d<r;d++)u.set(h.subarray(c,c+g)),c+=g,e.putImageData(o,0,p),p+=og;d<a&&(g=i*s*4,u.set(h.subarray(c,c+g)),e.putImageData(o,0,p))}else{if(t.kind!==Rc.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(f=og,g=i*f,d=0;d<a;d++){for(d>=r&&(f=s,g=i*f),l=0,p=g;p--;)u[l++]=h[c++],u[l++]=h[c++],u[l++]=h[c++],u[l++]=255;e.putImageData(o,0,d*og)}}}function dg(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,s=n%og,r=(n-s)/og,a=0===s?r:r+1,o=e.createImageData(i,og);let l=0;const c=t.data,h=o.data;for(let u=0;u<a;u++){const t=u<r?og:s;({srcPos:l}=ag({src:c,srcPos:l,dest:h,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,u*og)}}function pg(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function fg(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!hc){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function gg(e,t){if(t)return!0;const n=Eh.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xh.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}const mg=["butt","round","square"],vg=["miter","round","bevel"],_g={},yg={};var bg=new WeakSet;class wg{constructor(e,t,n,i,s,r,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=r;Zl(this,bg),this.ctx=e,this.current=new hg(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new lg(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:s=null}=e;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Pu(this.compositeCtx))}this.ctx.save(),fg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Pu(this.ctx)}executeOperatorList(e,t,n,i){const s=e.argsArray,r=e.fnArray;let a=t||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let h=0;const u=this.commonObjs,d=this.objs;let p;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(p=r[a],p!==ih.dependency)this[p].apply(this,s[a]);else for(const e of s[a]){const t=e.startsWith("g_")?u:d;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++h>10){if(Date.now()>c)return n(),a;h=0}}}endDrawing(){tc(bg,this,kg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),tc(bg,this,Cg).call(this)}_scaleImage(e,t){const n=e.width,i=e.height;let s,r,a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=i,h="prescale1";for(;a>2&&l>1||o>2&&c>1;){let t=l,n=c;a>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/t),o>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/n),s=this.cachedCanvases.getCanvas(h,t,n),r=s.context,r.clearRect(0,0,t,n),r.drawImage(e,0,0,l,c,0,0,t,n),e=s.canvas,l=t,c=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,s=this.current.fillColor,r=this.current.patternFill,a=Pu(t);let o,l,c,h;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!r){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(h=this.cachedCanvases.getCanvas("maskCanvas",n,i),dg(h.context,e));let u=Eh.transform(a,[1/n,0,0,-1/i,0,0]);u=Eh.transform(u,[1,0,0,1,0,-i]);const[d,p,f,g]=Eh.getAxialAlignedBoundingBox([0,0,n,i],u),m=Math.round(f-d)||1,v=Math.round(g-p)||1,_=this.cachedCanvases.getCanvas("fillCanvas",m,v),y=_.context,b=d,w=p;y.translate(-b,-w),y.transform(...u),c||(c=this._scaleImage(h.canvas,Nu(y)),c=c.img,o&&r&&o.set(l,c)),y.imageSmoothingEnabled=gg(Pu(y),e.interpolate),cg(y,c,0,0,c.width,c.height,0,0,n,i),y.globalCompositeOperation="source-in";const k=Eh.transform(Nu(y),[1,0,0,1,-b,-w]);return y.fillStyle=r?s.getPattern(t,this,k,Kf):s,y.fillRect(0,0,n,i),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,_.canvas)),{canvas:_.canvas,offsetX:Math.round(b),offsetY:Math.round(w)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=mg[e]}setLineJoin(e){this.ctx.lineJoin=vg[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...Pu(this.suspendedCtx)),pg(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,s,r,a){t.transform(e,n,i,s,r,a),this.__originalTransform(e,n,i,s,r,a)},e.setTransform=function(e,n,i,s,r,a){t.setTransform(e,n,i,s,r,a),this.__originalSetTransform(e,n,i,s,r,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,s,r,a){t.bezierCurveTo(e,n,i,s,r,a),this.__originalBezierCurveTo(e,n,i,s,r,a)},e.rect=function(e,n,i,s){t.rect(e,n,i,s),this.__originalRect(e,n,i,s)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),pg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],r=i[1],a=i[2]-s,o=i[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,s,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,r,a,o,l,c,h){let u=e.canvas,d=o-c,p=l-h;if(r)if(d<0||p<0||d+n>u.width||p+i>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),t=e.context;t.drawImage(u,-d,-p),r.some((e=>0!==e))&&(t.globalCompositeOperation="destination-atop",t.fillStyle=Eh.makeHexColor(...r),t.fillRect(0,0,n,i),t.globalCompositeOperation="source-over"),u=e.canvas,d=p=0}else if(r.some((e=>0!==e))){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(d,p,n,i),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=Eh.makeHexColor(...r),e.fillRect(d,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,n,i),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(u,d,p,n,i,o,l,n,i),t.restore()}save(){this.inSMaskMode?(pg(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),pg(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,s,r){this.ctx.transform(e,t,n,i,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,s=this.current;let r,a,o=s.x,l=s.y;const c=Pu(i),h=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],u=h?n.slice(0):null;for(let d=0,p=0,f=e.length;d<f;d++)switch(0|e[d]){case ih.rectangle:o=t[p++],l=t[p++];const e=t[p++],n=t[p++],d=o+e,f=l+n;i.moveTo(o,l),0===e||0===n?i.lineTo(d,f):(i.lineTo(d,l),i.lineTo(d,f),i.lineTo(o,f)),h||s.updateRectMinMax(c,[o,l,d,f]),i.closePath();break;case ih.moveTo:o=t[p++],l=t[p++],i.moveTo(o,l),h||s.updatePathMinMax(c,o,l);break;case ih.lineTo:o=t[p++],l=t[p++],i.lineTo(o,l),h||s.updatePathMinMax(c,o,l);break;case ih.curveTo:r=o,a=l,o=t[p+4],l=t[p+5],i.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,l),s.updateCurvePathMinMax(c,r,a,t[p],t[p+1],t[p+2],t[p+3],o,l,u),p+=6;break;case ih.curveTo2:r=o,a=l,i.bezierCurveTo(o,l,t[p],t[p+1],t[p+2],t[p+3]),s.updateCurvePathMinMax(c,r,a,o,l,t[p],t[p+1],t[p+2],t[p+3],u),o=t[p+2],l=t[p+3],p+=4;break;case ih.curveTo3:r=o,a=l,o=t[p+2],l=t[p+3],i.bezierCurveTo(t[p],t[p+1],o,l,o,l),s.updateCurvePathMinMax(c,r,a,t[p],t[p+1],o,l,o,l,u),p+=4;break;case ih.closePath:i.closePath()}h&&s.updateScalingPathMinMax(c,u),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,Nu(t),Yf),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,Nu(t),Kf),i=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_g}eoClip(){this.pendingClip=yg}beginText(){this.current.textMatrix=uc,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(s.fontMatrix=i.fontMatrix||dc,0!==s.fontMatrix[0]&&0!==s.fontMatrix[3]||ch("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",a=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(r,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,s,r){this.current.textMatrix=[e,t,n,i,s,r],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i){const s=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,c=o&Mc,h=!!(o&Ic),u=r.patternFill&&!a.missingFile;let d;if((a.disableFontFace||h||u)&&(d=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||u?(s.save(),s.translate(t,n),s.beginPath(),d(s,l),i&&s.setTransform(...i),c!==Sc&&c!==Ec||s.fill(),c!==Ac&&c!==Ec||s.stroke(),s.restore()):(c!==Sc&&c!==Ec||s.fillText(e,t,n),c!==Ac&&c!==Ec||s.strokeText(e,t,n)),h){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pu(s),x:t,y:n,fontSize:l,addToPath:d})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return ph(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const s=this.ctx,r=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,h=e.length,u=n.vertical,d=u?1:-1,p=n.defaultVMetrics,f=i*t.fontMatrix[0],g=t.textRenderingMode===Sc&&!n.disableFontFace&&!t.patternFill;let m;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),l>0?s.scale(c,-1):s.scale(c,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,Nu(s),Kf);m=Pu(s),s.restore(),s.fillStyle=e}let v=t.lineWidth;const _=t.textMatrixScale;if(0===_||0===v){const e=t.textRenderingMode&Mc;e!==Ac&&e!==Ec||(v=this.getSinglePixelWidth())}else v/=_;if(1!==r&&(s.scale(r,r),v/=r),s.lineWidth=v,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return s.fillText(n.join(""),0,0),t.x+=i*f*c,s.restore(),void this.compose()}let y,b=0;for(y=0;y<h;++y){const t=e[y];if("number"===typeof t){b+=d*t*i/1e3;continue}let c=!1;const h=(t.isSpace?o:0)+a,v=t.fontChar,_=t.accent;let w,k,C=t.width;if(u){const e=t.vmetric||p,n=-(t.vmetric?e[1]:.5*C)*f,i=e[2]*f;C=e?-e[0]:C,w=n/r,k=(b+i)/r}else w=b/r,k=0;if(n.remeasure&&C>0){const e=1e3*s.measureText(v).width/i*r;if(C<e&&this.isFontSubpixelAAEnabled){const t=C/e;c=!0,s.save(),s.scale(t,1),w/=t}else C!==e&&(w+=(C-e)/2e3*i/r)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(g&&!_)s.fillText(v,w,k);else if(this.paintChar(v,w,k,m),_){const e=w+i*_.offset.x/r,t=k-i*_.offset.y/r;this.paintChar(_.fontChar,e,t,m)}b+=u?C*f-h*l:C*f+h*l,c&&s.restore()}u?t.y-=b:t.x+=b*c,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,s=n.fontSize,r=n.fontDirection,a=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*r,h=n.fontMatrix||dc,u=e.length;let d,p,f,g;if(!(n.textRenderingMode===Tc)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,r),d=0;d<u;++d){if(p=e[d],"number"===typeof p){g=a*p*s/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const r=(p.isSpace?l:0)+o,u=i.charProcOperatorList[p.operatorListId];if(!u){ch('Type3 character "'.concat(p.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=p,this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(u),this.restore());f=Eh.applyTransform([p.width,0],h)[0]*s+r,t.translate(f,0),n.x+=f*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,s,r){this.ctx.rect(n,i,s-n,r-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],i=this.baseTransform||Pu(this.ctx),s={createCanvasGraphics:e=>new wg(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new rg(e,n,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=Eh.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=Eh.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new Jf(e);case"Mesh":return new tg(e);case"Dummy":return new ng}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Nu(t),Xf);const i=Nu(t);if(i){const{width:e,height:n}=t.canvas,[s,r,a,o]=Eh.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(s,r,a-s,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){hh("Should not call beginInlineImage")}beginImageData(){hh("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Pu(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(Pu(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||lh("TODO: Support non-isolated groups."),e.knockout&&ch("Knockout groups not supported.");const n=Pu(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Eh.getAxialAlignedBoundingBox(e.bbox,Pu(t));const s=[0,0,t.canvas.width,t.canvas.height];i=Eh.intersect(i,s)||[0,0,0,0];const r=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-r,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(c,o,l),u=h.context;u.translate(-r,-a),u.transform(...n),e.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:r,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(r,a),t.save()),pg(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Pu(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=Eh.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,s){if(tc(bg,this,kg).call(this),fg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],r=t[3]-t[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=r;const[s,a]=Eh.singularValueDecompose2dScale(Pu(this.ctx)),{viewportScale:o}=this,l=Math.ceil(i*this.outputScaleX*o),c=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:h,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(s,0,0,-a,0,r*a),fg(this.ctx)}else fg(this.ctx),this.ctx.rect(t[0],t[1],i,r),this.ctx.clip(),this.endPath()}this.current=new hg(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),tc(bg,this,Cg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1;let r,a,o,l=new Uint8Array(s*(n+1));const c=t+7&-8;let h=new Uint8Array(c*n),u=0;for(const g of e.data){let e=128;for(;e>0;)h[u++]=g&e?0:255,e>>=1}let d=0;for(u=0,0!==h[u]&&(l[0]=1,++d),a=1;a<t;a++)h[u]!==h[u+1]&&(l[a]=h[u]?2:1,++d),u++;for(0!==h[u]&&(l[a]=2,++d),r=1;r<n;r++){u=r*c,o=r*s,h[u-c]!==h[u]&&(l[o]=h[u]?1:8,++d);let e=(h[u]?4:0)+(h[u-c]?8:0);for(a=1;a<t;a++)e=(e>>2)+(h[u+1]?4:0)+(h[u-c+1]?8:0),i[e]&&(l[o+a]=i[e],++d),u++;if(h[u-c]!==h[u]&&(l[o+a]=h[u]?2:4,++d),d>1e3)return null}for(u=c*(n-1),o=r*s,0!==h[u]&&(l[o]=8,++d),a=1;a<t;a++)h[u]!==h[u+1]&&(l[o+a]=h[u]?4:8,++d),u++;if(0!==h[u]&&(l[o+a]=4,++d),d>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),f=new Path2D;for(r=0;d&&r<=n;r++){let e=r*s;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%s,r);const i=e;let a=l[e];do{const t=p[a];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(a=n,l[e]=0):(a=n&51*a>>4,l[e]&=a>>2|a<<2),f.lineTo(e%s,e/s|0),l[e]||--d}while(i!==e);--r}return h=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(f),e.beginPath(),e.restore()}}(e)),i.compiled))return void i.compiled(n);const s=this._createMaskCanvas(e),r=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=Pu(a);a.transform(t,n,i,s,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,h=r.length;c<h;c+=2){const e=Eh.transform(o,[t,n,i,s,r[c],r[c+1]]),[h,u]=Eh.applyTransform([0,0],e);a.drawImage(l.canvas,h,u)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:e,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),c=l.context;c.save();dg(c,this.getObject(e,s)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,Nu(t),Kf):n,c.fillRect(0,0,r,a),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),cg(t,l.canvas,0,0,r,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):ch("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void ch("Dependent image isn't ready yet");const r=s.width,a=s.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!hc){const{filter:e}=i;"none"!==e&&""!==e&&(i.filter="none")}let s;if(i.scale(1/t,-1/n),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ug(i,e),s=this.applyTransferMapsToCanvas(i)}const r=this._scaleImage(s,Nu(i));i.imageSmoothingEnabled=gg(Pu(i),e.interpolate),cg(i,r.img,0,0,r.paintWidth,r.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,s=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ug(s,e),i=this.applyTransferMapsToCanvas(s)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),cg(n,i,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===yg?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pu(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let r,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(s);if(n===i)if(0===e)r=a=1/n;else{const t=n*e;r=a=t<1?1/t:1}else if(0===e)r=1/n,a=1/i;else{const t=n*e,s=i*e;r=t<1?1/t:1,a=s<1?1/s:1}}else{const o=Math.abs(t*s-n*i),l=Math.hypot(t,n),c=Math.hypot(i,s);if(0===e)r=c/o,a=l/o;else{const t=e*o;r=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=n||1,1===i&&1===s)return void t.stroke();const r=t.getLineDash();if(e&&t.save(),t.scale(i,s),r.length>0){const e=Math.max(i,s);t.setLineDash(r.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function kg(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function Cg(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}for(const n in ih)void 0!==wg.prototype[n]&&(wg.prototype[ih[n]]=wg.prototype[n]);class xg{static get workerPort(){return tc(xg,this,Sg)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");Sg._=tc(xg,this,e)}static get workerSrc(){return tc(xg,this,Ag)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");Ag._=tc(xg,this,e)}}var Sg={_:null},Ag={_:""};const Eg=1,Tg=2,Mg=1,Ig=2,Rg=3,Pg=4,Ng=5,Lg=6,Dg=7,Fg=8;function Og(e){switch(e instanceof Error||"object"===typeof e&&null!==e||hh('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new wh(e.message);case"MissingPDFException":return new _h(e.message);case"PasswordException":return new gh(e.message,e.code);case"UnexpectedResponseException":return new yh(e.message,e.status);case"UnknownErrorException":return new mh(e.message,e.details);default:return new mh(e.message,e.toString())}}var jg=new WeakSet;class Wg{constructor(e,t,n){Zl(this,jg),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void tc(jg,this,Bg).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Eg)n.resolve(t.data);else{if(t.callback!==Tg)throw new Error("Unexpected callback case");n.reject(Og(t.reason))}return}const i=this.actionHandler[t.action];if(!i)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,s=t.sourceName;new Promise((function(e){e(i(t.data))})).then((function(i){n.postMessage({sourceName:e,targetName:s,callback:Eg,callbackId:t.callbackId,data:i})}),(function(i){n.postMessage({sourceName:e,targetName:s,callback:Tg,callbackId:t.callbackId,reason:Og(i)})}))}else t.streamId?tc(jg,this,zg).call(this,t):i(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(r){s.reject(r)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:e,streamId:s,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[s].pullCall=t,o.postMessage({sourceName:r,targetName:a,stream:Lg,streamId:s,desiredSize:e.desiredSize}),t.promise},cancel:e=>{uh(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[s].cancelCall=t,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:Mg,streamId:s,reason:Og(e)}),t.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}function zg(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this,a=this.actionHandler[e.action],o={enqueue(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Pg,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Rg,streamId:t}),delete r.streamSinks[t])},error(e){uh(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Ng,streamId:t,reason:Og(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,new Promise((function(t){t(a(e.data,o))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Fg,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:Fg,streamId:t,reason:Og(e)})}))}function Bg(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,r=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Fg:e.success?r.startCall.resolve():r.startCall.reject(Og(e.reason));break;case Dg:e.success?r.pullCall.resolve():r.pullCall.reject(Og(e.reason));break;case Lg:if(!a){s.postMessage({sourceName:n,targetName:i,stream:Dg,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null===(t=a.onPull)||void 0===t?void 0:t.call(a))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Dg,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:Dg,streamId:t,reason:Og(e)})}));break;case Pg:if(uh(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(e.chunk);break;case Rg:if(uh(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),tc(jg,this,Ug).call(this,r,t);break;case Ng:uh(r,"error should have stream controller"),r.controller.error(Og(e.reason)),tc(jg,this,Ug).call(this,r,t);break;case Ig:e.success?r.cancelCall.resolve():r.cancelCall.reject(Og(e.reason)),tc(jg,this,Ug).call(this,r,t);break;case Mg:if(!a)break;new Promise((function(t){var n;t(null===(n=a.onCancel)||void 0===n?void 0:n.call(a,Og(e.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:i,stream:Ig,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:n,targetName:i,stream:Ig,streamId:t,reason:Og(e)})})),a.sinkCapability.reject(Og(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Ug(e,t){var n,i,s;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(s=e.cancelCall)||void 0===s?void 0:s.promise]),delete this.streamControllers[t]}var Hg=new WeakMap,qg=new WeakMap;class Vg{constructor(e){let{parsedData:t,rawData:n}=e;ec(this,Hg,void 0),ec(this,qg,void 0),sc(Hg,this,t),sc(qg,this,n)}getRaw(){return ic(qg,this)}get(e){var t;return null!==(t=ic(Hg,this).get(e))&&void 0!==t?t:null}getAll(){return xh(ic(Hg,this))}has(e){return ic(Hg,this).has(e)}}const Gg=Symbol("INTERNAL");var Kg=new WeakMap,Yg=new WeakMap,Xg=new WeakMap,Qg=new WeakMap;class $g{constructor(e,t){let{name:n,intent:i,usage:s}=t;ec(this,Kg,!1),ec(this,Yg,!1),ec(this,Xg,!1),ec(this,Qg,!0),sc(Kg,this,!!(e&gc)),sc(Yg,this,!!(e&mc)),this.name=n,this.intent=i,this.usage=s}get visible(){if(ic(Xg,this))return ic(Qg,this);if(!ic(Qg,this))return!1;const{print:e,view:t}=this.usage;return ic(Kg,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!ic(Yg,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Gg&&hh("Internal method `_setVisible` called."),sc(Xg,this,n),sc(Qg,this,t)}}var Jg=new WeakMap,Zg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakSet;class im{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gc;if(Zl(this,nm),ec(this,Jg,null),ec(this,Zg,new Map),ec(this,em,null),ec(this,tm,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,sc(tm,this,e.order);for(const n of e.groups)ic(Zg,this).set(n.id,new $g(t,n));if("OFF"===e.baseState)for(const e of ic(Zg,this).values())e._setVisible(Gg,!1);for(const t of e.on)ic(Zg,this).get(t)._setVisible(Gg,!0);for(const t of e.off)ic(Zg,this).get(t)._setVisible(Gg,!1);sc(em,this,this.getHash())}}isVisible(e){if(0===ic(Zg,this).size)return!0;if(!e)return lh("Optional content group not defined."),!0;if("OCG"===e.type)return ic(Zg,this).has(e.id)?ic(Zg,this).get(e.id).visible:(ch("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return tc(nm,this,sm).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!ic(Zg,this).has(t))return ch("Optional content group not found: ".concat(t)),!0;if(ic(Zg,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!ic(Zg,this).has(t))return ch("Optional content group not found: ".concat(t)),!0;if(!ic(Zg,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!ic(Zg,this).has(t))return ch("Optional content group not found: ".concat(t)),!0;if(!ic(Zg,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!ic(Zg,this).has(t))return ch("Optional content group not found: ".concat(t)),!0;if(ic(Zg,this).get(t).visible)return!1}return!0}return ch("Unknown optional content policy ".concat(e.policy,".")),!0}return ch("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ic(Zg,this).get(e);n?(n._setVisible(Gg,!!t,!0),sc(Jg,this,null)):ch("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const s of n){switch(s){case"ON":case"OFF":case"Toggle":t=s;continue}const e=ic(Zg,this).get(s);if(e)switch(t){case"ON":e._setVisible(Gg,!0);break;case"OFF":e._setVisible(Gg,!1);break;case"Toggle":e._setVisible(Gg,!e.visible)}}sc(Jg,this,null)}get hasInitialVisibility(){return null===ic(em,this)||this.getHash()===ic(em,this)}getOrder(){return ic(Zg,this).size?ic(tm,this)?ic(tm,this).slice():[...ic(Zg,this).keys()]:null}getGroups(){return ic(Zg,this).size>0?xh(ic(Zg,this)):null}getGroup(e){return ic(Zg,this).get(e)||null}getHash(){if(null!==ic(Jg,this))return ic(Jg,this);const e=new Rf;for(const[t,n]of ic(Zg,this))e.update("".concat(t,":").concat(n.visible));return sc(Jg,this,e.hexdigest())}}function sm(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let s;if(Array.isArray(t))s=tc(nm,this,sm).call(this,t);else{if(!ic(Zg,this).has(t))return ch("Optional content group not found: ".concat(t)),!0;s=ic(Zg,this).get(t).visible}switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===n}class rm{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;uh(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===r||void 0===r?void 0:r.length)>0){const e=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),e.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),e.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),e.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{uh(this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,s;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(s=i.onProgress)||void 0===s||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){uh(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new am(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new om(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class am{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=wu(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class om{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function lm(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:i,disableRange:s}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*i)return r;if(s||!n)return r;if("bytes"!==t("Accept-Ranges"))return r;return"identity"!==(t("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function cm(e){const t=e("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),r(e)}if(n=function(e){const t=[];let n;const s=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=s.exec(e));){let[,e,i,s]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,s]}const r=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),r.push(n)}return r.join("")}(e),n)return r(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),r(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function s(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),s=Ch(n);n=i.decode(s),t=!1}catch{}}return n}function r(e){return t&&/[\x80-\xff]/.test(e)&&(e=s("utf-8",e),t&&(e=s("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:s(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,i){if("q"===n||"Q"===n)return s(t,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{i=atob(i)}catch{}return s(t,i)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(wu(e))return e}return null}function hm(e,t){return 404===e||0===e&&t.startsWith("file:")?new _h('Missing PDF "'+t+'".'):new yh("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function um(e){return 200===e||206===e}function dm(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function pm(e){const t=new Headers;for(const n in e){const i=e[n];void 0!==i&&t.append(n,i)}return t}function fm(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(ch("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class gm{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return uh(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new mm(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new vm(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class mm{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=pm(this._stream.httpHeaders);const n=t.url;fetch(n,dm(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!um(e.status))throw hm(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:i,suggestedLength:s}=lm({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=s||this._contentLength,this._filename=cm(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new wh("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fm(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class vm{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController,this._headers=pm(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(t,"-").concat(n-1));const s=i.url;fetch(s,dm(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!um(e.status))throw hm(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:fm(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class _m{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const i={begin:e,end:t};for(const s in n)i[s]=n[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const e=this.httpHeaders[s];void 0!==e&&t.setRequestHeader(s,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;var s;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void(null===(s=n.onError)||void 0===s||s.call(n,i.status));const r=i.status||200;var a;if(!(200===r&&206===n.expectedStatus)&&r!==n.expectedStatus)return void(null===(a=n.onError)||void 0===a||a.call(n,i.status));const o=function(e){const t=e.response;return"string"!==typeof t?t:Ch(t).buffer}(i);if(206===r){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else if(o)n.onDone({begin:0,chunk:o});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ym{constructor(e){this._source=e,this._manager=new _m(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return uh(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bm(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new wm(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bm{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:i,suggestedLength:s}=lm({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=cm(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=hm(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class wm{constructor(e,t,n){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=hm(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const km=/^file:\/\/\/[a-zA-Z]:\//;class Cm{constructor(e){this.source=e,this.url=function(e){const t=Vf.get("url"),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse("file:///".concat(e)):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return uh(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Mm(this):new Em(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new Im(this,e,t):new Tm(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class xm{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new wh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Sm{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Am(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class Em extends xm{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new _h('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:i,suggestedLength:s}=lm({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=s||this._contentLength,this._filename=cm(n)};if(this._request=null,"http:"===this._url.protocol){const n=Vf.get("http");this._request=n.request(Am(this._url,e.httpHeaders),t)}else{const n=Vf.get("https");this._request=n.request(Am(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class Tm extends Sm{constructor(e,t,n){super(e),this._httpHeaders={};for(const s in e.httpHeaders){const t=e.httpHeaders[s];void 0!==t&&(this._httpHeaders[s]=t)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(n-1);const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new _h('Missing PDF "'.concat(this._url,'".'));this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=Vf.get("http");this._request=e.request(Am(this._url,this._httpHeaders),i)}else{const e=Vf.get("https");this._request=e.request(Am(this._url,this._httpHeaders),i)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class Mm extends xm{constructor(e){super(e);let t=decodeURIComponent(this._url.path);km.test(this._url.href)&&(t=t.replace(/^\//,""));const n=Vf.get("fs");n.promises.lstat(t).then((e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()}),(e=>{"ENOENT"===e.code&&(e=new _h('Missing PDF "'.concat(t,'".'))),this._storedError=e,this._headersCapability.reject(e)}))}}class Im extends Sm{constructor(e,t,n){super(e);let i=decodeURIComponent(this._url.path);km.test(this._url.href)&&(i=i.replace(/^\//,""));const s=Vf.get("fs");this._setReadableStream(s.createReadStream(i,{start:t,end:n-1}))}}const Rm=30,Pm=.8;var Nm=new WeakMap,Lm=new WeakMap,Dm=new WeakMap,Fm=new WeakMap,Om=new WeakMap,jm=new WeakMap,Wm=new WeakMap,zm=new WeakMap,Bm=new WeakMap,Um=new WeakMap,Hm=new WeakMap,qm=new WeakMap,Vm=new WeakMap,Gm=new WeakMap,Km=new WeakMap,Ym=new WeakMap,Xm=new WeakMap,Qm=new WeakMap,$m=new WeakSet;class Jm{constructor(e){var t;let{textContentSource:n,container:i,viewport:s}=e;if(Zl(this,$m),ec(this,Nm,Promise.withResolvers()),ec(this,Lm,null),ec(this,Dm,!1),ec(this,Fm,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),ec(this,Om,null),ec(this,jm,null),ec(this,Wm,0),ec(this,zm,0),ec(this,Bm,null),ec(this,Um,null),ec(this,Hm,0),ec(this,qm,0),ec(this,Vm,Object.create(null)),ec(this,Gm,[]),ec(this,Km,null),ec(this,Ym,[]),ec(this,Xm,new WeakMap),ec(this,Qm,null),n instanceof ReadableStream)sc(Km,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');sc(Km,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}sc(Lm,this,sc(Um,this,i)),sc(qm,this,s.scale*(globalThis.devicePixelRatio||1)),sc(Hm,this,s.rotation),sc(jm,this,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:o,pageY:l}=s.rawDims;sc(Qm,this,[1,0,0,-1,-o,l+a]),sc(zm,this,r),sc(Wm,this,a),Lu(i,s),ic(Nm,this).promise.catch((()=>{})).then((()=>{av._.delete(this),sc(jm,this,null),sc(Vm,this,null)}))}render(){const e=()=>{ic(Bm,this).read().then((t=>{var n;let{value:i,done:s}=t;s?ic(Nm,this).resolve():(null!==(n=ic(Om,this))&&void 0!==n||sc(Om,this,i.lang),Object.assign(ic(Vm,this),i.styles),tc($m,this,Zm).call(this,i.items),e())}),ic(Nm,this).reject)};return sc(Bm,this,ic(Km,this).getReader()),av._.add(this),e(),ic(Nm,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==ic(Hm,this)&&(null===n||void 0===n||n(),sc(Hm,this,s),Lu(ic(Um,this),{rotation:s})),i!==ic(qm,this)){null===n||void 0===n||n(),sc(qm,this,i);const e={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:nv.call(Jm,ic(Om,this))};for(const t of ic(Ym,this))e.properties=ic(Xm,this).get(t),e.div=t,tc($m,this,tv).call(this,e)}}cancel(){var e;const t=new wh("TextLayer task cancelled.");null===(e=ic(Bm,this))||void 0===e||e.cancel(t).catch((()=>{})),sc(Bm,this,null),ic(Nm,this).reject(t)}get textDivs(){return ic(Ym,this)}get textContentItemsStr(){return ic(Gm,this)}static cleanup(){if(!(tc(Jm,this,av)._.size>0)){tc(Jm,this,sv)._.clear();for(const{canvas:e}of tc(Jm,this,rv)._.values())e.remove();tc(Jm,this,rv)._.clear()}}}function Zm(e){var t;if(ic(Dm,this))return;(t=ic(jm,this)).ctx||(t.ctx=nv.call(ql,ic(Om,this)));const n=ic(Ym,this),i=ic(Gm,this);for(const s of e){if(n.length>1e5)return ch("Ignoring additional textDivs for performance reasons."),void sc(Dm,this,!0);if(void 0!==s.str)i.push(s.str),tc($m,this,ev).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=ic(Lm,this);sc(Lm,this,document.createElement("span")),ic(Lm,this).classList.add("markedContent"),null!==s.id&&ic(Lm,this).setAttribute("id","".concat(s.id)),e.append(ic(Lm,this))}else"endMarkedContent"===s.type&&sc(Lm,this,ic(Lm,this).parentNode)}}function ev(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};ic(Ym,this).push(t);const i=Eh.transform(ic(Qm,this),e.transform);let s=Math.atan2(i[1],i[0]);const r=ic(Vm,this)[e.fontName];r.vertical&&(s+=Math.PI/2);const a=ic(Fm,this)&&r.fontSubstitution||r.fontFamily,o=Math.hypot(i[2],i[3]),l=o*iv.call(ql,a,ic(Om,this));let c,h;0===s?(c=i[4],h=i[5]-l):(c=i[4]+l*Math.sin(s),h=i[5]-l*Math.cos(s));const u="calc(var(--scale-factor)*",d=t.style;ic(Lm,this)===ic(Um,this)?(d.left="".concat((100*c/ic(zm,this)).toFixed(2),"%"),d.top="".concat((100*h/ic(Wm,this)).toFixed(2),"%")):(d.left="".concat(u).concat(c.toFixed(2),"px)"),d.top="".concat(u).concat(h.toFixed(2),"px)")),d.fontSize="".concat(u).concat(o.toFixed(2),"px)"),d.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,ic(Fm,this)&&(t.dataset.fontName=r.fontSubstitutionLoadedName||e.fontName),0!==s&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=r.vertical?e.height:e.width),ic(Xm,this).set(t,n),ic(jm,this).div=t,ic(jm,this).properties=n,tc($m,this,tv).call(this,ic(jm,this)),n.hasText&&ic(Lm,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),ic(Lm,this).append(e)}}function tv(e){const{div:t,properties:n,ctx:i,prevFontSize:s,prevFontFamily:r}=e,{style:a}=t;let o="";if(0!==n.canvasWidth&&n.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:h}=n;s===h&&r===l||(i.font="".concat(h*ic(qm,this),"px ").concat(l),e.prevFontSize=h,e.prevFontFamily=l);const{width:u}=i.measureText(t.textContent);u>0&&(o="scaleX(".concat(c*ic(qm,this)/u,")"))}0!==n.angle&&(o="rotate(".concat(n.angle,"deg) ").concat(o)),o.length>0&&(a.transform=o)}function nv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=tc(ql,this,rv)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1}),tc(ql,this,rv)._.set(e,t)}return t}function iv(e,t){const n=tc(ql,this,sv)._.get(e);if(n)return n;const i=tc(ql,this,nv).call(this,t),s=i.font;i.canvas.width=i.canvas.height=Rm,i.font="".concat(Rm,"px ").concat(e);const r=i.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const t=a/(a+o);return tc(ql,this,sv)._.set(e,t),i.canvas.width=i.canvas.height=0,i.font=s,t}i.strokeStyle="red",i.clearRect(0,0,Rm,Rm),i.strokeText("g",0,0);let l=i.getImageData(0,0,Rm,Rm).data;o=0;for(let h=l.length-1-3;h>=0;h-=4)if(l[h]>0){o=Math.ceil(h/4/Rm);break}i.clearRect(0,0,Rm,Rm),i.strokeText("A",0,Rm),l=i.getImageData(0,0,Rm,Rm).data,a=0;for(let h=0,u=l.length;h<u;h+=4)if(l[h]>0){a=Rm-Math.floor(h/4/Rm);break}i.canvas.width=i.canvas.height=0,i.font=s;const c=a?a/(a+o):Pm;return tc(ql,this,sv)._.set(e,c),c}ql=Jm;var sv={_:new Map},rv={_:new Map},av={_:new Set};function ov(){Eu("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:e,container:t,viewport:n,...i}=arguments[0],s=Object.keys(i);s.length>0&&ch("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new Jm({textContentSource:e,container:t,viewport:n}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function lv(){Eu("`updateTextLayer`, please use `TextLayer` instead.")}class cv{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let s=null;const r=n.name;if("#text"===r)s=n.value;else{if(!cv.shouldBuildText(r))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?s=n.attributes.textContent:n.value&&(s=n.value)}if(null!==s&&t.push({str:s}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const hv=65536,uv=hc?class extends qh{_createCanvas(e,t){return Vf.get("canvas").createCanvas(e,t)}}:class extends qh{constructor(){let{ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},dv=hc?class extends Vh{_fetchData(e,t){return Gf(e).then((e=>({cMapData:e,compressionType:t})))}}:gu,pv=hc?class extends Hh{}:class extends Hh{constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Zl(this,nu),ec(this,Qh,void 0),ec(this,$h,void 0),ec(this,Jh,void 0),ec(this,Zh,void 0),ec(this,eu,void 0),ec(this,tu,0),sc(Jh,this,e),sc(Zh,this,t)}addFilter(e){var t,n;if(!e)return"none";let i=nc(nu,this,iu).get(e);if(i)return i;const[s,r,a]=tc(nu,this,au).call(this,e),o=1===e.length?s:"".concat(s).concat(r).concat(a);if(i=nc(nu,this,iu).get(o),i)return nc(nu,this,iu).set(e,i),i;const l="g_".concat(ic(Jh,this),"_transfer_map_").concat((sc(tu,this,(t=ic(tu,this),n=t++,t)),n)),c="url(#".concat(l,")");nc(nu,this,iu).set(e,c),nc(nu,this,iu).set(o,c);const h=tc(nu,this,cu).call(this,l);return tc(nu,this,uu).call(this,s,r,a,h),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),s="base";let r=nc(nu,this,su).get(s);if((null===(n=r)||void 0===n?void 0:n.key)===i)return r.url;var a;r?(null===(a=r.filter)||void 0===a||a.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},nc(nu,this,su).set(s,r));if(!e||!t)return r.url;const o=tc(nu,this,pu).call(this,e);e=Eh.makeHexColor(...o);const l=tc(nu,this,pu).call(this,t);if(t=Eh.makeHexColor(...l),nc(nu,this,ru).style.color="","#000000"===e&&"#ffffff"===t||e===t)return r.url;const c=new Array(256);for(let f=0;f<=255;f++){const e=f/255;c[f]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const h=c.join(","),u="g_".concat(ic(Jh,this),"_hcm_filter"),d=r.filter=tc(nu,this,cu).call(this,u);tc(nu,this,uu).call(this,h,h,h,d),tc(nu,this,lu).call(this,d);const p=(e,t)=>{const n=o[e]/255,i=l[e]/255,s=new Array(t+1);for(let r=0;r<=t;r++)s[r]=n+r/t*(i-n);return s.join(",")};return tc(nu,this,uu).call(this,p(0,5),p(1,5),p(2,5),d),r.url="url(#".concat(u,")"),r.url}addAlphaFilter(e){var t,n;let i=nc(nu,this,iu).get(e);if(i)return i;const[s]=tc(nu,this,au).call(this,[e]),r="alpha_".concat(s);if(i=nc(nu,this,iu).get(r),i)return nc(nu,this,iu).set(e,i),i;const a="g_".concat(ic(Jh,this),"_alpha_map_").concat((sc(tu,this,(t=ic(tu,this),n=t++,t)),n)),o="url(#".concat(a,")");nc(nu,this,iu).set(e,o),nc(nu,this,iu).set(r,o);const l=tc(nu,this,cu).call(this,a);return tc(nu,this,du).call(this,s,l),o}addLuminosityFilter(e){var t,n;let i,s,r=nc(nu,this,iu).get(e||"luminosity");if(r)return r;if(e?([i]=tc(nu,this,au).call(this,[e]),s="luminosity_".concat(i)):s="luminosity",r=nc(nu,this,iu).get(s),r)return nc(nu,this,iu).set(e,r),r;const a="g_".concat(ic(Jh,this),"_luminosity_map_").concat((sc(tu,this,(t=ic(tu,this),n=t++,t)),n)),o="url(#".concat(a,")");nc(nu,this,iu).set(e,o),nc(nu,this,iu).set(s,o);const l=tc(nu,this,cu).call(this,a);return tc(nu,this,ou).call(this,l),e&&tc(nu,this,du).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,s){var r;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(s);let o=nc(nu,this,su).get(e);if((null===(r=o)||void 0===r?void 0:r.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},nc(nu,this,su).set(e,o));if(!t||!n)return o.url;const[c,h]=[t,n].map(tc(nu,this,pu).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,f]=[i,s].map(tc(nu,this,pu).bind(this));d<u&&([u,d,p,f]=[d,u,f,p]),nc(nu,this,ru).style.color="";const g=(e,t,n)=>{const i=new Array(256),s=(d-u)/n,r=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*s),t=r+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(ic(Jh,this),"_hcm_").concat(e,"_filter"),v=o.filter=tc(nu,this,cu).call(this,m);return tc(nu,this,lu).call(this,v),tc(nu,this,uu).call(this,g(p[0],f[0],5),g(p[1],f[1],5),g(p[2],f[2],5),v),o.url="url(#".concat(m,")"),o.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==nc(nu,this,su).size||(ic($h,this)&&(ic($h,this).parentNode.parentNode.remove(),sc($h,this,null)),ic(Qh,this)&&(ic(Qh,this).clear(),sc(Qh,this,null)),sc(tu,this,0))}},fv=hc?class extends Gh{_fetchData(e){return Gf(e)}}:mu;function gv(e){var t,n;if("string"===typeof e||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e}),"object"!==typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const i=new vv,{docId:s}=i,r=e.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(hc&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(e.url):null,a=e.data?function(e){if(hc&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return Ch(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(e.data):null,o=e.httpHeaders||null,l=!0===e.withCredentials,c=null!==(t=e.password)&&void 0!==t?t:null,h=e.range instanceof yv?e.range:null,u=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:hv;let d=e.worker instanceof Rv?e.worker:null;const p=e.verbosity,f="string"!==typeof e.docBaseUrl||bu(e.docBaseUrl)?null:e.docBaseUrl,g="string"===typeof e.cMapUrl?e.cMapUrl:null,m=!1!==e.cMapPacked,v=e.CMapReaderFactory||dv,_="string"===typeof e.standardFontDataUrl?e.standardFontDataUrl:null,y=e.StandardFontDataFactory||fv,b=!0!==e.stopAtErrors,w=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,k=!1!==e.isEvalSupported,C="boolean"===typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!hc,x=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,S="boolean"===typeof e.disableFontFace?e.disableFontFace:hc,A=!0===e.fontExtraProperties,E=!0===e.enableXfa,T=e.ownerDocument||globalThis.document,M=!0===e.disableRange,I=!0===e.disableStream,R=!0===e.disableAutoFetch,P=!0===e.pdfBug,N=h?h.length:null!==(n=e.length)&&void 0!==n?n:NaN,L="boolean"===typeof e.useSystemFonts?e.useSystemFonts:!hc&&!S,D="boolean"===typeof e.useWorkerFetch?e.useWorkerFetch:v===gu&&y===mu&&g&&_&&Su(g,document.baseURI)&&Su(_,document.baseURI),F=e.canvasFactory||new uv({ownerDocument:T}),O=e.filterFactory||new pv({docId:s,ownerDocument:T});ah(p);const j={canvasFactory:F,filterFactory:O};if(D||(j.cMapReaderFactory=new v({baseUrl:g,isCompressed:m}),j.standardFontDataFactory=new y({baseUrl:_})),!d){const e={verbosity:p,port:xg.workerPort};d=e.port?Rv.fromPort(e):new Rv(e),i._worker=d}const W={docId:s,apiVersion:"4.3.136",data:a,password:c,disableAutoFetch:R,rangeChunkSize:u,length:N,docBaseUrl:f,enableXfa:E,evaluatorOptions:{maxImageSize:w,disableFontFace:S,ignoreErrors:b,isEvalSupported:k,isOffscreenCanvasSupported:C,canvasMaxAreaInBytes:x,fontExtraProperties:A,useSystemFonts:L,cMapUrl:D?g:null,standardFontDataUrl:D?_:null}},z={disableFontFace:S,fontExtraProperties:A,ownerDocument:T,pdfBug:P,styleElement:null,loadingParams:{disableAutoFetch:R,enableXfa:E}};return d.promise.then((function(){if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const e=d.messageHandler.sendWithPromise("GetDocRequest",W,a?[a.buffer]:null);let t;if(h)t=new rm(h,{disableRange:M,disableStream:I});else if(!a){t=(e=>{if(hc){return function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype}()&&Su(e.url)?new gm(e):new Cm(e)}return Su(e.url)?new gm(e):new ym(e)})({url:r,length:N,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:M,disableStream:I})}return e.then((e=>{if(i.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const n=new Wg(s,e,d.port),r=new zv(n,i,t,z,j);i._transport=r,n.send("Ready",null)}))})).catch(i._capability.reject),i}function mv(e){return"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0}class vv{constructor(){var e,t;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((_v._=(e=_v._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(i){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var _v={_:0};class yv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){hh("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class bv{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ph(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var wv=new WeakMap,kv=new WeakMap,Cv=new WeakSet;class xv{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Zl(this,Cv),ec(this,wv,null),ec(this,kv,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new xu:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Vv,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _u({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ph(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:s,intent:r="display",annotationMode:a=wc.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:d=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(r,a,d),{renderingIntent:f,cacheKey:g}=p;sc(kv,this,!1),tc(Cv,this,Av).call(this),c||(c=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(f&mc);var _;m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(_=this._stats)||void 0===_||_.time("Page Request"),this._pumpOperatorList(p));const y=e=>{var t;(m.renderTasks.delete(b),(this._maybeCleanupAfterRender||v)&&sc(kv,this,!0),tc(Cv,this,Sv).call(this,!v),e?(b.capability.reject(e),this._abortOperatorList({intentState:m,reason:e instanceof Error?e:new Error(e)})):b.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new Xv({callback:y,params:{canvasContext:i,viewport:s,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:u});((n=m).renderTasks||(n.renderTasks=new Set)).add(b);const w=b.task;return Promise.all([m.displayReadyCapability.promise,c]).then((e=>{var t;let[n,i]=e;if(this.destroyed)y();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:n,optionalContentConfig:i}),b.operatorListChanged()}})).catch(y),w}getOperatorList(){let{intent:e="display",annotationMode:t=wc.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this._transport.getRenderingIntent(e,t,n,!0);let s,r=this._intentStates.get(i.cacheKey);var a,o;(r||(r=Object.create(null),this._intentStates.set(i.cacheKey,r)),r.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(s))},r.opListReadCapability=Promise.withResolvers(),((a=r).renderTasks||(a.renderTasks=new Set)).add(s),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(o=this._stats)||void 0===o||o.time("Page Request"),this._pumpOperatorList(i));return r.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>cv.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,n){const i=t.getReader(),s={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then((function(n){var i;let{value:r,done:a}=n;a?e(s):(null!==(i=s.lang)&&void 0!==i||(s.lang=r.lang),Object.assign(s.styles,r.styles),s.items.push(...r.items),t())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),sc(kv,this,!1),tc(Cv,this,Av).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];sc(kv,this,!0);const t=tc(Cv,this,Sv).call(this,!1);return e&&t&&this._stats&&(this._stats=new xu),t}_startRenderPage(e,t){var n,i;const s=this._intentStates.get(t);s&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=s.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&tc(Cv,this,Sv).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i}=e;const{map:s,transfer:r}=i,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s},r).getReader(),o=this._intentStates.get(n);o.streamReader=a;const l=()=>{a.read().then((e=>{let{value:t,done:n}=e;n?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,o),l())}),(e=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const e of o.renderTasks)e.operatorListChanged();tc(Cv,this,Sv).call(this,!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(e);else{if(!o.opListReadCapability)throw e;o.opListReadCapability.reject(e)}}}))};l()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof yu){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})}),e))}}if(t.streamReader.cancel(new wh(n.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function Sv(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(tc(Cv,this,Av).call(this),!ic(kv,this)||this.destroyed)return!1;if(e)return sc(wv,this,setTimeout((()=>{sc(wv,this,null),tc(Cv,this,Sv).call(this,!1)}),5e3)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),sc(kv,this,!1),!0}function Av(){ic(wv,this)&&(clearTimeout(ic(wv,this)),sc(wv,this,null))}var Ev=new WeakMap,Tv=new WeakMap;class Mv{constructor(){ec(this,Ev,new Set),ec(this,Tv,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};ic(Tv,this).then((()=>{for(const e of ic(Ev,this))e.call(this,n)}))}addEventListener(e,t){ic(Ev,this).add(t)}removeEventListener(e,t){ic(Ev,this).delete(t)}terminate(){ic(Ev,this).clear()}}const Iv={isWorkerDisabled:!1,fakeWorkerId:0};hc&&(Iv.isWorkerDisabled=!0,xg.workerSrc||(xg.workerSrc="./pdf.worker.mjs")),Iv.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch{return!1}const i=new URL(t,n);return n.origin===i.origin},Iv.createCDNWrapper=function(e){const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};class Rv{constructor(){let{name:e=null,port:t=null,verbosity:n=oh()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var i;if(null!==(i=Nv._)&&void 0!==i&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(Nv._||(Nv._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return hc?Promise.all([Vf.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Wg("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!Iv.isWorkerDisabled&&!Pv(Rv)){let{workerSrc:e}=Rv;try{Iv.isSameOrigin(window.location.href,e)||(e=Iv.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Wg("main","worker",t),i=()=>{t.removeEventListener("error",s),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||i()};t.addEventListener("error",s),n.on("test",(e=>{t.removeEventListener("error",s),this.destroyed?i():e?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())})),n.on("ready",(e=>{if(t.removeEventListener("error",s),this.destroyed)i();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch{lh("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){Iv.isWorkerDisabled||(ch("Setting up fake worker."),Iv.isWorkerDisabled=!0),Rv._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new Mv;this._port=t;const n="fake".concat(Iv.fakeWorkerId++),i=new Wg(n+"_worker",n,t);e.setup(i,t);const s=new Wg(n,n+"_worker",t);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=Nv._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=tc(Rv,this,Nv)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Rv(e)}static get workerSrc(){if(xg.workerSrc)return xg.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ph(this,"_setupFakeWorkerGlobal",(async()=>{if(nc(Rv,this,Pv))return nc(Rv,this,Pv);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function Pv(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch{return null}}var Nv={_:void 0},Lv=new WeakMap,Dv=new WeakMap,Fv=new WeakMap,Ov=new WeakMap,jv=new WeakMap,Wv=new WeakSet;class zv{constructor(e,t,n,i,s){Zl(this,Wv),ec(this,Lv,new Map),ec(this,Dv,new Map),ec(this,Fv,new Map),ec(this,Ov,new Map),ec(this,jv,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Vv,this.fontLoader=new Bf({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ph(this,"annotationStorage",new Ff)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wc.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=gc,r=Pf;switch(e){case"any":s=fc;break;case"display":break;case"print":s=mc;break;default:ch("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case wc.DISABLE:s+=yc;break;case wc.ENABLE:break;case wc.ENABLE_FORMS:s+=vc;break;case wc.ENABLE_STORAGE:s+=_c;r=(s&mc&&n instanceof Wf?n:this.annotationStorage).serializable;break;default:ch("getRenderingIntent - invalid annotationMode: ".concat(t))}return i&&(s+=bc),{renderingIntent:s,cacheKey:"".concat(s,"_").concat(r.hash),annotationStorageSerializable:r}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=ic(jv,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of ic(Dv,this).values())t.push(i._destroy());ic(Dv,this).clear(),ic(Fv,this).clear(),ic(Ov,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),ic(Lv,this).clear(),this.filterFactory.destroy(),Jm.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new wh("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{uh(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function(e){let{value:n,done:i}=e;i?t.close():(uh(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const n=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then((()=>{if(!i.isStreamingSupported||!i.isRangeSupported){var e;if(this._lastProgress)null===(e=t.onProgress)||void 0===e||e.call(t,this._lastProgress);i.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise})),e.on("GetRangeReader",((e,t)=>{uh(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then((function(e){let{value:n,done:i}=e;i?t.close():(uh(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{n.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new bv(n,this))})),e.on("DocException",(function(e){let n;switch(e.name){case"PasswordException":n=new gh(e.message,e.code);break;case"InvalidPDFException":n=new vh(e.message);break;case"MissingPDFException":n=new _h(e.message);break;case"UnexpectedResponseException":n=new yh(e.message,e.status);break;case"UnknownErrorException":n=new mh(e.message,e.details);break;default:hh("DocException - expected a valid Error.")}t._capability.reject(n)})),e.on("PasswordRequest",(e=>{if(sc(jv,this,Promise.withResolvers()),t.onPassword){const i=e=>{e instanceof Error?ic(jv,this).reject(e):ic(jv,this).resolve({password:e})};try{t.onPassword(i,e.code)}catch(n){ic(jv,this).reject(n)}}else ic(jv,this).reject(new gh(e.message,e.code));return ic(jv,this).promise})),e.on("DataLoaded",(e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;ic(Dv,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(t=>{var n;let[i,s,r]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:t,fontExtraProperties:a,pdfBug:o}=this._params;if("error"in r){const e=r.error;ch("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const l=o&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,c=new Uf(r,{disableFontFace:t,inspectFont:l});this.fontLoader.bind(c).catch((()=>e.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!a&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)}));break;case"CopyLocalImage":const{imageRef:h}=r;uh(h,"The imageRef must be defined.");for(const e of ic(Dv,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===h)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error("Got unknown common object type ".concat(s))}return null})),e.on("obj",(e=>{let[t,n,i,s]=e;if(this.destroyed)return;const r=ic(Dv,this).get(n);var a;if(!r.objs.has(t))if(0!==r._intentStates.size)switch(i){case"Image":r.objs.resolve(t,s),(null===s||void 0===s?void 0:s.dataLen)>1e7&&(r._maybeCleanupAfterRender=!0);break;case"Pattern":r.objs.resolve(t,s);break;default:throw new Error("Got unknown object type ".concat(i))}else null===s||void 0===s||null===(a=s.bitmap)||void 0===a||a.close()})),e.on("DocProgress",(e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&ch("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=ic(Fv,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&ic(Ov,this).set(n.refStr,e);const i=new xv(t,n,this,this._params.pdfBug);return ic(Dv,this).set(t,i),i}));return ic(Fv,this).set(t,i),i}getPageIndex(e){return mv(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return tc(Wv,this,Bv).call(this,"GetFieldObjects")}hasJSActions(){return tc(Wv,this,Bv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return tc(Wv,this,Bv).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return tc(Wv,this,Bv).call(this,"GetOptionalContentConfig").then((t=>new im(t,e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=ic(Lv,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,n,i,s;return{info:e[0],metadata:e[1]?new Vg(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(s=this._fullReader)||void 0===s?void 0:s.contentLength)&&void 0!==i?i:null}}));return ic(Lv,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of ic(Dv,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),ic(Lv,this).clear(),this.filterFactory.destroy(!0),Jm.cleanup()}}cachedPageNumber(e){var t;if(!mv(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=ic(Ov,this).get(n))&&void 0!==t?t:null}}function Bv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=ic(Lv,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return ic(Lv,this).set(e,i),i}const Uv=Symbol("INITIAL_DATA");var Hv=new WeakMap,qv=new WeakSet;class Vv{constructor(){Zl(this,qv),ec(this,Hv,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=tc(qv,this,Gv).call(this,e);return n.promise.then((()=>t(n.data))),null}const n=ic(Hv,this)[e];if(!n||n.data===Uv)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=ic(Hv,this)[e];return!!t&&t.data!==Uv}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=tc(qv,this,Gv).call(this,e);n.data=t,n.resolve()}clear(){for(const t in ic(Hv,this)){var e;const{data:n}=ic(Hv,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}sc(Hv,this,Object.create(null))}*[Symbol.iterator](){for(const e in ic(Hv,this)){const{data:t}=ic(Hv,this)[e];t!==Uv&&(yield[e,t])}}}function Gv(e){var t;return(t=ic(Hv,this))[e]||(t[e]={...Promise.withResolvers(),data:Uv})}var Kv=new WeakMap;class Yv{constructor(e){ec(this,Kv,null),sc(Kv,this,e),this.onContinue=null}get promise(){return ic(Kv,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;ic(Kv,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=ic(Kv,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=ic(Kv,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}class Xv{constructor(e){let{callback:t,params:n,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:u=!1,pageColors:d=null}=e;this.callback=t,this.params=n,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Yv(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:s}=e;if(this.cancelled)return;if(this._canvas){if(Qv._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Qv._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:a,transform:o,background:l}=this.params;this.gfx=new wg(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),Qv._.delete(this._canvas),this.callback(t||new yu("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Qv._.delete(this._canvas),this.callback())))}}var Qv={_:new WeakSet};const $v="4.3.136",Jv="0cec64437";function Zv(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function e_(e){return Math.max(0,Math.min(255,255*e))}class t_{static CMYK_G(e){let[t,n,i,s]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+s)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=e_(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=Zv(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(e_)}static RGB_HTML(e){return"#".concat(e.map(Zv).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,s]=e;return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,n+s)]}static CMYK_rgb(e){let[t,n,i,s]=e;return[e_(1-Math.min(1,t+s)),e_(1-Math.min(1,i+s)),e_(1-Math.min(1,n+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const s=1-t,r=1-n,a=1-i;return["CMYK",s,r,a,Math.min(s,r,a)]}}class n_{static setupStorage(e,t,n,i,s){const r=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===s)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",(e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===s)break;e.addEventListener("input",(e=>{i.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const n=e.target.options,s=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:s})}))}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:s,linkService:r}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(s));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&r.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",r=document.createElement(i.name);i.attributes&&this.setAttributes({html:r,element:i,intent:s,linkService:n});const a="richText"!==s,o=e.div;if(o.append(r),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);r.append(e),a&&cv.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,r]];for(;c.length>0;){var h,u;const[e,i,r]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:d}=o;if("#text"===d){const e=document.createTextNode(o.value);l.push(e),r.append(e);continue}const p=null!==o&&void 0!==o&&null!==(h=o.attributes)&&void 0!==h&&h.xmlns?document.createElementNS(o.attributes.xmlns,d):document.createElement(d);if(r.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:s,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&cv.shouldBuildText(d)&&l.push(e),p.append(e)}}for(const d of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const i_=1e3,s_=new WeakSet;function r_(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class a_{static create(e){switch(e.data.annotationType){case Nc:return new f_(e);case Pc:return new __(e);case Xc:switch(e.data.fieldType){case"Tx":return new b_(e);case"Btn":return e.data.radioButton?new C_(e):e.data.checkBox?new k_(e):new x_(e);case"Ch":return new S_(e);case"Sig":return new w_(e)}return new y_(e);case Kc:return new A_(e);case Lc:return new iy(e);case Dc:return new ry(e);case Fc:return new oy(e);case Oc:return new cy(e);case Wc:return new uy(e);case Vc:return new py(e);case Gc:return new gy(e);case jc:return new dy(e);case zc:return new my(e);case Bc:return new vy(e);case Uc:return new _y(e);case Hc:return new yy(e);case qc:return new by(e);case Yc:return new Cy(e);default:return new u_(e)}}}var o_=new WeakMap,l_=new WeakMap,c_=new WeakMap,h_=new WeakSet;class u_{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zl(this,h_),ec(this,o_,null),ec(this,l_,!1),ec(this,c_,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:i}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get hasPopupData(){return u_._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;ic(o_,this)||sc(o_,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&tc(h_,this,d_).call(this,n),null===(t=ic(c_,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;ic(o_,this)&&(tc(h_,this,d_).call(this,ic(o_,this).rect),null===(e=ic(c_,this))||void 0===e||e.popup.resetEdited(),sc(o_,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof y_||(s.tabIndex=i_);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,t.popupRef&&s.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof A_){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,s),s}const{width:a,height:o}=r_(t.rect);if(!e&&t.borderStyle.width>0){r.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");r.borderRadius=t}else if(this instanceof C_){const e="calc(".concat(a,"px * var(--scale-factor)) / calc(").concat(o,"px * var(--scale-factor))");r.borderRadius=e}switch(t.borderStyle.style){case Qc:r.borderStyle="solid";break;case $c:r.borderStyle="dashed";break;case Jc:ch("Unimplemented border style: beveled");break;case Zc:ch("Unimplemented border style: inset");break;case eh:r.borderBottomStyle="solid"}const i=t.borderColor||null;i?(sc(l_,this,!0),r.borderColor=Eh.makeHexColor(0|i[0],0|i[1],0|i[2])):r.borderWidth=0}const l=Eh.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:u,pageY:d}=i.rawDims;r.left="".concat(100*(l[0]-u)/c,"%"),r.top="".concat(100*(l[1]-d)/h,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(r.width="".concat(100*a/c,"%"),r.height="".concat(100*o/h,"%")):this.setRotation(p,s),s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:r}=r_(this.data.rect);let a,o;e%180===0?(a=100*s/n,o=100*r/i):(a=100*r/n,o=100*s/i),t.style.width="".concat(a,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],s=i[0],r=i.slice(1);n.target.style[t]=t_["".concat(s,"_HTML")](r),this.annotationStorage.setValue(this.data.id,{[t]:t_["".concat(s,"_rgb")](r)})};return ph(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];null===s||void 0===s||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const r=n[i];if(r){r({detail:{[i]:s},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect;if(1===e.length){const[,{x:r,y:a},{x:o,y:l}]=e[0];if(i===r&&s===a&&t===o&&n===l)return}const{style:r}=this.container;let a;if(ic(l_,this)){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const u=c.createElement("defs");h.append(u);const d=c.createElement("clipPath"),p="clippath_".concat(this.data.id);d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(const[,{x:g,y:m},{x:v,y:_}]of e){var f;const e=c.createElement("rect"),n=(v-t)/o,i=(s-m)/l,r=(g-v)/o,h=(m-_)/l;e.setAttribute("x",n),e.setAttribute("y",i),e.setAttribute("width",r),e.setAttribute("height",h),d.append(e),null===(f=a)||void 0===f||f.push('<rect vector-effect="non-scaling-stroke" x="'.concat(n,'" y="').concat(i,'" width="').concat(r,'" height="').concat(h,'"/>'))}ic(l_,this)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=sc(c_,this,new A_({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){hh("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:s,exportValues:r}of i){if(-1===e)continue;if(s===t)continue;const i="string"===typeof r?r:null,a=document.querySelector('[data-element-id="'.concat(s,'"]'));!a||s_.has(a)?n.push({id:s,exportValue:i,domElement:a}):ch("_getElementsByName - element not allowed: ".concat(s))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,s=i.getAttribute("data-element-id");s!==t&&(s_.has(i)&&n.push({id:s,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}}function d_(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e);const{width:l,height:c}=r_(e);t.left="".concat(100*(e[0]-a)/s,"%"),t.top="".concat(100*(r-e[3]+o)/r,"%"),0===i?(t.width="".concat(100*l/s,"%"),t.height="".concat(100*c/r,"%")):this.setRotation(i)}var p_=new WeakSet;class f_ extends u_{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),Zl(this,p_),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(tc(p_,this,m_).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(tc(p_,this,v_).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&tc(p_,this,g_).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),tc(p_,this,g_).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=n.get(i);s&&(e[s]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),tc(p_,this,g_).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),tc(p_,this,g_).call(this),!this._fieldObjects)return ch('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:s}=t,r=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===s&&r.push(n)}else for(const t of Object.values(this._fieldObjects))r.push(...t);const a=this.annotationStorage,o=[];for(const t of r){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(s_.has(n)?n.dispatchEvent(new Event("resetform")):ch("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function g_(){this.container.setAttribute("data-internal-link","")}function m_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},tc(p_,this,g_).call(this)}function v_(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),tc(p_,this,g_).call(this)}class __ extends u_{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class y_ extends u_{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Sh.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(n,(e=>{var r;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}s&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(e)}}))}))}_setEventListeners(e,t,n,i){for(const[o,l]of n){var s,r,a;if("Action"===l||null!==(s=this.data.actions)&&void 0!==s&&s[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(r=this.data.actions)&&void 0!==r&&r.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Eh.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,s=e.style;let r;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(pc*i))||1);r=Math.min(i,a(t/pc))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(i,a(e/pc))}s.fontSize="calc(".concat(r,"px * var(--scale-factor))"),s.color=Eh.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class b_ extends y_{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),s.setValue(r.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};var s,r;if(this.data.multiLine)n=document.createElement("textarea"),n.textContent=null!==(s=h)&&void 0!==s?s:l,this.data.doNotScroll&&(n.style.overflowY="hidden");else n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==(r=h)&&void 0!==r?r:l),this.data.doNotScroll&&(n.style.overflowX="hidden");this.data.hasOwnCanvas&&(n.hidden=!0),s_.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=i_,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",(i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),u.formattedValue=null})),n.addEventListener("resetform",(e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=u.userValue=i,u.formattedValue=null}));let d=e=>{const{formattedValue:t}=u;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var a;n.addEventListener("focus",(e=>{var t;if(u.focused)return;const{target:n}=e;u.userValue&&(n.value=u.userValue),u.lastCommittedValue=n.value,u.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(u.focused=!0)})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;u.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:u.userValue.toString()}),n.target.value=u.userValue},formattedValue(n){const{formattedValue:i}=n.detail;u.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:s}=n.detail,{target:r}=n;if(0===s)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",s);let a=u.userValue;!a||a.length<=s||(a=a.slice(0,s),r.value=u.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(e=>{var n;u.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(u.commitKey=3):i=2,-1===i)return;const{value:s}=e.target;u.lastCommittedValue!==s&&(u.lastCommittedValue=s,u.userValue=s,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const i=d;d=null,n.addEventListener("blur",(e=>{var n;if(!u.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(u.focused=!1);const{value:s}=e.target;var r;(u.userValue=s,u.lastCommittedValue!==s)&&(null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:u.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)})),null!==(a=this.data.actions)&&void 0!==a&&a.Keystroke&&n.addEventListener("beforeinput",(e=>{var n;u.lastCommittedValue=null;const{data:i,target:s}=e,{value:r,selectionStart:a,selectionEnd:o}=s;let l=a,c=o;switch(e.inputType){case"deleteWordBackward":{const e=r.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=r.substring(a).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class w_ extends y_{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class k_ extends y_{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return s_.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=i_,s.addEventListener("change",(i=>{const{name:s,checked:r}=i.target;for(const a of this._getElementsByName(s,n)){const n=r&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:r})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class C_ extends y_{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});const s=document.createElement("input");if(s_.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=i_,s.addEventListener("change",(t=>{const{name:i,checked:s}=t.target;for(const r of this._getElementsByName(i,n))e.setValue(r.id,{value:!1});e.setValue(n,{value:s})})),s.addEventListener("resetform",(e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue})),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;s.addEventListener("updatefromsandbox",(t=>{const s={value:t=>{const s=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=s&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(s,t)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class x_ extends f_{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class S_ extends y_{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");s_.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=i_;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),s=!1),i.append(e)}let r=null;if(s){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),r=()=>{e.remove(),i.removeEventListener("input",r),r=null},i.addEventListener("input",r)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:s}=i;return s?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[t])):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const s={value(n){var s;null===(s=r)||void 0===s||s();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const s=i.options,r=n.detail.remove;if(s[r].selected=!1,i.remove(r),s.length>0){-1===Array.prototype.findIndex.call(s,(e=>e.selected))&&(s[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:s,displayValue:r,exportValue:c}=n.detail.insert,h=i.children[s],u=document.createElement("option");u.textContent=r,u.value=c,h?h.before(u):i.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:s}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of s){const{displayValue:t,exportValue:n}=e,s=document.createElement("option");s.textContent=t,s.value=n,i.append(s)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(s,n)})),i.addEventListener("input",(n=>{var i;const s=a(!0),r=a(!1);e.setValue(t,{value:s}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:r,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):i.addEventListener("input",(function(n){e.setValue(t,{value:a(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class A_ extends u_{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:u_._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new K_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(Nh).concat(e))).join(",")),this.container}}var E_=new WeakMap,T_=new WeakMap,M_=new WeakMap,I_=new WeakMap,R_=new WeakMap,P_=new WeakMap,N_=new WeakMap,L_=new WeakMap,D_=new WeakMap,F_=new WeakMap,O_=new WeakMap,j_=new WeakMap,W_=new WeakMap,z_=new WeakMap,B_=new WeakMap,U_=new WeakMap,H_=new WeakMap,q_=new WeakMap,V_=new WeakMap,G_=new WeakSet;class K_{constructor(e){let{container:t,color:n,elements:i,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:c,parentRect:h,open:u}=e;Zl(this,G_),ec(this,E_,tc(G_,this,J_).bind(this)),ec(this,T_,tc(G_,this,ny).bind(this)),ec(this,M_,tc(G_,this,ty).bind(this)),ec(this,I_,tc(G_,this,ey).bind(this)),ec(this,R_,null),ec(this,P_,null),ec(this,N_,null),ec(this,L_,null),ec(this,D_,null),ec(this,F_,null),ec(this,O_,null),ec(this,j_,!1),ec(this,W_,null),ec(this,z_,null),ec(this,B_,null),ec(this,U_,null),ec(this,H_,null),ec(this,q_,null),ec(this,V_,!1),sc(P_,this,t),sc(H_,this,s),sc(N_,this,a),sc(U_,this,o),sc(F_,this,l),sc(R_,this,n),sc(B_,this,c),sc(O_,this,h),sc(D_,this,i),sc(L_,this,Mu.toDateObject(r)),this.trigger=i.flatMap((e=>e.getElementsToTriggerPopup()));for(const p of this.trigger)p.addEventListener("click",ic(I_,this)),p.addEventListener("mouseenter",ic(M_,this)),p.addEventListener("mouseleave",ic(T_,this)),p.classList.add("popupTriggerArea");for(const p of i){var d;null===(d=p.container)||void 0===d||d.addEventListener("keydown",ic(E_,this))}ic(P_,this).hidden=!0,u&&tc(G_,this,ey).call(this)}render(){if(ic(W_,this))return;const e=sc(W_,this,document.createElement("div"));if(e.className="popup",ic(R_,this)){const t=e.style.outlineColor=Eh.makeHexColor(...ic(R_,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)");else{const t=.7;e.style.backgroundColor=Eh.makeHexColor(...ic(R_,this).map((e=>Math.floor(t*(255-e)+e))))}}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=ic(H_,this)),e.append(t),ic(L_,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),e.setAttribute("data-l10n-args",JSON.stringify({date:ic(L_,this).toLocaleDateString(),time:ic(L_,this).toLocaleTimeString()})),t.append(e)}const i=nc(G_,this,Y_);if(i)n_.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(ic(N_,this));e.append(t)}ic(P_,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const e=s[r];i.append(document.createTextNode(e)),r<a-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;ic(q_,this)||sc(q_,this,{contentsObj:ic(N_,this),richText:ic(U_,this)}),n&&sc(z_,this,null),i&&(sc(U_,this,tc(G_,this,$_).call(this,i)),sc(N_,this,null)),null===(t=ic(W_,this))||void 0===t||t.remove(),sc(W_,this,null)}resetEdited(){var e;ic(q_,this)&&(({contentsObj:$l(sc,[N_,this])._,richText:$l(sc,[U_,this])._}=ic(q_,this)),sc(q_,this,null),null===(e=ic(W_,this))||void 0===e||e.remove(),sc(W_,this,null),sc(z_,this,null))}forceHide(){sc(V_,this,this.isVisible),ic(V_,this)&&(ic(P_,this).hidden=!0)}maybeShow(){ic(V_,this)&&(ic(W_,this)||tc(G_,this,ty).call(this),sc(V_,this,!1),ic(P_,this).hidden=!1)}get isVisible(){return!1===ic(P_,this).hidden}}function Y_(e){const t=ic(U_,e),n=ic(N_,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:ic(U_,e).html||null}function X_(e){var t;return(null===(t=nc(G_,e,Y_))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function Q_(e){var t;return(null===(t=nc(G_,e,Y_))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function $_(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:nc(G_,this,Q_),fontSize:nc(G_,this,X_)?"calc(".concat(nc(G_,this,X_),"px * var(--scale-factor))"):""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:i});return n}function J_(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&ic(j_,this))&&tc(G_,this,ey).call(this)}function Z_(){if(null!==ic(z_,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=ic(F_,this);let r=!!ic(O_,this),a=ic(r?O_:B_,this);for(const d of ic(D_,this))if(!a||null!==Eh.intersect(d.data.rect,a)){a=d.data.rect,r=!0;break}const o=Eh.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=r?a[2]-a[0]+5:0,c=o[0]+l,h=o[1];sc(z_,this,[100*(c-i)/t,100*(h-s)/n]);const{style:u}=ic(P_,this);u.left="".concat(ic(z_,this)[0],"%"),u.top="".concat(ic(z_,this)[1],"%")}function ey(){sc(j_,this,!ic(j_,this)),ic(j_,this)?(tc(G_,this,ty).call(this),ic(P_,this).addEventListener("click",ic(I_,this)),ic(P_,this).addEventListener("keydown",ic(E_,this))):(tc(G_,this,ny).call(this),ic(P_,this).removeEventListener("click",ic(I_,this)),ic(P_,this).removeEventListener("keydown",ic(E_,this)))}function ty(){ic(W_,this)||this.render(),this.isVisible?ic(j_,this)&&ic(P_,this).classList.add("focused"):(tc(G_,this,Z_).call(this),ic(P_,this).hidden=!1,ic(P_,this).style.zIndex=parseInt(ic(P_,this).style.zIndex)+1e3)}function ny(){ic(P_,this).classList.remove("focused"),!ic(j_,this)&&this.isVisible&&(ic(P_,this).hidden=!0,ic(P_,this).style.zIndex=parseInt(ic(P_,this).style.zIndex)-1e3)}class iy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=kc.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var sy=new WeakMap;class ry extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ec(this,sy,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=r_(e.rect),i=this.svgFactory.create(t,n,!0),s=sc(sy,this,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ic(sy,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ay=new WeakMap;class oy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ec(this,ay,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=r_(e.rect),i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=sc(ay,this,this.svgFactory.createElement("svg:rect"));return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",t-s),r.setAttribute("height",n-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ic(ay,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ly=new WeakMap;class cy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ec(this,ly,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=r_(e.rect),i=this.svgFactory.create(t,n,!0),s=e.borderStyle.width,r=sc(ly,this,this.svgFactory.createElement("svg:ellipse"));return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-s/2),r.setAttribute("ry",n/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ic(ly,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var hy=new WeakMap;class uy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ec(this,hy,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=r_(e.rect),i=this.svgFactory.create(t,n,!0);let s=[];for(const a of e.vertices){const t=a.x-e.rect[0],n=e.rect[3]-a.y;s.push(t+","+n)}s=s.join(" ");const r=sc(hy,this,this.svgFactory.createElement(this.svgElementName));return r.setAttribute("points",s),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ic(hy,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class dy extends uy{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class py extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var fy=new WeakMap;class gy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),ec(this,fy,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=kc.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=r_(e.rect),i=this.svgFactory.create(t,n,!0);for(const s of e.inkLists){let t=[];for(const i of s){const n=i.x-e.rect[0],s=e.rect[3]-i.y;t.push("".concat(n,",").concat(s))}t=t.join(" ");const n=this.svgFactory.createElement(this.svgElementName);ic(fy,this).push(n),n.setAttribute("points",t),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),i.append(n)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return ic(fy,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class my extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class vy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _y extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class yy extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class by extends u_{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var wy=new WeakMap,ky=new WeakSet;class Cy extends u_{constructor(e){var t;super(e,{isRenderable:!0}),Zl(this,ky),ec(this,wy,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",tc(ky,this,xy).bind(this)),sc(wy,this,n);const{isMac:i}=Sh.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&tc(ky,this,xy).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return ic(wy,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function xy(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var Sy=new WeakMap,Ay=new WeakMap,Ey=new WeakMap,Ty=new WeakSet;class My{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:a}=e;Zl(this,Ty),ec(this,Sy,null),ec(this,Ay,null),ec(this,Ey,new Map),this.div=t,sc(Sy,this,n),sc(Ay,this,i),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){const{annotations:t}=e,n=this.div;Lu(n,this.viewport);const i=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new vu,annotationStorage:e.annotationStorage||new Ff,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===Kc;if(e){const e=i.get(a.id);if(!e)continue;s.elements=e}else{const{width:e,height:t}=r_(a.rect);if(e<=0||t<=0)continue}s.data=a;const t=a_.create(s);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=i.get(a.popupRef);e?e.push(t):i.set(a.popupRef,[t])}const n=t.render();var r;if(a.hidden&&(n.style.visibility="hidden"),tc(Ty,this,Iy).call(this,n,a.id),t.annotationEditorType>0)ic(Ey,this).set(t.data.id,t),null===(r=this._annotationEditorUIManager)||void 0===r||r.renderAnnotationElement(t)}tc(Ty,this,Ry).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Lu(n,{rotation:t.rotation}),tc(Ty,this,Ry).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(ic(Ey,this).values())}getEditableAnnotation(e){return ic(Ey,this).get(e)}}function Iy(e,t){var n;const i=e.firstChild||e;i.id="".concat(Nh).concat(t),this.div.append(e),null===(n=ic(Sy,this))||void 0===n||n.moveElementInDOM(this.div,e,i,!1)}function Ry(){if(!ic(Ay,this))return;const e=this.div;for(const[t,n]of ic(Ay,this)){const i=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!i)continue;n.className="annotationContent";const{firstChild:s}=i;s?"CANVAS"===s.nodeName?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):i.append(n)}ic(Ay,this).clear()}const Py=/\r\n?|\n/g;var Ny=new WeakMap,Ly=new WeakMap,Dy=new WeakMap,Fy=new WeakMap,Oy=new WeakMap,jy=new WeakMap,Wy=new WeakMap,zy=new WeakMap,By=new WeakMap,Uy=new WeakMap,Hy=new WeakSet;class qy extends df{static get _keyboardManager(){const e=qy.prototype,t=e=>e.isEmpty(),n=dp.TRANSLATE_SMALL,i=dp.TRANSLATE_BIG;return ph(this,"_keyboardManager",new md([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super({...e,name:"freeTextEditor"}),Zl(this,Hy),ec(this,Ny,this.editorDivBlur.bind(this)),ec(this,Ly,this.editorDivFocus.bind(this)),ec(this,Dy,this.editorDivInput.bind(this)),ec(this,Fy,this.editorDivKeydown.bind(this)),ec(this,Oy,this.editorDivPaste.bind(this)),ec(this,jy,void 0),ec(this,Wy,""),ec(this,zy,"".concat(this.id,"-editor")),ec(this,By,void 0),ec(this,Uy,null),sc(jy,this,e.color||qy._defaultColor||df._defaultLineColor),sc(By,this,e.fontSize||qy._defaultFontSize)}static initialize(e,t){df.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Cc.FREETEXT_SIZE:qy._defaultFontSize=t;break;case Cc.FREETEXT_COLOR:qy._defaultColor=t}}updateParams(e,t){switch(e){case Cc.FREETEXT_SIZE:tc(Hy,this,Vy).call(this,t);break;case Cc.FREETEXT_COLOR:tc(Hy,this,Gy).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Cc.FREETEXT_SIZE,qy._defaultFontSize],[Cc.FREETEXT_COLOR,qy._defaultColor||df._defaultLineColor]]}get propertiesToUpdate(){return[[Cc.FREETEXT_SIZE,ic(By,this)],[Cc.FREETEXT_COLOR,ic(jy,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-qy._internalPadding*e,-(qy._internalPadding+ic(By,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(kc.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",ic(Fy,this)),this.editorDiv.addEventListener("focus",ic(Ly,this)),this.editorDiv.addEventListener("blur",ic(Ny,this)),this.editorDiv.addEventListener("input",ic(Dy,this)),this.editorDiv.addEventListener("paste",ic(Oy,this)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ic(zy,this)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",ic(Fy,this)),this.editorDiv.removeEventListener("focus",ic(Ly,this)),this.editorDiv.removeEventListener("blur",ic(Ny,this)),this.editorDiv.removeEventListener("input",ic(Dy,this)),this.editorDiv.removeEventListener("paste",ic(Oy,this)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=ic(Wy,this),t=sc(Wy,this,tc(Hy,this,Ky).call(this).trimEnd());if(e===t)return;const n=e=>{sc(Wy,this,e),e?(tc(Hy,this,Qy).call(this),this._uiManager.rebuild(this),tc(Hy,this,Yy).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),tc(Hy,this,Yy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){qy._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ic(zy,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),df._l10nPromise.get("pdfjs-free-text-default-content").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("default-content",e)})),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(ic(By,this),"px * var(--scale-factor))"),n.color=ic(jy,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),td(this,this.div,["dblclick","keydown"]),this.width){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:s}=ic(Uy,this);let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[c,h]=this.pageTranslation;let u,d;switch(this.rotation){case 0:u=e+(s[0]-c)/o,d=t+this.height-(s[1]-h)/l;break;case 90:u=e+(s[0]-c)/o,d=t-(s[1]-h)/l,[r,a]=[a,-r];break;case 180:u=e-this.width+(s[0]-c)/o,d=t-(s[1]-h)/l,[r,a]=[-r,-a];break;case 270:u=e+(s[0]-c-this.height*l)/o,d=t+(s[1]-h-this.width*o)/l,[r,a]=[-a,r]}this.setAt(u*n,d*i,r,a)}else this.setAt(e*n,t*i,this.width*n,this.height*i);tc(Hy,this,Qy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Jy.call(qy,t.getData("text")||"").replaceAll(Py,"\n");if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!i.includes("\n"))return r.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(Py,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Xy.call(qy,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(Py,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Xy.call(qy,n))}sc(Wy,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),tc(Hy,this,Qy).call(this);const h=new Range;let u=l.reduce(((e,t)=>e+t.length),0);for(const{firstChild:d}of this.editorDiv.childNodes)if(d.nodeType===Node.TEXT_NODE){const e=d.nodeValue.length;if(u<=e){h.setStart(d,u),h.setEnd(d,u);break}u-=e}s.removeAllRanges(),s.addRange(h)}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let i=null;if(e instanceof iy){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:s,rotation:r,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;i=e={annotationType:kc.FREETEXT,color:Array.from(n),fontSize:t,value:o.join("\n"),position:l,pageIndex:c-1,rect:s.slice(0),rotation:r,id:a,deleted:!1}}const s=super.deserialize(e,t,n);return sc(By,s,e.fontSize),sc(jy,s,Eh.makeHexColor(...e.color)),sc(Wy,s,Jy.call(qy,e.value)),s.annotationElementId=e.id||null,sc(Uy,s,i),s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=qy._internalPadding*this.parentScale,n=this.getRect(t,t),i=df._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:ic(jy,this)),s={annotationType:kc.FREETEXT,color:i,fontSize:ic(By,this),value:tc(Hy,this,$y).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!tc(Hy,this,Zy).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(ic(By,this),"px * var(--scale-factor))"),n.color=ic(jy,this),t.replaceChildren();for(const s of ic(Wy,this).split("\n")){const e=document.createElement("div");e.append(s?document.createTextNode(s):document.createElement("br")),t.append(e)}const i=qy._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:ic(Wy,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function Vy(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-ic(By,this))*this.parentScale),sc(By,this,e),tc(Hy,this,Yy).call(this)},n=ic(By,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function Gy(e){const t=e=>{sc(jy,this,this.editorDiv.style.color=e)},n=ic(jy,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Ky(){const e=[];this.editorDiv.normalize();for(const t of this.editorDiv.childNodes)e.push(Xy.call(Vl,t));return e.join("\n")}function Yy(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,s=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Xy(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Py,"")}function Qy(){if(this.editorDiv.replaceChildren(),ic(Wy,this))for(const e of ic(Wy,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function $y(){return ic(Wy,this).replaceAll("\xa0"," ")}function Jy(e){return e.replaceAll(" ","\xa0")}function Zy(e){const{value:t,fontSize:n,color:i,pageIndex:s}=ic(Uy,this);return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some(((e,t)=>e!==i[t]))||e.pageIndex!==s}Vl=qy,oc(qy,"_freeTextDefaultContent",""),oc(qy,"_internalPadding",0),oc(qy,"_defaultColor",null),oc(qy,"_defaultFontSize",10),oc(qy,"_type","freetext"),oc(qy,"_editorType",kc.FREETEXT);var eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,ib=new WeakSet;class sb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Zl(this,ib),ec(this,eb,void 0),ec(this,tb,[]),ec(this,nb,[]);let s=1/0,r=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:g,y:m,width:v,height:_}of e){const e=Math.floor((g-t)/l)*l,n=Math.ceil((g+v+t)/l)*l,i=Math.floor((m-t)/l)*l,c=Math.ceil((m+_+t)/l)*l,h=[e,i,c,!0],u=[n,i,c,!1];ic(tb,this).push(h,u),s=Math.min(s,e),r=Math.max(r,n),a=Math.min(a,i),o=Math.max(o,c)}const c=r-s+2*n,h=o-a+2*n,u=s-n,d=a-n,p=ic(tb,this).at(i?-1:-2),f=[p[0],p[2]];for(const g of ic(tb,this)){const[e,t,n]=g;g[0]=(e-u)/c,g[1]=(t-d)/h,g[2]=(n-d)/h}sc(eb,this,{x:u,y:d,width:c,height:h,lastPoint:f})}getOutlines(){ic(tb,this).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]));const e=[];for(const t of ic(tb,this))t[3]?(e.push(...tc(ib,this,cb).call(this,t)),tc(ib,this,ob).call(this,t)):(tc(ib,this,lb).call(this,t),e.push(...tc(ib,this,cb).call(this,t)));return tc(ib,this,rb).call(this,e)}}function rb(e){const t=[],n=new Set;for(const r of e){const[e,n,i]=r;t.push([e,n,r],[e,i,r])}t.sort(((e,t)=>e[1]-t[1]||e[0]-t[0]));for(let r=0,a=t.length;r<a;r+=2){const e=t[r][2],i=t[r+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let s;for(;n.size>0;){const e=n.values().next().value;let[t,r,a,o,l]=e;n.delete(e);let c=t,h=r;for(s=[t,a],i.push(s);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,r,a,o,l]=e,c!==t&&(s.push(c,h,t,h===r?r:a),c=t),h=h===r?a:r}s.push(c,h)}return new pb(i,ic(eb,this))}function ab(e){const t=ic(nb,this);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,r=t[s][0];if(r===e)return s;r<e?n=s+1:i=s-1}return i+1}function ob(e){let[,t,n]=e;const i=tc(ib,this,ab).call(this,t);ic(nb,this).splice(i,0,[t,n])}function lb(e){let[,t,n]=e;const i=tc(ib,this,ab).call(this,t);for(let s=i;s<ic(nb,this).length;s++){const[e,i]=ic(nb,this)[s];if(e!==t)break;if(e===t&&i===n)return void ic(nb,this).splice(s,1)}for(let s=i-1;s>=0;s--){const[e,i]=ic(nb,this)[s];if(e!==t)break;if(e===t&&i===n)return void ic(nb,this).splice(s,1)}}function cb(e){const[t,n,i]=e,s=[[t,n,i]],r=tc(ib,this,ab).call(this,i);for(let a=0;a<r;a++){const[e,n]=ic(nb,this)[a];for(let i=0,r=s.length;i<r;i++){const[,a,o]=s[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)s[i][1]=n;else{if(1===r)return[];s.splice(i,1),i--,r--}else s[i][2]=e,o>n&&s.push([t,n,o])}}return s}class hb{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof zb}}var ub=new WeakMap,db=new WeakMap;class pb extends hb{constructor(e,t){super(),ec(this,ub,void 0),ec(this,db,void 0),sc(db,this,e),sc(ub,this,t)}toSVGPath(){const e=[];for(const t of ic(db,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let s=2;s<t.length;s+=2){const r=t[s],a=t[s+1];r===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(r)),n=r)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=[],o=s-n,l=r-i;for(const c of ic(db,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=r-c[t+1]*l;a.push(e)}return a}get box(){return ic(ub,this)}}var fb=new WeakMap,gb=new WeakMap,mb=new WeakMap,vb=new WeakMap,_b=new WeakMap,yb=new WeakMap,bb=new WeakMap,wb=new WeakMap,kb=new WeakMap,Cb=new WeakMap,xb=new WeakMap,Sb=new WeakMap,Ab=new WeakMap,Eb=new WeakSet;class Tb{constructor(e,t,n,i,s){let{x:r,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Zl(this,Eb),ec(this,fb,void 0),ec(this,gb,[]),ec(this,mb,void 0),ec(this,vb,void 0),ec(this,_b,[]),ec(this,yb,new Float64Array(18)),ec(this,bb,void 0),ec(this,wb,void 0),ec(this,kb,void 0),ec(this,Cb,void 0),ec(this,xb,void 0),ec(this,Sb,void 0),ec(this,Ab,[]),sc(fb,this,t),sc(Sb,this,i*n),sc(vb,this,s),ic(yb,this).set([NaN,NaN,NaN,NaN,r,a],6),sc(mb,this,o),sc(Cb,this,Ib._*n),sc(kb,this,Rb._*n),sc(xb,this,n),ic(Ab,this).push(r,a)}get free(){return!0}isEmpty(){return isNaN(ic(yb,this)[8])}add(e){var t;let{x:n,y:i}=e;sc(bb,this,n),sc(wb,this,i);const[s,r,a,o]=ic(fb,this);let[l,c,h,u]=ic(yb,this).subarray(8,12);const d=n-h,p=i-u,f=Math.hypot(d,p);if(f<ic(kb,this))return!1;const g=f-ic(Cb,this),m=g/f,v=m*d,_=m*p;let y=l,b=c;l=h,c=u,h+=v,u+=_,null===(t=ic(Ab,this))||void 0===t||t.push(n,i);const w=v/g,k=-_/g*ic(Sb,this),C=w*ic(Sb,this);if(ic(yb,this).set(ic(yb,this).subarray(2,8),0),ic(yb,this).set([h+k,u+C],4),ic(yb,this).set(ic(yb,this).subarray(14,18),12),ic(yb,this).set([h-k,u-C],16),isNaN(ic(yb,this)[6]))return 0===ic(_b,this).length&&(ic(yb,this).set([l+k,c+C],2),ic(_b,this).push(NaN,NaN,NaN,NaN,(l+k-s)/a,(c+C-r)/o),ic(yb,this).set([l-k,c-C],14),ic(gb,this).push(NaN,NaN,NaN,NaN,(l-k-s)/a,(c-C-r)/o)),ic(yb,this).set([y,b,l,c,h,u],6),!this.isEmpty();ic(yb,this).set([y,b,l,c,h,u],6);return Math.abs(Math.atan2(b-c,y-l)-Math.atan2(_,v))<Math.PI/2?([l,c,h,u]=ic(yb,this).subarray(2,6),ic(_b,this).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/a,((c+u)/2-r)/o),[l,c,y,b]=ic(yb,this).subarray(14,18),ic(gb,this).push(NaN,NaN,NaN,NaN,((y+l)/2-s)/a,((b+c)/2-r)/o),!0):([y,b,l,c,h,u]=ic(yb,this).subarray(0,6),ic(_b,this).push(((y+5*l)/6-s)/a,((b+5*c)/6-r)/o,((5*l+h)/6-s)/a,((5*c+u)/6-r)/o,((l+h)/2-s)/a,((c+u)/2-r)/o),[h,u,l,c,y,b]=ic(yb,this).subarray(12,18),ic(gb,this).push(((y+5*l)/6-s)/a,((b+5*c)/6-r)/o,((5*l+h)/6-s)/a,((5*c+u)/6-r)/o,((l+h)/2-s)/a,((c+u)/2-r)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=ic(_b,this),t=ic(gb,this),n=ic(yb,this).subarray(4,6),i=ic(yb,this).subarray(16,18),[s,r,a,o]=ic(fb,this),[l,c,h,u]=tc(Eb,this,Mb).call(this);if(isNaN(ic(yb,this)[6])&&!this.isEmpty())return"M".concat((ic(yb,this)[2]-s)/a," ").concat((ic(yb,this)[3]-r)/o," L").concat((ic(yb,this)[4]-s)/a," ").concat((ic(yb,this)[5]-r)/o," L").concat(l," ").concat(c," L").concat(h," ").concat(u," L").concat((ic(yb,this)[16]-s)/a," ").concat((ic(yb,this)[17]-r)/o," L").concat((ic(yb,this)[14]-s)/a," ").concat((ic(yb,this)[15]-r)/o," Z");const d=[];d.push("M".concat(e[4]," ").concat(e[5]));for(let p=6;p<e.length;p+=6)isNaN(e[p])?d.push("L".concat(e[p+4]," ").concat(e[p+5])):d.push("C".concat(e[p]," ").concat(e[p+1]," ").concat(e[p+2]," ").concat(e[p+3]," ").concat(e[p+4]," ").concat(e[p+5]));d.push("L".concat((n[0]-s)/a," ").concat((n[1]-r)/o," L").concat(l," ").concat(c," L").concat(h," ").concat(u," L").concat((i[0]-s)/a," ").concat((i[1]-r)/o));for(let p=t.length-6;p>=6;p-=6)isNaN(t[p])?d.push("L".concat(t[p+4]," ").concat(t[p+5])):d.push("C".concat(t[p]," ").concat(t[p+1]," ").concat(t[p+2]," ").concat(t[p+3]," ").concat(t[p+4]," ").concat(t[p+5]));return d.push("L".concat(t[4]," ").concat(t[5]," Z")),d.join(" ")}getOutlines(){var e,t;const n=ic(_b,this),i=ic(gb,this),s=ic(yb,this),r=s.subarray(4,6),a=s.subarray(16,18),[o,l,c,h]=ic(fb,this),u=new Float64Array((null!==(e=null===(t=ic(Ab,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let _=0,y=u.length-2;_<y;_+=2)u[_]=(ic(Ab,this)[_]-o)/c,u[_+1]=(ic(Ab,this)[_+1]-l)/h;u[u.length-2]=(ic(bb,this)-o)/c,u[u.length-1]=(ic(wb,this)-l)/h;const[d,p,f,g]=tc(Eb,this,Mb).call(this);if(isNaN(s[6])&&!this.isEmpty()){const e=new Float64Array(36);return e.set([NaN,NaN,NaN,NaN,(s[2]-o)/c,(s[3]-l)/h,NaN,NaN,NaN,NaN,(s[4]-o)/c,(s[5]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(s[16]-o)/c,(s[17]-l)/h,NaN,NaN,NaN,NaN,(s[14]-o)/c,(s[15]-l)/h],0),new zb(e,u,ic(fb,this),ic(xb,this),ic(mb,this),ic(vb,this))}const m=new Float64Array(ic(_b,this).length+24+ic(gb,this).length);let v=n.length;for(let _=0;_<v;_+=2)isNaN(n[_])?m[_]=m[_+1]=NaN:(m[_]=n[_],m[_+1]=n[_+1]);m.set([NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-l)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(a[0]-o)/c,(a[1]-l)/h],v),v+=24;for(let _=i.length-6;_>=6;_-=6)for(let e=0;e<6;e+=2)isNaN(i[_+e])?(m[v]=m[v+1]=NaN,v+=2):(m[v]=i[_+e],m[v+1]=i[_+e+1],v+=2);return m.set([NaN,NaN,NaN,NaN,i[4],i[5]],v),new zb(m,u,ic(fb,this),ic(xb,this),ic(mb,this),ic(vb,this))}}function Mb(){const e=ic(yb,this).subarray(4,6),t=ic(yb,this).subarray(16,18),[n,i,s,r]=ic(fb,this);return[(ic(bb,this)+(e[0]-t[0])/2-n)/s,(ic(wb,this)+(e[1]-t[1])/2-i)/r,(ic(bb,this)+(t[0]-e[0])/2-n)/s,(ic(wb,this)+(t[1]-e[1])/2-i)/r]}var Ib={_:8},Rb={_:Ib._+2},Pb=new WeakMap,Nb=new WeakMap,Lb=new WeakMap,Db=new WeakMap,Fb=new WeakMap,Ob=new WeakMap,jb=new WeakMap,Wb=new WeakSet;class zb extends hb{constructor(e,t,n,i,s,r){super(),Zl(this,Wb),ec(this,Pb,void 0),ec(this,Nb,null),ec(this,Lb,void 0),ec(this,Db,void 0),ec(this,Fb,void 0),ec(this,Ob,void 0),ec(this,jb,void 0),sc(jb,this,e),sc(Fb,this,t),sc(Pb,this,n),sc(Ob,this,i),sc(Lb,this,s),sc(Db,this,r),tc(Wb,this,Hb).call(this,r);const{x:a,y:o,width:l,height:c}=ic(Nb,this);for(let h=0,u=e.length;h<u;h+=2)e[h]=(e[h]-a)/l,e[h+1]=(e[h+1]-o)/c;for(let h=0,u=t.length;h<u;h+=2)t[h]=(t[h]-a)/l,t[h+1]=(t[h+1]-o)/c}toSVGPath(){const e=["M".concat(ic(jb,this)[4]," ").concat(ic(jb,this)[5])];for(let t=6,n=ic(jb,this).length;t<n;t+=6)isNaN(ic(jb,this)[t])?e.push("L".concat(ic(jb,this)[t+4]," ").concat(ic(jb,this)[t+5])):e.push("C".concat(ic(jb,this)[t]," ").concat(ic(jb,this)[t+1]," ").concat(ic(jb,this)[t+2]," ").concat(ic(jb,this)[t+3]," ").concat(ic(jb,this)[t+4]," ").concat(ic(jb,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,s,r]=e;const a=s-n,o=r-i;let l,c;switch(t){case 0:l=tc(Wb,this,Bb).call(this,ic(jb,this),n,r,a,-o),c=tc(Wb,this,Bb).call(this,ic(Fb,this),n,r,a,-o);break;case 90:l=tc(Wb,this,Ub).call(this,ic(jb,this),n,i,a,o),c=tc(Wb,this,Ub).call(this,ic(Fb,this),n,i,a,o);break;case 180:l=tc(Wb,this,Bb).call(this,ic(jb,this),s,i,-a,o),c=tc(Wb,this,Bb).call(this,ic(Fb,this),s,i,-a,o);break;case 270:l=tc(Wb,this,Ub).call(this,ic(jb,this),s,r,-a,-o),c=tc(Wb,this,Ub).call(this,ic(Fb,this),s,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return ic(Nb,this)}getNewOutline(e,t){const{x:n,y:i,width:s,height:r}=ic(Nb,this),[a,o,l,c]=ic(Pb,this),h=s*l,u=r*c,d=n*l+a,p=i*c+o,f=new Tb({x:ic(Fb,this)[0]*h+d,y:ic(Fb,this)[1]*u+p},ic(Pb,this),ic(Ob,this),e,ic(Db,this),null!==t&&void 0!==t?t:ic(Lb,this));for(let g=2;g<ic(Fb,this).length;g+=2)f.add({x:ic(Fb,this)[g]*h+d,y:ic(Fb,this)[g+1]*u+p});return f.getOutlines()}}function Bb(e,t,n,i,s){const r=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a]*i,r[a+1]=n+e[a+1]*s;return r}function Ub(e,t,n,i,s){const r=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)r[a]=t+e[a+1]*i,r[a+1]=n+e[a]*s;return r}function Hb(e){const t=ic(jb,this);let n=t[4],i=t[5],s=n,r=i,a=n,o=i,l=n,c=i;const h=e?Math.max:Math.min;for(let g=6,m=t.length;g<m;g+=6){if(isNaN(t[g]))s=Math.min(s,t[g+4]),r=Math.min(r,t[g+5]),a=Math.max(a,t[g+4]),o=Math.max(o,t[g+5]),c<t[g+5]?(l=t[g+4],c=t[g+5]):c===t[g+5]&&(l=h(l,t[g+4]));else{const e=Eh.bezierBoundingBox(n,i,...t.slice(g,g+6));s=Math.min(s,e[0]),r=Math.min(r,e[1]),a=Math.max(a,e[2]),o=Math.max(o,e[3]),c<e[3]?(l=e[2],c=e[3]):c===e[3]&&(l=h(l,e[2]))}n=t[g+4],i=t[g+5]}const u=s-ic(Lb,this),d=r-ic(Lb,this),p=a-s+2*ic(Lb,this),f=o-r+2*ic(Lb,this);sc(Nb,this,{x:u,y:d,width:p,height:f,lastPoint:[l,c]})}var qb=new WeakMap,Vb=new WeakMap,Gb=new WeakMap,Kb=new WeakMap,Yb=new WeakMap,Xb=new WeakMap,Qb=new WeakMap,$b=new WeakMap,Jb=new WeakMap,Zb=new WeakMap,ew=new WeakMap,tw=new WeakMap,nw=new WeakSet;class iw{static get _keyboardManager(){return ph(this,"_keyboardManager",new md([[["Escape","mac+Escape"],iw.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],iw.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],iw.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],iw.prototype._moveToPrevious],[["Home","mac+Home"],iw.prototype._moveToBeginning],[["End","mac+End"],iw.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:i=null}=e;Zl(this,nw),ec(this,qb,tc(nw,this,aw).bind(this)),ec(this,Vb,tc(nw,this,lw).bind(this)),ec(this,Gb,null),ec(this,Kb,null),ec(this,Yb,void 0),ec(this,Xb,null),ec(this,Qb,!1),ec(this,$b,!1),ec(this,Jb,null),ec(this,Zb,void 0),ec(this,ew,null),ec(this,tw,void 0),n?(sc($b,this,!1),sc(tw,this,Cc.HIGHLIGHT_COLOR),sc(Jb,this,n)):(sc($b,this,!0),sc(tw,this,Cc.HIGHLIGHT_DEFAULT_COLOR)),sc(ew,this,(null===n||void 0===n?void 0:n._uiManager)||i),sc(Zb,this,ic(ew,this)._eventBus),sc(Yb,this,(null===n||void 0===n?void 0:n.color)||(null===(t=ic(ew,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98")}renderButton(){const e=sc(Gb,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",tc(nw,this,ow).bind(this)),e.addEventListener("keydown",ic(qb,this));const t=sc(Kb,this,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=ic(Yb,this),e.append(t),e}renderMainDropdown(){const e=sc(Xb,this,tc(nw,this,sw).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===ic(Gb,this))return void tc(nw,this,ow).call(this,e);const t=e.target.getAttribute("data-color");t&&tc(nw,this,rw).call(this,t,e)}_moveToNext(e){var t,n;nc(nw,this,cw)?e.target!==ic(Gb,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=ic(Xb,this).firstChild)||void 0===n||n.focus():tc(nw,this,ow).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=ic(Xb,this))||void 0===t?void 0:t.firstChild)&&e.target!==ic(Gb,this)?(nc(nw,this,cw)||tc(nw,this,ow).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):nc(nw,this,cw)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;nc(nw,this,cw)?null===(t=ic(Xb,this).firstChild)||void 0===t||t.focus():tc(nw,this,ow).call(this,e)}_moveToEnd(e){var t;nc(nw,this,cw)?null===(t=ic(Xb,this).lastChild)||void 0===t||t.focus():tc(nw,this,ow).call(this,e)}hideDropdown(){var e;null===(e=ic(Xb,this))||void 0===e||e.classList.add("hidden"),window.removeEventListener("pointerdown",ic(Vb,this))}_hideDropdownFromKeyboard(){var e;ic($b,this)||(nc(nw,this,cw)?(this.hideDropdown(),ic(Gb,this).focus({preventScroll:!0,focusVisible:ic(Qb,this)})):null===(e=ic(Jb,this))||void 0===e||e.unselect())}updateColor(e){if(ic(Kb,this)&&(ic(Kb,this).style.backgroundColor=e),!ic(Xb,this))return;const t=ic(ew,this).highlightColors.values();for(const n of ic(Xb,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=ic(Gb,this))||void 0===e||e.remove(),sc(Gb,this,null),sc(Kb,this,null),null===(t=ic(Xb,this))||void 0===t||t.remove(),sc(Xb,this,null)}}function sw(){const e=document.createElement("div");e.addEventListener("contextmenu",Au),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,n]of ic(ew,this).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",n),i.title=t,i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-".concat(t));const s=document.createElement("span");i.append(s),s.className="swatch",s.style.backgroundColor=n,i.setAttribute("aria-selected",n===ic(Yb,this)),i.addEventListener("click",tc(nw,this,rw).bind(this,n)),e.append(i)}return e.addEventListener("keydown",ic(qb,this)),e}function rw(e,t){t.stopPropagation(),ic(Zb,this).dispatch("switchannotationeditorparams",{source:this,type:ic(tw,this),value:e})}function aw(e){Gl._keyboardManager.exec(this,e)}function ow(e){if(nc(nw,this,cw))return void this.hideDropdown();if(sc(Qb,this,0===e.detail),window.addEventListener("pointerdown",ic(Vb,this)),ic(Xb,this))return void ic(Xb,this).classList.remove("hidden");const t=sc(Xb,this,tc(nw,this,sw).call(this));ic(Gb,this).append(t)}function lw(e){var t;null!==(t=ic(Xb,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function cw(e){return ic(Xb,e)&&!ic(Xb,e).classList.contains("hidden")}Gl=iw;var hw=new WeakMap,uw=new WeakMap,dw=new WeakMap,pw=new WeakMap,fw=new WeakMap,gw=new WeakMap,mw=new WeakMap,vw=new WeakMap,_w=new WeakMap,yw=new WeakMap,bw=new WeakMap,ww=new WeakMap,kw=new WeakMap,Cw=new WeakMap,xw=new WeakMap,Sw=new WeakMap,Aw=new WeakMap,Ew=new WeakMap,Tw=new WeakMap,Mw=new WeakSet;class Iw extends df{static get _keyboardManager(){const e=Iw.prototype;return ph(this,"_keyboardManager",new md([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),Zl(this,Mw),ec(this,hw,null),ec(this,uw,0),ec(this,dw,void 0),ec(this,pw,null),ec(this,fw,null),ec(this,gw,null),ec(this,mw,null),ec(this,vw,0),ec(this,_w,null),ec(this,yw,null),ec(this,bw,null),ec(this,ww,!1),ec(this,kw,tc(Mw,this,Ww).bind(this)),ec(this,Cw,null),ec(this,xw,void 0),ec(this,Sw,null),ec(this,Aw,""),ec(this,Ew,void 0),ec(this,Tw,""),this.color=e.color||Iw._defaultColor,sc(Ew,this,e.thickness||Iw._defaultThickness),sc(xw,this,e.opacity||Iw._defaultOpacity),sc(dw,this,e.boxes||null),sc(Tw,this,e.methodOfCreation||""),sc(Aw,this,e.text||""),this._isDraggable=!1,e.highlightId>-1?(sc(ww,this,!0),tc(Mw,this,Pw).call(this,e),tc(Mw,this,Ow).call(this)):(sc(hw,this,e.anchorNode),sc(uw,this,e.anchorOffset),sc(mw,this,e.focusNode),sc(vw,this,e.focusOffset),tc(Mw,this,Rw).call(this),tc(Mw,this,Ow).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:ic(ww,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:ic(Ew,this),methodOfCreation:ic(Tw,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;df.initialize(e,t),Iw._defaultColor||(Iw._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case Cc.HIGHLIGHT_DEFAULT_COLOR:Iw._defaultColor=t;break;case Cc.HIGHLIGHT_THICKNESS:Iw._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return ic(Cw,this)}updateParams(e,t){switch(e){case Cc.HIGHLIGHT_COLOR:tc(Mw,this,Nw).call(this,t);break;case Cc.HIGHLIGHT_THICKNESS:tc(Mw,this,Lw).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Cc.HIGHLIGHT_DEFAULT_COLOR,Iw._defaultColor],[Cc.HIGHLIGHT_THICKNESS,Iw._defaultThickness]]}get propertiesToUpdate(){return[[Cc.HIGHLIGHT_COLOR,this.color||Iw._defaultColor],[Cc.HIGHLIGHT_THICKNESS,ic(Ew,this)||Iw._defaultThickness],[Cc.HIGHLIGHT_FREE,ic(ww,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(sc(fw,this,new iw({editor:this})),e.addColorPicker(ic(fw,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(tc(Mw,this,Bw).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,tc(Mw,this,Bw).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){tc(Mw,this,Fw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(tc(Mw,this,Ow).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)tc(Mw,this,Fw).call(this);else if(e){var n;tc(Mw,this,Ow).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;ic(ww,this)?(e=(e-this.rotation+360)%360,n=jw.call(Iw,ic(yw,this).box,e)):n=jw.call(Iw,this,e),t.rotate(ic(bw,this),e),t.rotate(ic(Sw,this),e),t.updateBox(ic(bw,this),n),t.updateBox(ic(Sw,this),jw.call(Iw,ic(gw,this).box,e))}render(){if(this.div)return this.div;const e=super.render();ic(Aw,this)&&(e.setAttribute("aria-label",ic(Aw,this)),e.setAttribute("role","mark")),ic(ww,this)?e.classList.add("free"):this.div.addEventListener("keydown",ic(kw,this));const t=sc(_w,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=ic(pw,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),td(this,ic(_w,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(ic(Sw,this),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(ic(Sw,this),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:tc(Mw,this,zw).call(this,!0);break;case 1:case 3:tc(Mw,this,zw).call(this,!1)}}select(){var e,t;super.select(),ic(Sw,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(ic(Sw,this),"hovered"),null===(t=this.parent)||void 0===t||t.drawLayer.addClass(ic(Sw,this),"selected"))}unselect(){var e;super.unselect(),ic(Sw,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(ic(Sw,this),"selected"),ic(ww,this)||tc(Mw,this,zw).call(this,!1))}get _mustFixPosition(){return!ic(ww,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.show(ic(bw,this),e),this.parent.drawLayer.show(ic(Sw,this),e))}static startHighlighting(e,t,n){let{target:i,x:s,y:r}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),h=t=>{tc(Iw,this,qw).call(this,e,t)},u={capture:!0,passive:!1},d=e=>{e.preventDefault(),e.stopPropagation()},p=t=>{i.removeEventListener("pointermove",h),window.removeEventListener("blur",p),window.removeEventListener("pointerup",p),window.removeEventListener("pointerdown",d,u),window.removeEventListener("contextmenu",Au),tc(Iw,this,Vw).call(this,e,t)};window.addEventListener("blur",p),window.addEventListener("pointerup",p),window.addEventListener("pointerdown",d,u),window.addEventListener("contextmenu",Au),i.addEventListener("pointermove",h),this._freeHighlight=new Tb({x:s,y:r},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static deserialize(e,t,n){const i=super.deserialize(e,t,n),{rect:[s,r,a,o],color:l,quadPoints:c}=e;i.color=Eh.makeHexColor(...l),sc(xw,i,e.opacity);const[h,u]=i.pageDimensions;i.width=(a-s)/h,i.height=(o-r)/u;const d=sc(dw,i,[]);for(let p=0;p<c.length;p+=8)d.push({x:(c[4]-a)/h,y:(o-(1-c[p+5]))/u,width:(c[p+2]-c[p])/h,height:(c[p+5]-c[p+1])/u});return tc(Mw,i,Rw).call(i),i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;const t=this.getRect(0,0),n=df._colorManager.convert(this.color);return{annotationType:kc.HIGHLIGHT,color:n,opacity:ic(xw,this),thickness:ic(Ew,this),quadPoints:tc(Mw,this,Uw).call(this),outlines:tc(Mw,this,Hw).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:tc(Mw,this,Bw).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}function Rw(){const e=new sb(ic(dw,this),.001);sc(yw,this,e.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=ic(yw,this).box);const t=new sb(ic(dw,this),.0025,.001,"ltr"===this._uiManager.direction);sc(gw,this,t.getOutlines());const{lastPoint:n}=ic(gw,this).box;sc(Cw,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function Pw(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;sc(yw,this,t);if(sc(gw,this,t.getNewOutline(ic(Ew,this)/2+1.5,.0025)),n>=0)sc(bw,this,n),sc(pw,this,i),this.parent.drawLayer.finalizeLine(n,t),sc(Sw,this,this.parent.drawLayer.highlightOutline(ic(gw,this)));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(ic(bw,this),t),this.parent.drawLayer.updateBox(ic(bw,this),jw.call(Kl,ic(yw,this).box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(ic(Sw,this),ic(gw,this)),this.parent.drawLayer.updateBox(ic(Sw,this),jw.call(Kl,ic(gw,this).box,e))}const{x:s,y:r,width:a,height:o}=t.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=r,this.y=1-s,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-s,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-r,this.y=s,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=ic(gw,this).box;sc(Cw,this,[(l[0]-s)/a,(l[1]-r)/o])}function Nw(e){const t=e=>{var t,n;this.color=e,null===(t=this.parent)||void 0===t||t.drawLayer.changeColor(ic(bw,this),e),null===(n=ic(fw,this))||void 0===n||n.updateColor(e)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function Lw(e){const t=ic(Ew,this),n=e=>{sc(Ew,this,e),tc(Mw,this,Dw).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Dw(e){if(!ic(ww,this))return;tc(Mw,this,Pw).call(this,{highlightOutlines:ic(yw,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function Fw(){null!==ic(bw,this)&&this.parent&&(this.parent.drawLayer.remove(ic(bw,this)),sc(bw,this,null),this.parent.drawLayer.remove(ic(Sw,this)),sc(Sw,this,null))}function Ow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===ic(bw,this)&&(({id:$l(sc,[bw,this])._,clipPathId:$l(sc,[pw,this])._}=e.drawLayer.highlight(ic(yw,this),this.color,ic(xw,this))),sc(Sw,this,e.drawLayer.highlightOutline(ic(gw,this))),ic(_w,this)&&(ic(_w,this).style.clipPath=ic(pw,this)))}function jw(e,t){let{x:n,y:i,width:s,height:r}=e;switch(t){case 90:return{x:1-i-r,y:n,width:r,height:s};case 180:return{x:1-n-s,y:1-i-r,width:s,height:r};case 270:return{x:i,y:1-n-s,width:r,height:s}}return{x:n,y:i,width:s,height:r}}function Ww(e){Kl._keyboardManager.exec(this,e)}function zw(e){if(!ic(hw,this))return;const t=window.getSelection();e?t.setPosition(ic(hw,this),ic(uw,this)):t.setPosition(ic(mw,this),ic(vw,this))}function Bw(){return ic(ww,this)?this.rotation:0}function Uw(){if(ic(ww,this))return null;const[e,t]=this.pageDimensions,n=ic(dw,this),i=new Array(8*n.length);let s=0;for(const{x:r,y:a,width:o,height:l}of n){const n=r*e,c=(1-a-l)*t;i[s]=i[s+4]=n,i[s+1]=i[s+3]=c,i[s+2]=i[s+6]=n+o*e,i[s+5]=i[s+7]=c+l*t,s+=8}return i}function Hw(e){return ic(yw,this).serialize(e,tc(Mw,this,Bw).call(this))}function qw(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function Vw(e,t){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}Kl=Iw,oc(Iw,"_defaultColor",null),oc(Iw,"_defaultOpacity",1),oc(Iw,"_defaultThickness",12),oc(Iw,"_l10nPromise",void 0),oc(Iw,"_type","highlight"),oc(Iw,"_editorType",kc.HIGHLIGHT),oc(Iw,"_freeHighlightId",-1),oc(Iw,"_freeHighlight",null),oc(Iw,"_freeHighlightClipId","");var Gw=new WeakMap,Kw=new WeakMap,Yw=new WeakMap,Xw=new WeakMap,Qw=new WeakMap,$w=new WeakMap,Jw=new WeakMap,Zw=new WeakMap,ek=new WeakMap,tk=new WeakMap,nk=new WeakMap,ik=new WeakMap,sk=new WeakMap,rk=new WeakMap,ak=new WeakMap,ok=new WeakSet;class lk extends df{constructor(e){super({...e,name:"inkEditor"}),Zl(this,ok),ec(this,Gw,0),ec(this,Kw,0),ec(this,Yw,this.canvasPointermove.bind(this)),ec(this,Xw,this.canvasPointerleave.bind(this)),ec(this,Qw,this.canvasPointerup.bind(this)),ec(this,$w,this.canvasPointerdown.bind(this)),ec(this,Jw,null),ec(this,Zw,new Path2D),ec(this,ek,!1),ec(this,tk,!1),ec(this,nk,!1),ec(this,ik,null),ec(this,sk,0),ec(this,rk,0),ec(this,ak,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){df.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case Cc.INK_THICKNESS:lk._defaultThickness=t;break;case Cc.INK_COLOR:lk._defaultColor=t;break;case Cc.INK_OPACITY:lk._defaultOpacity=t/100}}updateParams(e,t){switch(e){case Cc.INK_THICKNESS:tc(ok,this,ck).call(this,t);break;case Cc.INK_COLOR:tc(ok,this,hk).call(this,t);break;case Cc.INK_OPACITY:tc(ok,this,uk).call(this,t)}}static get defaultPropertiesToUpdate(){return[[Cc.INK_THICKNESS,lk._defaultThickness],[Cc.INK_COLOR,lk._defaultColor||df._defaultLineColor],[Cc.INK_OPACITY,Math.round(100*lk._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[Cc.INK_THICKNESS,this.thickness||lk._defaultThickness],[Cc.INK_COLOR,this.color||lk._defaultColor||df._defaultLineColor],[Cc.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:lk._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(tc(ok,this,Ck).call(this),tc(ok,this,xk).call(this)),this.isAttachedToDOM||(this.parent.add(this),tc(ok,this,Sk).call(this)),tc(ok,this,Lk).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ic(Jw,this)&&(clearTimeout(ic(Jw,this)),sc(Jw,this,null)),ic(ik,this).disconnect(),sc(ik,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,i=this.height*t;this.setDimensions(n,i)}enableEditMode(){ic(ek,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",ic($w,this)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ic($w,this)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){ic(ek,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),sc(ek,this,!0),this.div.classList.add("disabled"),tc(ok,this,Lk).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!ic(ek,this)&&(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),tc(ok,this,fk).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),tc(ok,this,gk).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),tc(ok,this,kk).call(this,e)}canvasPointerleave(e){tc(ok,this,kk).call(this,e)}get isResizable(){return!this.isEmpty()&&ic(ek,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,s,r]=tc(ok,this,dk).call(this);if(this.setAt(n,i,0,0),this.setDims(s,r),tc(ok,this,Ck).call(this),this.width){const[n,i]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*i),this.setAt(e*n,t*i,this.width*n,this.height*i),sc(nk,this,!0),tc(ok,this,Sk).call(this),this.setDims(this.width*n,this.height*i),tc(ok,this,wk).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return tc(ok,this,xk).call(this),this.div}setDimensions(e,t){const n=Math.round(e),i=Math.round(t);if(ic(sk,this)===n&&ic(rk,this)===i)return;sc(sk,this,n),sc(rk,this,i),this.canvas.style.visibility="hidden";const[s,r]=this.parentDimensions;this.width=e/s,this.height=t/r,this.fixAndSetPosition(),ic(ek,this)&&tc(ok,this,Ak).call(this,e,t),tc(ok,this,Sk).call(this),tc(ok,this,wk).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,t,n){if(e instanceof gy)return null;const i=super.deserialize(e,t,n);i.thickness=e.thickness,i.color=Eh.makeHexColor(...e.color),i.opacity=e.opacity;const[s,r]=i.pageDimensions,a=i.width*s,o=i.height*r,l=i.parentScale,c=e.thickness/2;sc(ek,i,!0),sc(sk,i,Math.round(a)),sc(rk,i,Math.round(o));const{paths:h,rect:u,rotation:d}=e;for(let{bezier:f}of h){f=Ik.call(lk,f,u,d);const e=[];i.paths.push(e);let t=l*(f[0]-c),n=l*(f[1]-c);for(let i=2,r=f.length;i<r;i+=6){const s=l*(f[i]-c),r=l*(f[i+1]-c),a=l*(f[i+2]-c),o=l*(f[i+3]-c),h=l*(f[i+4]-c),u=l*(f[i+5]-c);e.push([[t,n],[s,r],[a,o],[h,u]]),t=h,n=u}const s=tc(lk,this,Tk).call(this,e);i.bezierPath2D.push(s)}const p=tc(ok,i,Pk).call(i);return sc(Kw,i,Math.max(df.MIN_SIZE,p[2]-p[0])),sc(Gw,i,Math.max(df.MIN_SIZE,p[3]-p[1])),tc(ok,i,Ak).call(i,a,o),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=df._colorManager.convert(this.ctx.strokeStyle);return{annotationType:kc.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:tc(ok,this,Rk).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function ck(e){const t=e=>{this.thickness=e,tc(ok,this,Lk).call(this)},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function hk(e){const t=e=>{this.color=e,tc(ok,this,wk).call(this)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function uk(e){const t=e=>{this.opacity=e,tc(ok,this,wk).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Cc.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function dk(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function pk(){const{ctx:e,color:t,opacity:n,thickness:i,parentScale:s,scaleFactor:r}=this;e.lineWidth=i*s/r,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat(function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}(n))}function fk(e,t){var n;(this.canvas.addEventListener("contextmenu",Au),this.canvas.addEventListener("pointerleave",ic(Xw,this)),this.canvas.addEventListener("pointermove",ic(Yw,this)),this.canvas.addEventListener("pointerup",ic(Qw,this)),this.canvas.removeEventListener("pointerdown",ic($w,this)),this.isEditing=!0,ic(nk,this))||(sc(nk,this,!0),tc(ok,this,Sk).call(this),this.thickness||(this.thickness=Yl._defaultThickness),this.color||(this.color=Yl._defaultColor||df._defaultLineColor),null!==(n=this.opacity)&&void 0!==n||(this.opacity=Yl._defaultOpacity));this.currentPath.push([e,t]),sc(tk,this,!1),tc(ok,this,pk).call(this),sc(ak,this,(()=>{tc(ok,this,_k).call(this),ic(ak,this)&&window.requestAnimationFrame(ic(ak,this))})),window.requestAnimationFrame(ic(ak,this))}function gk(e,t){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===i)return;const s=this.currentPath;let r=ic(Zw,this);if(s.push([e,t]),sc(tk,this,!0),s.length<=2)return r.moveTo(...s[0]),void r.lineTo(e,t);3===s.length&&(sc(Zw,this,r=new Path2D),r.moveTo(...s[0])),tc(ok,this,yk).call(this,r,...s.at(-3),...s.at(-2),e,t)}function mk(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);ic(Zw,this).lineTo(...e)}function vk(e,t){let n;if(sc(ak,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),tc(ok,this,gk).call(this,e,t),tc(ok,this,mk).call(this),1!==this.currentPath.length)n=tc(ok,this,bk).call(this);else{const i=[e,t];n=[[i,i.slice(),i.slice(),i]]}const i=ic(Zw,this),s=this.currentPath;this.currentPath=[],sc(Zw,this,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(n),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(tc(ok,this,Ck).call(this),tc(ok,this,xk).call(this)),tc(ok,this,Lk).call(this))},mustExec:!0})}function _k(){if(!ic(tk,this))return;sc(tk,this,!1);const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map((e=>e[0])),i=t.map((e=>e[1])),{ctx:s}=(Math.min(...n),Math.max(...n),Math.min(...i),Math.max(...i),this);s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)s.stroke(r);s.stroke(ic(Zw,this)),s.restore()}function yk(e,t,n,i,s,r,a){const o=(t+i)/2,l=(n+s)/2,c=(i+r)/2,h=(s+a)/2;e.bezierCurveTo(o+2*(i-o)/3,l+2*(s-l)/3,c+2*(i-c)/3,h+2*(s-h)/3,c,h)}function bk(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[i,s]=e[0];for(n=1;n<e.length-2;n++){const[r,a]=e[n],[o,l]=e[n+1],c=(r+o)/2,h=(a+l)/2,u=[i+2*(r-i)/3,s+2*(a-s)/3],d=[c+2*(r-c)/3,h+2*(a-h)/3];t.push([[i,s],u,d,[c,h]]),[i,s]=[c,h]}const[r,a]=e[n],[o,l]=e[n+1],c=[i+2*(r-i)/3,s+2*(a-s)/3],h=[o+2*(r-o)/3,l+2*(a-l)/3];return t.push([[i,s],c,h,[o,l]]),t}function wk(){if(this.isEmpty())return void tc(ok,this,Ek).call(this);tc(ok,this,pk).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),tc(ok,this,Ek).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function kk(e){this.canvas.removeEventListener("pointerleave",ic(Xw,this)),this.canvas.removeEventListener("pointermove",ic(Yw,this)),this.canvas.removeEventListener("pointerup",ic(Qw,this)),this.canvas.addEventListener("pointerdown",ic($w,this)),ic(Jw,this)&&clearTimeout(ic(Jw,this)),sc(Jw,this,setTimeout((()=>{sc(Jw,this,null),this.canvas.removeEventListener("contextmenu",Au)}),10)),tc(ok,this,vk).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function Ck(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function xk(){sc(ik,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),ic(ik,this).observe(this.div)}function Sk(){if(!ic(nk,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),tc(ok,this,Ek).call(this)}function Ak(e,t){const n=tc(ok,this,Nk).call(this),i=(e-n)/ic(Kw,this),s=(t-n)/ic(Gw,this);this.scaleFactor=Math.min(i,s)}function Ek(){const e=tc(ok,this,Nk).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function Tk(e){const t=new Path2D;for(let n=0,i=e.length;n<i;n++){const[i,s,r,a]=e[n];0===n&&t.moveTo(...i),t.bezierCurveTo(s[0],s[1],r[0],r[1],a[0],a[1])}return t}function Mk(e,t,n){const[i,s,r,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=i,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+i,e[t+1]=n+s}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=r-e[t],e[t+1]+=s;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=r-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}function Ik(e,t,n){const[i,s,r,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=i,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-s,e[t+1]=n-i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=r-e[t],e[t+1]-=s;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=r-n}break;default:throw new Error("Invalid rotation")}return e}function Rk(e,t,n,i){const s=[],r=this.thickness/2,a=e*t+r,o=e*n+r;for(const l of this.paths){const t=[],n=[];for(let i=0,s=l.length;i<s;i++){const[r,c,h,u]=l[i];if(r[0]===u[0]&&r[1]===u[1]&&1===s){const i=e*r[0]+a,s=e*r[1]+o;t.push(i,s),n.push(i,s);break}const d=e*r[0]+a,p=e*r[1]+o,f=e*c[0]+a,g=e*c[1]+o,m=e*h[0]+a,v=e*h[1]+o,_=e*u[0]+a,y=e*u[1]+o;0===i&&(t.push(d,p),n.push(d,p)),t.push(f,g,m,v,_,y),n.push(f,g),i===s-1&&n.push(_,y)}s.push({bezier:Mk.call(Yl,t,i,this.rotation),points:Mk.call(Yl,n,i,this.rotation)})}return s}function Pk(){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(const s of this.paths)for(const[r,a,o,l]of s){const s=Eh.bezierBoundingBox(...r,...a,...o,...l);e=Math.min(e,s[0]),n=Math.min(n,s[1]),t=Math.max(t,s[2]),i=Math.max(i,s[3])}return[e,n,t,i]}function Nk(){return ic(ek,this)?Math.ceil(this.thickness*this.parentScale):0}function Lk(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!ic(ek,this))return void tc(ok,this,wk).call(this);const t=tc(ok,this,Pk).call(this),n=tc(ok,this,Nk).call(this);sc(Kw,this,Math.max(df.MIN_SIZE,t[2]-t[0])),sc(Gw,this,Math.max(df.MIN_SIZE,t[3]-t[1]));const i=Math.ceil(n+ic(Kw,this)*this.scaleFactor),s=Math.ceil(n+ic(Gw,this)*this.scaleFactor),[r,a]=this.parentDimensions;this.width=i/r,this.height=s/a,this.setAspectRatio(i,s);const o=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],tc(ok,this,Sk).call(this),tc(ok,this,wk).call(this),sc(sk,this,i),sc(rk,this,s),this.setDims(i,s);const c=e?n/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}Yl=lk,oc(lk,"_defaultColor",null),oc(lk,"_defaultOpacity",1),oc(lk,"_defaultThickness",1),oc(lk,"_type","ink"),oc(lk,"_editorType",kc.INK);var Dk=new WeakMap,Fk=new WeakMap,Ok=new WeakMap,jk=new WeakMap,Wk=new WeakMap,zk=new WeakMap,Bk=new WeakMap,Uk=new WeakMap,Hk=new WeakMap,qk=new WeakMap,Vk=new WeakMap,Gk=new WeakSet;class Kk extends df{constructor(e){super({...e,name:"stampEditor"}),Zl(this,Gk),ec(this,Dk,null),ec(this,Fk,null),ec(this,Ok,null),ec(this,jk,null),ec(this,Wk,null),ec(this,zk,""),ec(this,Bk,null),ec(this,Uk,null),ec(this,Hk,null),ec(this,qk,!1),ec(this,Vk,!1),sc(jk,this,e.bitmapUrl),sc(Wk,this,e.bitmapFile)}static initialize(e,t){df.initialize(e,t)}static get supportedTypes(){return ph(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return ph(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(kc.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;ic(Fk,this)&&(sc(Dk,this,null),this._uiManager.imageManager.deleteId(ic(Fk,this)),null===(e=ic(Bk,this))||void 0===e||e.remove(),sc(Bk,this,null),null===(t=ic(Uk,this))||void 0===t||t.disconnect(),sc(Uk,this,null),ic(Hk,this)&&(clearTimeout(ic(Hk,this)),sc(Hk,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(ic(Fk,this)&&null===ic(Bk,this)&&tc(Gk,this,Qk).call(this),this.isAttachedToDOM||this.parent.add(this))):ic(Fk,this)&&tc(Gk,this,Qk).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(ic(Ok,this)||ic(Dk,this)||ic(jk,this)||ic(Wk,this)||ic(Fk,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),ic(Dk,this)?tc(Gk,this,$k).call(this):tc(Gk,this,Qk).call(this),this.width){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i)}return this.div}getImageForAltText(){return ic(Bk,this)}static deserialize(e,t,n){if(e instanceof by)return null;const i=super.deserialize(e,t,n),{rect:s,bitmapUrl:r,bitmapId:a,isSvg:o,accessibilityData:l}=e;a&&n.imageManager.isValidId(a)?sc(Fk,i,a):sc(jk,i,r),sc(qk,i,o);const[c,h]=i.pageDimensions;return i.width=(s[2]-s[0])/c,i.height=(s[3]-s[1])/h,l&&(i.altTextData=l),i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:kc.STAMP,bitmapId:ic(Fk,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:ic(qk,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=tc(Gk,this,tC).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:i,altText:s}=this.altTextData;if(!i&&s&&(n.accessibilityData={type:"Figure",alt:s}),null===t)return n;t.stamps||(t.stamps=new Map);const r=ic(qk,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(ic(Fk,this))){if(ic(qk,this)){const e=t.stamps.get(ic(Fk,this));r>e.area&&(e.area=r,e.serialized.bitmap.close(),e.serialized.bitmap=tc(Gk,this,tC).call(this,!1))}}else t.stamps.set(ic(Fk,this),{area:r,serialized:n}),n.bitmap=tc(Gk,this,tC).call(this,!1);return n}}function Yk(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(sc(Dk,this,e.bitmap),t||(sc(Fk,this,e.id),sc(qk,this,e.isSvg)),e.file&&sc(zk,this,e.file.name),tc(Gk,this,$k).call(this)):this.remove()}function Xk(){sc(Ok,this,null),this._uiManager.enableWaiting(!1),ic(Bk,this)&&this.div.focus()}function Qk(){if(ic(Fk,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(ic(Fk,this)).then((e=>tc(Gk,this,Yk).call(this,e,!0))).finally((()=>tc(Gk,this,Xk).call(this)));if(ic(jk,this)){const e=ic(jk,this);return sc(jk,this,null),this._uiManager.enableWaiting(!0),void sc(Ok,this,this._uiManager.imageManager.getFromUrl(e).then((e=>tc(Gk,this,Yk).call(this,e))).finally((()=>tc(Gk,this,Xk).call(this))))}if(ic(Wk,this)){const e=ic(Wk,this);return sc(Wk,this,null),this._uiManager.enableWaiting(!0),void sc(Ok,this,this._uiManager.imageManager.getFromFile(e).then((e=>tc(Gk,this,Yk).call(this,e))).finally((()=>tc(Gk,this,Xk).call(this))))}const e=document.createElement("input");e.type="file",e.accept=Xl.supportedTypesStr,sc(Ok,this,new Promise((t=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);tc(Gk,this,Yk).call(this,t)}else this.remove();t()})),e.addEventListener("cancel",(()=>{this.remove(),t()}))})).finally((()=>tc(Gk,this,Xk).call(this)))),e.click()}function $k(){const{div:e}=this;let{width:t,height:n}=ic(Dk,this);const[i,s]=this.pageDimensions,r=.75;if(this.width)t=this.width*i,n=this.height*s;else if(t>r*i||n>r*s){const e=Math.min(r*i/t,r*s/n);t*=e,n*=e}const[a,o]=this.parentDimensions;this.setDims(t*a/i,n*o/s),this._uiManager.enableWaiting(!1);const l=sc(Bk,this,document.createElement("canvas"));e.append(l),e.hidden=!1,tc(Gk,this,eC).call(this,t,n),tc(Gk,this,nC).call(this),ic(Vk,this)||(this.parent.addUndoableEditor(this),sc(Vk,this,!0)),this._reportTelemetry({action:"inserted_image"}),ic(zk,this)&&l.setAttribute("aria-label",ic(zk,this))}function Jk(e,t){var n;const[i,s]=this.parentDimensions;this.width=e/i,this.height=t/s,this.setDims(e,t),null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==ic(Hk,this)&&clearTimeout(ic(Hk,this));sc(Hk,this,setTimeout((()=>{sc(Hk,this,null),tc(Gk,this,eC).call(this,e,t)}),200))}function Zk(e,t){const{width:n,height:i}=ic(Dk,this);let s=n,r=i,a=ic(Dk,this);for(;s>2*e||r>2*t;){const n=s,i=r;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,n,i,0,0,s,r),a=o.transferToImageBitmap()}return a}function eC(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=ic(Bk,this);if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const i=ic(qk,this)?ic(Dk,this):tc(Gk,this,Zk).call(this,e,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){const n=new OffscreenCanvas(e,t).getContext("2d");n.drawImage(i,0,0,i.width,i.height,0,0,e,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,e,t).data,width:e,height:t,channels:4}}).then((e=>{const t=(null===e||void 0===e?void 0:e.output)||"";this.parent&&t&&!this.hasAltText()&&(this.altTextData={altText:t,decorative:!1})}))}const s=n.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(i,0,0,i.width,i.height,0,0,e,t)}function tC(e){if(e){if(ic(qk,this)){const e=this._uiManager.imageManager.getSvgUrl(ic(Fk,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=ic(Dk,this));return e.getContext("2d").drawImage(ic(Dk,this),0,0),e.toDataURL()}if(ic(qk,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Xh.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*Xh.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(n,i);return s.getContext("2d").drawImage(ic(Dk,this),0,0,ic(Dk,this).width,ic(Dk,this).height,0,0,n,i),s.transferToImageBitmap()}return structuredClone(ic(Dk,this))}function nC(){sc(Uk,this,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&tc(Gk,this,Jk).call(this,t.width,t.height)}))),ic(Uk,this).observe(this.div)}Xl=Kk,oc(Kk,"_type","stamp"),oc(Kk,"_editorType",kc.STAMP);var iC=new WeakMap,sC=new WeakMap,rC=new WeakMap,aC=new WeakMap,oC=new WeakMap,lC=new WeakMap,cC=new WeakMap,hC=new WeakMap,uC=new WeakMap,dC=new WeakMap,pC=new WeakMap,fC=new WeakMap,gC=new WeakMap,mC=new WeakSet;class vC{constructor(e){let{uiManager:t,pageIndex:n,div:i,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:c}=e;Zl(this,mC),ec(this,iC,void 0),ec(this,sC,!1),ec(this,rC,null),ec(this,aC,null),ec(this,oC,null),ec(this,lC,null),ec(this,cC,null),ec(this,hC,new Map),ec(this,uC,!1),ec(this,dC,!1),ec(this,pC,!1),ec(this,fC,null),ec(this,gC,void 0);const h=[...CC._.values()];if(!vC._initialized){vC._initialized=!0;for(const e of h)e.initialize(c,t)}t.registerEditorTypes(h),sc(gC,this,t),this.pageIndex=n,this.div=i,sc(iC,this,s),sc(rC,this,r),this.viewport=l,sc(fC,this,o),this.drawLayer=a,ic(gC,this).addLayer(this)}get isEmpty(){return 0===ic(hC,this).size}get isInvisible(){return this.isEmpty&&ic(gC,this).getMode()===kc.NONE}updateToolbar(e){ic(gC,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ic(gC,this).getMode();switch(tc(mC,this,kC).call(this),e){case kc.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case kc.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case kc.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of CC._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=ic(fC,this))||void 0===t?void 0:t.div)}addInkEditorIfNeeded(e){if(ic(gC,this).getMode()!==kc.INK)return;if(!e)for(const t of ic(hC,this).values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){ic(gC,this).setEditingState(e)}addCommands(e){ic(gC,this).addCommands(e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=ic(rC,this))||void 0===e||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of ic(hC,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(ic(gC,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!ic(rC,this))return;const t=ic(rC,this).getEditableAnnotations();for(const n of t){if(n.hide(),ic(gC,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){sc(pC,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of ic(hC,this).values()){var n;s.disableEditing(),s.annotationElementId&&(null===s.serialize()?(t.set(s.annotationElementId,s),null===(n=this.getEditableAnnotation(s.annotationElementId))||void 0===n||n.show(),s.remove()):e.set(s.annotationElementId,s))}if(ic(rC,this)){const n=ic(rC,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(ic(gC,this).isDeletedAnnotationElement(n))continue;let s=t.get(n);s?(s.resetAnnotationElement(i),s.show(!1),i.show()):(s=e.get(n),s&&(ic(gC,this).addChangedExistingAnnotation(s),s.renderAnnotationElement(i),s.show(!1)),i.show())}}tc(mC,this,kC).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of CC._.values())i.remove("".concat(s._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),sc(pC,this,!1)}getEditableAnnotation(e){var t;return(null===(t=ic(rC,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){ic(gC,this).getActive()!==e&&ic(gC,this).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,null!==(e=ic(fC,this))&&void 0!==e&&e.div&&!ic(lC,this)&&(sc(lC,this,tc(mC,this,_C).bind(this)),ic(fC,this).div.addEventListener("pointerdown",ic(lC,this)),ic(fC,this).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=ic(fC,this))&&void 0!==e&&e.div&&ic(lC,this)&&(ic(fC,this).div.removeEventListener("pointerdown",ic(lC,this)),sc(lC,this,null),ic(fC,this).div.classList.remove("highlighting"))}enableClick(){ic(oC,this)||(sc(oC,this,this.pointerdown.bind(this)),sc(aC,this,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",ic(oC,this)),this.div.addEventListener("pointerup",ic(aC,this)))}disableClick(){ic(oC,this)&&(this.div.removeEventListener("pointerdown",ic(oC,this)),this.div.removeEventListener("pointerup",ic(aC,this)),sc(oC,this,null),sc(aC,this,null))}attach(e){ic(hC,this).set(e.id,e);const{annotationElementId:t}=e;t&&ic(gC,this).isDeletedAnnotationElement(t)&&ic(gC,this).removeDeletedAnnotationElement(e)}detach(e){var t;ic(hC,this).delete(e.id),null===(t=ic(iC,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!ic(pC,this)&&e.annotationElementId&&ic(gC,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),ic(gC,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,ic(dC,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(ic(gC,this).addDeletedAnnotationElement(e.annotationElementId),df.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),ic(gC,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),ic(gC,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!ic(cC,this)&&(e._focusEventsAllowed=!1,sc(cC,this,setTimeout((()=>{sc(cC,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),n.focus())}),0))),e._structTreeParentId=null===(t=ic(iC,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return ic(gC,this).getId()}canCreateNewEmptyEditor(){var e;return null===(e=nc(mC,this,yC))||void 0===e?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){ic(gC,this).updateToolbar(e),ic(gC,this).updateMode(e);const{offsetX:n,offsetY:i}=tc(mC,this,wC).call(this),s=this.getNextId(),r=tc(mC,this,bC).call(this,{parent:this,id:s,x:n,y:i,uiManager:ic(gC,this),isCentered:!0,...t});r&&this.add(r)}deserialize(e){var t,n;return(null===(t=CC._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,ic(gC,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),s=tc(mC,this,bC).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:ic(gC,this),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(tc(mC,this,wC).call(this),!0)}setSelected(e){ic(gC,this).setSelected(e)}toggleSelected(e){ic(gC,this).toggleSelected(e)}isSelected(e){return ic(gC,this).isSelected(e)}unselect(e){ic(gC,this).unselect(e)}pointerup(e){const{isMac:t}=Sh.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&ic(uC,this)&&(sc(uC,this,!1),ic(sC,this)?ic(gC,this).getMode()!==kc.STAMP?this.createAndAddNewEditor(e,!1):ic(gC,this).unselectAll():sc(sC,this,!0))}pointerdown(e){if(ic(gC,this).getMode()===kc.HIGHLIGHT&&this.enableTextSelection(),ic(uC,this))return void sc(uC,this,!1);const{isMac:t}=Sh.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;sc(uC,this,!0);const n=ic(gC,this).getActive();sc(sC,this,!n||n.isEmpty())}findNewParent(e,t,n){const i=ic(gC,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}destroy(){var e;(null===(e=ic(gC,this).getActive())||void 0===e?void 0:e.parent)===this&&(ic(gC,this).commitOrRemove(),ic(gC,this).setActiveEditor(null)),ic(cC,this)&&(clearTimeout(ic(cC,this)),sc(cC,this,null));for(const n of ic(hC,this).values()){var t;null===(t=ic(iC,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,ic(hC,this).clear(),ic(gC,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Lu(this.div,t);for(const n of ic(gC,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;ic(gC,this).commitOrRemove(),tc(mC,this,kC).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Lu(this.div,{rotation:i}),n!==i)for(const s of ic(hC,this).values())s.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return ic(gC,this).viewParameters.realScale}}function _C(e){if(ic(gC,this).unselectAll(),e.target===ic(fC,this).div){const{isMac:t}=Sh.platform;if(0!==e.button||e.ctrlKey&&t)return;ic(gC,this).showAllEditors("highlight",!0,!0),ic(fC,this).div.classList.add("free"),Iw.startHighlighting(this,"ltr"===ic(gC,this).direction,e),ic(fC,this).div.addEventListener("pointerup",(()=>{ic(fC,this).div.classList.remove("free")}),{once:!0}),e.preventDefault()}}function yC(e){return CC._.get(ic(gC,e).getMode())}function bC(e){const t=nc(mC,this,yC);return t?new t.prototype.constructor(e):null}function wC(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),r=Math.max(0,t),a=(s+Math.min(window.innerWidth,e+n))/2-e,o=(r+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function kC(){sc(dC,this,!0);for(const e of ic(hC,this).values())e.isEmpty()&&e.remove();sc(dC,this,!1)}oc(vC,"_initialized",!1);var CC={_:new Map([qy,lk,Kk,Iw].map((e=>[e._editorType,e])))},xC=new WeakMap,SC=new WeakMap,AC=new WeakMap,EC=new WeakMap,TC=new WeakSet;class MC{constructor(e){let{pageIndex:t}=e;Zl(this,TC),ec(this,xC,null),ec(this,SC,0),ec(this,AC,new Map),ec(this,EC,new Map),this.pageIndex=t}setParent(e){if(ic(xC,this)){if(ic(xC,this)!==e){if(ic(AC,this).size>0)for(const t of ic(AC,this).values())t.remove(),e.append(t);sc(xC,this,e)}}else sc(xC,this,e)}static get _svgFactory(){return ph(this,"_svgFactory",new vu)}highlight(e,t,n){var i,s;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(sc(SC,this,(i=ic(SC,this),s=i++,i)),s),o=tc(TC,this,RC).call(this,e.box);o.classList.add("highlight"),e.free&&o.classList.add("free");const l=MC._svgFactory.createElement("defs");o.append(l);const c=MC._svgFactory.createElement("path");l.append(c);const h="path_p".concat(this.pageIndex,"_").concat(a);c.setAttribute("id",h),c.setAttribute("d",e.toSVGPath()),r&&ic(EC,this).set(a,c);const u=tc(TC,this,PC).call(this,l,h),d=MC._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),d.setAttribute("href","#".concat(h)),ic(AC,this).set(a,o),{id:a,clipPathId:"url(#".concat(u,")")}}highlightOutline(e){var t,n;const i=(sc(SC,this,(t=ic(SC,this),n=t++,t)),n),s=tc(TC,this,RC).call(this,e.box);s.classList.add("highlightOutline");const r=MC._svgFactory.createElement("defs");s.append(r);const a=MC._svgFactory.createElement("path");r.append(a);const o="path_p".concat(this.pageIndex,"_").concat(i);let l;if(a.setAttribute("id",o),a.setAttribute("d",e.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke"),e.free){s.classList.add("free");const e=MC._svgFactory.createElement("mask");r.append(e),l="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",l),e.setAttribute("maskUnits","objectBoundingBox");const t=MC._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=MC._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(o)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const c=MC._svgFactory.createElement("use");s.append(c),c.setAttribute("href","#".concat(o)),l&&c.setAttribute("mask","url(#".concat(l,")"));const h=c.cloneNode();return s.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),ic(AC,this).set(i,s),i}finalizeLine(e,t){const n=ic(EC,this).get(e);ic(EC,this).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){ic(AC,this).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),ic(EC,this).delete(e)}updatePath(e,t){ic(EC,this).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){IC.call(MC,ic(AC,this).get(e),t)}show(e,t){ic(AC,this).get(e).classList.toggle("hidden",!t)}rotate(e,t){ic(AC,this).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){ic(AC,this).get(e).setAttribute("fill",t)}changeOpacity(e,t){ic(AC,this).get(e).setAttribute("fill-opacity",t)}addClass(e,t){ic(AC,this).get(e).classList.add(t)}removeClass(e,t){ic(AC,this).get(e).classList.remove(t)}remove(e){null!==ic(xC,this)&&(ic(AC,this).get(e).remove(),ic(AC,this).delete(e))}destroy(){sc(xC,this,null);for(const e of ic(AC,this).values())e.remove();ic(AC,this).clear()}}function IC(e){let{x:t=0,y:n=0,width:i=1,height:s=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:r}=e;r.top="".concat(100*n,"%"),r.left="".concat(100*t,"%"),r.width="".concat(100*i,"%"),r.height="".concat(100*s,"%")}function RC(e){const t=Ql._svgFactory.create(1,1,!0);return ic(xC,this).append(t),t.setAttribute("aria-hidden",!0),IC.call(Ql,t,e),t}function PC(e,t){const n=Ql._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Ql._svgFactory.createElement("use");return n.append(s),s.setAttribute("href","#".concat(t)),s.classList.add("clip"),i}Ql=MC;var NC=cc.GlobalWorkerOptions,LC=n(579);NC.workerSrc=new URL(n(749),n.b).toString();let DC=(0,t.createContext)({stat:"",setStat:()=>{}});function FC(e){let n=e.project;const[i,s]=(0,t.useState)(),[r,a]=(0,t.useState)(1);let o={width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"20px",background:"#eee"},l={};return l="true"===e.mobile?{width:"90%",height:"auto",marginTop:"20px"}:{width:"500px",height:"auto",marginTop:"20px"},""===n.pdf[0]?(0,LC.jsx)("div",{}):(0,LC.jsxs)(LC.Fragment,{children:[(0,LC.jsx)("div",{children:(0,LC.jsx)("div",{style:o,children:Array.from({length:n.pdf[1]},((e,t)=>(0,LC.jsx)("img",{className:"",style:l,alt:"",src:"https://github.com/soulmilk98/portfolio/blob/main/build/compressed/".concat(n.pdf[0],"/").concat(n.url,"-").concat(t+1,".png?raw=true")})))})}),(0,LC.jsx)("p",{style:{textAlign:"center",marginTop:"0px"},children:(0,LC.jsx)("a",{href:"https://github.com/soulmilk98/portfolio/blob/main/build/".concat(n.pdf[0],".pdf?raw=true"),target:"_blank",rel:"noreferrer",className:"link",children:"PDF Download Link"})})]})}function OC(e){let t=e.project,n={};n="true"===e.mobile?{width:"350px",height:"auto",marginTop:"20px"}:{width:"500px",height:"auto",marginTop:"20px"};let i={width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"20px"};return""===t.img[0]?(0,LC.jsx)("div",{}):(0,LC.jsx)("div",{style:i,children:t.img.map((function(e,t){return(0,LC.jsx)("img",{className:"",style:n,alt:"",src:"https://github.com/soulmilk98/portfolio/blob/main/build/".concat(e,"?raw=true")})}))})}function jC(e){let t=e.project,n={width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"20px"},i={marginTop:"10px"};const s=350;return e.mobile&&(s=550),""===t.youtube[0]?(0,LC.jsx)("div",{}):(0,LC.jsx)("div",{style:n,children:t.youtube.map((function(e,t){return(0,LC.jsx)("iframe",{style:i,width:s,height:"315",src:e,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0},t)}))})}const WC=function(e){let n={paddingLeft:"10px",paddingRight:"10px",marginTop:"10px",marginBottom:"0px",fontSize:"17px",wordBreak:"keep-all"},i={paddingLeft:"10px",paddingRight:"10px",marginTop:"15px",marginBottom:"0px",fontSize:"14px",wordBreak:"keep-all"},[s,r]=(0,t.useState)("");return(0,LC.jsx)(DC.Provider,{value:{project:e.project},children:(0,LC.jsxs)("div",{children:[(0,LC.jsx)("p",{style:n,children:e.project.title}),(0,LC.jsx)("p",{style:n,children:e.project.year}),"music"!==e.project.status&&(0,LC.jsx)("p",{style:n,children:e.project.scope}),(0,LC.jsx)("p",{style:i,children:e.project.mainDescriptionEN}),(0,LC.jsx)("p",{style:i,children:e.project.mainDescriptionKR}),(0,LC.jsx)("p",{style:i,children:e.project.subDescription}),e.project.link&&(0,LC.jsx)("a",{href:e.project.link[0],target:"_blank",rel:"noreferrer",style:i,className:"link",children:e.project.link[1]}),(0,LC.jsx)(jC,{project:e.project}),(0,LC.jsx)(FC,{mobile:e.mobile,project:e.project}),(0,LC.jsx)(OC,{mobile:e.mobile,style:{opacity:"0",transition:"opacity 0.5s ease-in-out"},project:e.project,className:s,onLoadedData:function(){r("show")}}),"music"===e.project.status&&(0,LC.jsxs)(LC.Fragment,{children:[(0,LC.jsx)("br",{}),(0,LC.jsxs)("p",{style:{...i,textAlign:"center",marginTop:"0px"},children:[e.project.linkCenter[1],(0,LC.jsx)("br",{}),(0,LC.jsx)("a",{href:e.project.linkCenter[0],target:"_blank",rel:"noreferrer",style:{...i,textAlign:"center",marginTop:"0px"},className:"link",children:"Link"})]})]}),"music"===e.project.status&&e.project.listCenter.map((function(e,n){return(0,LC.jsxs)(t.Fragment,{children:[(0,LC.jsx)("p",{style:{...i,textAlign:"center",marginTop:"0px"},children:e}),(0,LC.jsx)("br",{})]},n)})),(0,LC.jsx)("br",{})]})})};function zC(e){return(0,LC.jsxs)("div",{children:[(0,LC.jsx)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:"link",children:e.text}),(0,LC.jsx)("br",{})]})}function BC(e){return(0,LC.jsx)("div",{children:e.text})}const UC=e=>{let{children:t}=e;const n=ye({query:"(max-width:768px)"});return(0,LC.jsx)(LC.Fragment,{children:n&&t})},HC=e=>{let{children:t}=e;const n=ye({query:"(min-width:769px)"});return(0,LC.jsx)(LC.Fragment,{children:n&&t})};let qC=(0,t.createContext)({stat:"home",selectedProject:null,setStat:()=>{},setSelectedProject:()=>{}});function VC(e){const n={fontSize:"medium",fontWeight:"normal",paddingLeft:"10px"},{setStat:i,setSelectedProject:s}=(P(),(0,t.useContext)(qC)),[r,a]=(0,t.useState)("year"),[o,l]=(0,t.useState)([]);(0,t.useEffect)((()=>{Ml(Cl(Ol,"/data"),(e=>{const t=e.val();l(t?Object.values(t):[])}))}),[]);const c=e=>{i("project"),s(e)},h=e=>{o.sort(((t,n)=>0===e?Number(n.year)-Number(t.year):Number(t.year)-Number(n.year))).sort(((e,t)=>e.status.localeCompare(t.status)))},u=e=>{o.sort(((t,n)=>0===e?n.type.localeCompare(t.type):t.type.localeCompare(n.type))).sort(((e,t)=>e.status.localeCompare(t.status)))},d=e=>{o.sort(((t,n)=>0===e?n.title.localeCompare(t.title):t.title.localeCompare(n.title))).sort(((e,t)=>e.status.localeCompare(t.status)))},p=e=>{o.sort(((t,n)=>0===e?n.scope.localeCompare(t.scope):t.scope.localeCompare(n.scope))).sort(((e,t)=>e.status.localeCompare(t.status)))};switch(r){case"type":u(0);break;case"name":d(0);break;case"scope":p(0);break;case"type1":u(1);break;case"name1":d(1);break;case"year1":h(1);break;case"scope1":p(1);break;default:h(0)}return"true"===e.mobile?(0,LC.jsxs)("section",{className:"project-wrapper",children:[(0,LC.jsx)("h1",{style:n,children:e.projectTitle}),(0,LC.jsxs)("table",{className:"project-table",children:[(0,LC.jsx)("th",{align:"start",onClick:()=>{a("name")},children:"NAME"}),(0,LC.jsx)("th",{align:"start",onClick:()=>{a("year")},children:"YEAR"}),o.map((function(e,t){return console.log(e.status),"wip"===e.status?(0,LC.jsxs)("tr",{className:"project-single-element no-grab",onClick:()=>{alert("This project is in progress!")},children:[(0,LC.jsxs)("td",{children:[e.title," ",(0,LC.jsx)("i",{children:"(work in progress)"})]}),(0,LC.jsx)("td",{children:e.year})]}):"music"===e.status?(0,LC.jsxs)("tr",{className:"project-single-element music",onClick:()=>{c(e)},children:[(0,LC.jsx)("td",{children:e.title}),(0,LC.jsx)("td",{children:e.year})]}):"mus"===e.status?(0,LC.jsxs)(LC.Fragment,{children:[(0,LC.jsx)("tr",{className:"project-single-element no-grab",children:(0,LC.jsx)("td",{height:"15px"})}),(0,LC.jsx)("tr",{className:"project-single-element music no-grab",children:(0,LC.jsx)("td",{valign:"bottom",align:"center",colSpan:2,children:(0,LC.jsx)("a",{style:{textAlign:"justify",width:"100%",fontWeight:"bold",fontStyle:"italic"},children:"Music Project"})})})]}):(0,LC.jsxs)("tr",{className:"project-single-element",onClick:()=>{c(e)},children:[(0,LC.jsx)("td",{children:e.title}),(0,LC.jsx)("td",{children:e.year})]})}))]})]}):(0,LC.jsxs)("section",{className:"project-wrapper",children:[(0,LC.jsx)("h1",{style:n,children:e.projectTitle}),(0,LC.jsxs)("table",{className:"project-table",children:[(0,LC.jsx)("th",{align:"start",onClick:()=>a("name"===r?"name1":"name"),children:"NAME"}),(0,LC.jsx)("th",{align:"start",onClick:()=>a("year"===r?"scope1":"scope"),children:"Scope"}),(0,LC.jsx)("th",{align:"start",onClick:()=>a("type"===r?"type1":"type"),children:"PROJECT TYPE"}),(0,LC.jsx)("th",{align:"start",onClick:()=>a("year"===r?"year1":"year"),children:"YEAR"}),o.map((function(e,t){return"wip"===e.status?(0,LC.jsxs)("tr",{className:"project-single-element no-grab",onClick:()=>{alert("This project is in progress!")},children:[(0,LC.jsxs)("td",{children:[e.title," ",(0,LC.jsx)("i",{children:"(work in progress)"})]}),(0,LC.jsx)("td",{children:e.scope}),(0,LC.jsx)("td",{children:e.type}),(0,LC.jsx)("td",{children:e.year})]}):"music"===e.status?(0,LC.jsxs)("tr",{className:"project-single-element music",onClick:()=>{c(e)},children:[(0,LC.jsx)("td",{children:e.title}),(0,LC.jsx)("td",{children:e.scope}),(0,LC.jsx)("td",{children:e.type}),(0,LC.jsx)("td",{children:e.year})]}):"mus"===e.status?(0,LC.jsxs)(LC.Fragment,{children:[(0,LC.jsx)("tr",{className:"project-single-element no-grab",children:(0,LC.jsx)("td",{height:"15px"})}),(0,LC.jsx)("tr",{className:"project-single-element music no-grab",children:(0,LC.jsx)("td",{valign:"bottom",align:"center",colSpan:4,children:(0,LC.jsx)("a",{style:{textAlign:"justify",width:"100%",fontWeight:"bold",fontStyle:"italic"},children:"Music Project"})})})]}):(0,LC.jsxs)("tr",{className:"project-single-element",onClick:()=>{c(e)},children:[(0,LC.jsx)("td",{children:e.title}),(0,LC.jsx)("td",{children:e.scope}),(0,LC.jsx)("td",{children:e.type}),(0,LC.jsx)("td",{children:e.year})]})}))]})]})}function GC(e){let n="section-style";n="true"===e.mobile?"section-style-mo":"section-style";let i=(0,t.useContext)(qC),[s,r]=(0,t.useState)("none");return(0,LC.jsxs)("section",{className:n,style:{borderRight:"solid 1px black"},children:[(0,LC.jsx)("header",{className:"header",children:(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("home")},children:" \uc724\uc720\uc0c1 (YOON YOOSANG) / \ub119\uce58 (NUPCHI) "})}),(0,LC.jsx)(VC,{mobile:e.mobile,projectTitle:"(WORKS)",projectSetter:r}),(0,LC.jsx)("footer",{className:"footer",children:(0,LC.jsxs)("a",{href:"mailto:imflatfish01@gmail.com",children:[" ","imflatfish01@gmail.com".toUpperCase()," "]})})]})}function KC(e){let n="section-style";const i=(0,t.useContext)(qC);n="true"===e.mobile?"section-style-mo":"section-style";let s={width:"350px",height:"auto",marginTop:"20px"};const[r,a]=(0,t.useState)(),[o,l]=(0,t.useState)(1);let c={width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:"20px",paddingBottom:"20px"};return"about"===i.stat?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsx)("header",{className:"header",children:(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})}),(0,LC.jsxs)("section",{className:"about-wrapper about-text-style",children:[(0,LC.jsxs)("div",{style:c,children:[(0,LC.jsx)("img",{style:s,src:"https://github.com/soulmilk98/portfolio/blob/main/build/about_img/profile.png?raw=true"}),(0,LC.jsx)("a",{href:"https://broad-money-d3e.notion.site/f20d6a892872423fb0d369b9dfd25e5a?pvs=4",target:"_blank",rel:"noreferrer",className:"link",children:(0,LC.jsx)("b",{children:"CV"})})," ",(0,LC.jsx)("br",{}),(0,LC.jsx)("br",{}),(0,LC.jsx)(BC,{text:" HI! This is NUPCHI"}),(0,LC.jsx)("br",{}),(0,LC.jsx)(BC,{text:"\uc548\ub155\ud558\uc138\uc694 \ub119\uce58\uc785\ub2c8\ub2e4."}),(0,LC.jsx)("br",{})]}),(0,LC.jsx)("b",{children:"EDUCATION"}),(0,LC.jsx)("br",{}),(0,LC.jsxs)("div",{children:["B.S. KAIST, Mechanical Engineering , Industrial Design (Double Major)",(0,LC.jsx)("br",{}),"M.S. KAIST, Industrial Design, ",(0,LC.jsx)("a",{href:"https://reflect9.github.io/ael/",target:"_blank",rel:"noreferrer",className:"link",children:"AI & Experience Lab"}),(0,LC.jsx)("br",{})]}),(0,LC.jsx)("br",{}),(0,LC.jsx)("b",{children:"CONTACT"}),(0,LC.jsx)(zC,{href:"mailto:imflatfish01@gmail.com",text:"imflatfish01@gmail.com".toUpperCase()}),(0,LC.jsx)(zC,{href:"https://www.instagram.com/hogam_im_/",text:"IG. @\uc724\uc720\uc0c1"}),(0,LC.jsx)(zC,{href:"https://www.youtube.com/@hogam_im_",text:"Youtube. @\uc724\uc720\uc0c1(Project)"}),(0,LC.jsx)(zC,{href:"https://www.instagram.com/flatfish01/",text:"IG. @\ub119\uce58"}),(0,LC.jsx)(zC,{href:"https://www.youtube.com/@iamflatfish",text:"Youtube. @\ub119\uce58(Music)"}),(0,LC.jsx)("br",{}),(0,LC.jsx)("div",{})]})]}):"home"===i.stat?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsx)("header",{className:"header",children:(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})}),(0,LC.jsx)("div",{className:"media-wrapper",children:(0,LC.jsx)("img",{style:{width:"70%",marginTop:"10%",marginLeft:"20%"},src:"https://github.com/soulmilk98/portfolio/blob/main/build/about_img/profile2.png?raw=true"})})]}):"project"===i.stat&&i.selectedProject?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsx)("header",{className:"header",children:(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})}),(0,LC.jsx)(WC,{project:i.selectedProject})]}):null}function YC(e){let n="section-style-mo",i=(0,t.useContext)(qC),[s,r]=(0,t.useState)("none");return"home"===i.stat?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsxs)("header",{className:"header",children:[(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("home")},children:"\uc724\uc720\uc0c1 (YOON YOOSANG) "}),(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})]}),(0,LC.jsx)(VC,{mobile:e.mobile,projectTitle:"(Works)",projectSetter:r})]}):"about"===i.stat?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsxs)("header",{className:"header",children:[(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("home")},children:"\uc724\uc720\uc0c1 (YOON YOOSANG) "}),(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})]}),(0,LC.jsxs)("section",{className:"about-wrapper about-text-style",children:[(0,LC.jsx)(BC,{text:" HI! This is NUPCHI"}),(0,LC.jsx)("br",{}),(0,LC.jsx)(BC,{text:"\uc548\ub155\ud558\uc138\uc694 \ub119\uce58\uc785\ub2c8\ub2e4."}),(0,LC.jsx)("br",{}),(0,LC.jsx)(BC,{text:"EDUCATION"}),(0,LC.jsxs)("div",{children:["B.S. KAIST, Mechanical Engineering , Industrial Design(Double Major)",(0,LC.jsx)("br",{}),"M.S. KAIST, Industrial Design, ",(0,LC.jsx)("a",{href:"https://reflect9.github.io/ael/",target:"_blank",rel:"noreferrer",className:"link",children:"AI & Experience Lab"})]}),(0,LC.jsx)("br",{}),(0,LC.jsx)(BC,{text:"CONTACT"}),(0,LC.jsx)(zC,{href:"mailto:imflatfish01@gmail.com",text:"imflatfish01@gmail.com".toUpperCase()}),(0,LC.jsx)(zC,{href:"https://www.instagram.com/hogam_im_/",text:"IG. @\uc724\uc720\uc0c1"}),(0,LC.jsx)(zC,{href:"https://www.youtube.com/@hogam_im_",text:"Youtube. @\uc724\uc720\uc0c1(Project)"}),(0,LC.jsx)(zC,{href:"https://www.instagram.com/flatfish01/",text:"IG. @\ub119\uce58"}),(0,LC.jsx)(zC,{href:"https://www.youtube.com/@iamflatfish",text:"Youtube. @\ub119\uce58(Music)"}),(0,LC.jsx)("br",{}),(0,LC.jsxs)("div",{children:["CV ",(0,LC.jsx)("a",{href:"https://broad-money-d3e.notion.site/f20d6a892872423fb0d369b9dfd25e5a?pvs=4",target:"_blank",rel:"noreferrer",className:"link",children:"(Download)"}),(0,LC.jsx)("br",{})]})]})]}):"project"===i.stat&&i.selectedProject?(0,LC.jsxs)("section",{className:n,children:[(0,LC.jsxs)("header",{className:"header",children:[(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("home")},children:"\uc724\uc720\uc0c1 (YOON YOOSANG)"}),(0,LC.jsx)(Y,{className:"header-button",onClick:()=>{i.setStat("about")},children:"(ABOUT)"})]}),(0,LC.jsx)(WC,{mobile:e.mobile,project:i.selectedProject})]}):null}const XC=function(){let[e,n]=(0,t.useState)("home");const[i,s]=(0,t.useState)(null),{pathParam:r}=function(){let{matches:e}=t.useContext(T),n=e[e.length-1];return n?n.params:{}}();return console.log(r),(0,LC.jsx)(qC.Provider,{value:{stat:e,setStat:n,selectedProject:i,setSelectedProject:s},children:(0,LC.jsxs)(V,{children:[(0,LC.jsx)(HC,{children:(0,LC.jsx)("div",{className:"App",children:(0,LC.jsxs)("main",{className:"main-section",children:[(0,LC.jsx)(GC,{}),(0,LC.jsx)(KC,{})]})})}),(0,LC.jsx)(UC,{children:(0,LC.jsx)("main",{className:"main-section-mo",children:(0,LC.jsx)(YC,{mobile:"true"})})})]})})},QC=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:i,getFCP:s,getLCP:r,getTTFB:a}=t;n(e),i(e),s(e),r(e),a(e)}))};s.createRoot(document.getElementById("root")).render((0,LC.jsx)(t.StrictMode,{children:(0,LC.jsx)(XC,{})})),QC()})()})();
//# sourceMappingURL=main.8cdc301d.js.map